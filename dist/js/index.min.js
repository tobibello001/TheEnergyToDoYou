if(function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e){var i=(e=e||et).createElement("script");i.text=t,e.head.appendChild(i).parentNode.removeChild(i)}function n(t){var e=!!t&&"length"in t&&t.length,i=ft.type(t);return"function"!==i&&!ft.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function s(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function o(t,e,i){return ft.isFunction(e)?ft.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?ft.grep(t,function(t){return t===e!==i}):"string"!=typeof e?ft.grep(t,function(t){return rt.call(e,t)>-1!==i}):wt.test(e)?ft.filter(e,t,i):(e=ft.filter(e,t),ft.grep(t,function(t){return rt.call(e,t)>-1!==i&&1===t.nodeType}))}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t){var e={};return ft.each(t.match(kt)||[],function(t,i){e[i]=!0}),e}function l(t){return t}function h(t){throw t}function c(t,e,i,n){var s;try{t&&ft.isFunction(s=t.promise)?s.call(t).done(e).fail(i):t&&ft.isFunction(s=t.then)?s.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}function u(){et.removeEventListener("DOMContentLoaded",u),t.removeEventListener("load",u),ft.ready()}function d(){this.expando=ft.expando+d.uid++}function f(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Mt.test(t)?JSON.parse(t):t)}function p(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Nt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=f(i)}catch(t){}Lt.set(t,e,i)}else i=void 0;return i}function g(t,e,i,n){var s,o=1,r=20,a=n?function(){return n.cur()}:function(){return ft.css(t,e,"")},l=a(),h=i&&i[3]||(ft.cssNumber[e]?"":"px"),c=(ft.cssNumber[e]||"px"!==h&&+l)&&Ft.exec(ft.css(t,e));if(c&&c[3]!==h){h=h||c[3],i=i||[],c=+l||1;do{c/=o=o||".5",ft.style(t,e,c+h)}while(o!==(o=a()/l)&&1!==o&&--r)}return i&&(c=+c||+l||0,s=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=s)),s}function m(t){var e,i=t.ownerDocument,n=t.nodeName,s=zt[n];return s||(e=i.body.appendChild(i.createElement(n)),s=ft.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),zt[n]=s,s)}function v(t,e){for(var i,n,s=[],o=0,r=t.length;o<r;o++)(n=t[o]).style&&(i=n.style.display,e?("none"===i&&(s[o]=jt.get(n,"display")||null,s[o]||(n.style.display="")),""===n.style.display&&Ht(n)&&(s[o]=m(n))):"none"!==i&&(s[o]="none",jt.set(n,"display",i)));for(o=0;o<r;o++)null!=s[o]&&(t[o].style.display=s[o]);return t}function b(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&s(t,e)?ft.merge([t],i):i}function _(t,e){for(var i=0,n=t.length;i<n;i++)jt.set(t[i],"globalEval",!e||jt.get(e[i],"globalEval"))}function y(t,e,i,n,s){for(var o,r,a,l,h,c,u=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===ft.type(o))ft.merge(d,o.nodeType?[o]:o);else if(Gt.test(o)){for(r=r||u.appendChild(e.createElement("div")),a=(qt.exec(o)||["",""])[1].toLowerCase(),l=Xt[a]||Xt._default,r.innerHTML=l[1]+ft.htmlPrefilter(o)+l[2],c=l[0];c--;)r=r.lastChild;ft.merge(d,r.childNodes),(r=u.firstChild).textContent=""}else d.push(e.createTextNode(o));for(u.textContent="",f=0;o=d[f++];)if(n&&ft.inArray(o,n)>-1)s&&s.push(o);else if(h=ft.contains(o.ownerDocument,o),r=b(u.appendChild(o),"script"),h&&_(r),i)for(c=0;o=r[c++];)Vt.test(o.type||"")&&i.push(o);return u}function C(){return!0}function x(){return!1}function w(){try{return et.activeElement}catch(t){}}function T(t,e,i,n,s,o){var r,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)T(t,a,i,n,e[a],o);return t}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=x;else if(!s)return t;return 1===o&&(r=s,(s=function(t){return ft().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=ft.guid++)),t.each(function(){ft.event.add(this,e,s,n,i)})}function S(t,e){return s(t,"table")&&s(11!==e.nodeType?e:e.firstChild,"tr")?ft(">tbody",t)[0]||t:t}function O(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function E(t){var e=ee.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function k(t,e){var i,n,s,o,r,a,l,h;if(1===e.nodeType){if(jt.hasData(t)&&(o=jt.access(t),r=jt.set(e,o),h=o.events)){delete r.handle,r.events={};for(s in h)for(i=0,n=h[s].length;i<n;i++)ft.event.add(e,s,h[s][i])}Lt.hasData(t)&&(a=Lt.access(t),l=ft.extend({},a),Lt.set(e,l))}}function D(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Ut.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function A(t,e,n,s){e=st.apply([],e);var o,r,a,l,h,c,u=0,d=t.length,f=d-1,p=e[0],g=ft.isFunction(p);if(g||d>1&&"string"==typeof p&&!dt.checkClone&&te.test(p))return t.each(function(i){var o=t.eq(i);g&&(e[0]=p.call(this,i,o.html())),A(o,e,n,s)});if(d&&(o=y(e,t[0].ownerDocument,!1,t,s),r=o.firstChild,1===o.childNodes.length&&(o=r),r||s)){for(l=(a=ft.map(b(o,"script"),O)).length;u<d;u++)h=o,u!==f&&(h=ft.clone(h,!0,!0),l&&ft.merge(a,b(h,"script"))),n.call(t[u],h,u);if(l)for(c=a[a.length-1].ownerDocument,ft.map(a,E),u=0;u<l;u++)h=a[u],Vt.test(h.type||"")&&!jt.access(h,"globalEval")&&ft.contains(c,h)&&(h.src?ft._evalUrl&&ft._evalUrl(h.src):i(h.textContent.replace(ie,""),c))}return t}function I(t,e,i){for(var n,s=e?ft.filter(e,t):t,o=0;null!=(n=s[o]);o++)i||1!==n.nodeType||ft.cleanData(b(n)),n.parentNode&&(i&&ft.contains(n.ownerDocument,n)&&_(b(n,"script")),n.parentNode.removeChild(n));return t}function P(t,e,i){var n,s,o,r,a=t.style;return(i=i||oe(t))&&(""!==(r=i.getPropertyValue(e)||i[e])||ft.contains(t.ownerDocument,t)||(r=ft.style(t,e)),!dt.pixelMarginRight()&&se.test(r)&&ne.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function j(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function L(t){if(t in ue)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ce.length;i--;)if((t=ce[i]+e)in ue)return t}function M(t){var e=ft.cssProps[t];return e||(e=ft.cssProps[t]=L(t)||t),e}function N(t,e,i){var n=Ft.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function B(t,e,i,n,s){var o,r=0;for(o=i===(n?"border":"content")?4:"width"===e?1:0;o<4;o+=2)"margin"===i&&(r+=ft.css(t,i+Rt[o],!0,s)),n?("content"===i&&(r-=ft.css(t,"padding"+Rt[o],!0,s)),"margin"!==i&&(r-=ft.css(t,"border"+Rt[o]+"Width",!0,s))):(r+=ft.css(t,"padding"+Rt[o],!0,s),"padding"!==i&&(r+=ft.css(t,"border"+Rt[o]+"Width",!0,s)));return r}function F(t,e,i){var n,s=oe(t),o=P(t,e,s),r="border-box"===ft.css(t,"boxSizing",!1,s);return se.test(o)?o:(n=r&&(dt.boxSizingReliable()||o===t.style[e]),"auto"===o&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)]),(o=parseFloat(o)||0)+B(t,e,i||(r?"border":"content"),n,s)+"px")}function R(t,e,i,n,s){return new R.prototype.init(t,e,i,n,s)}function H(){fe&&(!1===et.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(H):t.setTimeout(H,ft.fx.interval),ft.fx.tick())}function W(){return t.setTimeout(function(){de=void 0}),de=ft.now()}function z(t,e){var i,n=0,s={height:t};for(e=e?1:0;n<4;n+=2-e)s["margin"+(i=Rt[n])]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function U(t,e,i){for(var n,s=(V.tweeners[e]||[]).concat(V.tweeners["*"]),o=0,r=s.length;o<r;o++)if(n=s[o].call(i,e,t))return n}function q(t,e){var i,n,s,o,r;for(i in t)if(n=ft.camelCase(i),s=e[n],o=t[i],Array.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(r=ft.cssHooks[n])&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function V(t,e,i){var n,s,o=0,r=V.prefilters.length,a=ft.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=de||W(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),o=0,r=h.tweens.length;o<r;o++)h.tweens[o].run(n);return a.notifyWith(t,[h,n,i]),n<1&&r?i:(r||a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:ft.extend({},e),opts:ft.extend(!0,{specialEasing:{},easing:ft.easing._default},i),originalProperties:e,originalOptions:i,startTime:de||W(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ft.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)h.tweens[i].run(1);return e?(a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h,e])):a.rejectWith(t,[h,e]),this}}),c=h.props;for(q(c,h.opts.specialEasing);o<r;o++)if(n=V.prefilters[o].call(h,t,c,h.opts))return ft.isFunction(n.stop)&&(ft._queueHooks(h.elem,h.opts.queue).stop=ft.proxy(n.stop,n)),n;return ft.map(c,U,h),ft.isFunction(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),ft.fx.timer(ft.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}function X(t){return(t.match(kt)||[]).join(" ")}function G(t){return t.getAttribute&&t.getAttribute("class")||""}function Y(t,e,i,n){var s;if(Array.isArray(e))ft.each(e,function(e,s){i||Se.test(t)?n(t,s):Y(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,i,n)});else if(i||"object"!==ft.type(e))n(t,e);else for(s in e)Y(t+"["+s+"]",e[s],i,n)}function $(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(kt)||[];if(ft.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function K(t,e,i,n){function s(a){var l;return o[a]=!0,ft.each(t[a]||[],function(t,a){var h=a(e,i,n);return"string"!=typeof h||r||o[h]?r?!(l=h):void 0:(e.dataTypes.unshift(h),s(h),!1)}),l}var o={},r=t===Be;return s(e.dataTypes[0])||!o["*"]&&s("*")}function Q(t,e){var i,n,s=ft.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&ft.extend(!0,t,n),t}function J(t,e,i){for(var n,s,o,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),i[o]}function Z(t,e,i,n){var s,o,r,a,l,h={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)h[r.toLowerCase()]=t.converters[r];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=h[l+" "+o]||h["* "+o]))for(s in h)if((a=s.split(" "))[1]===o&&(r=h[l+" "+a[0]]||h["* "+a[0]])){!0===r?r=h[s]:!0!==h[s]&&(o=a[0],c.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var tt=[],et=t.document,it=Object.getPrototypeOf,nt=tt.slice,st=tt.concat,ot=tt.push,rt=tt.indexOf,at={},lt=at.toString,ht=at.hasOwnProperty,ct=ht.toString,ut=ct.call(Object),dt={},ft=function(t,e){return new ft.fn.init(t,e)},pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gt=/^-ms-/,mt=/-([a-z])/g,vt=function(t,e){return e.toUpperCase()};ft.fn=ft.prototype={jquery:"3.2.1",constructor:ft,length:0,toArray:function(){return nt.call(this)},get:function(t){return null==t?nt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=ft.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return ft.each(this,t)},map:function(t){return this.pushStack(ft.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(nt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ot,sort:tt.sort,splice:tt.splice},ft.extend=ft.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof r&&(h=r,r=arguments[a]||{},a++),"object"==typeof r||ft.isFunction(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],r!==(n=t[e])&&(h&&n&&(ft.isPlainObject(n)||(s=Array.isArray(n)))?(s?(s=!1,o=i&&Array.isArray(i)?i:[]):o=i&&ft.isPlainObject(i)?i:{},r[e]=ft.extend(h,o,n)):void 0!==n&&(r[e]=n));return r},ft.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ft.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=ft.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==lt.call(t))&&(!(e=it(t))||"function"==typeof(i=ht.call(e,"constructor")&&e.constructor)&&ct.call(i)===ut)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?at[lt.call(t)]||"object":typeof t},globalEval:function(t){i(t)},camelCase:function(t){return t.replace(gt,"ms-").replace(mt,vt)},each:function(t,e){var i,s=0;if(n(t))for(i=t.length;s<i&&!1!==e.call(t[s],s,t[s]);s++);else for(s in t)if(!1===e.call(t[s],s,t[s]))break;return t},trim:function(t){return null==t?"":(t+"").replace(pt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?ft.merge(i,"string"==typeof t?[t]:t):ot.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:rt.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n=[],s=0,o=t.length,r=!i;s<o;s++)!e(t[s],s)!==r&&n.push(t[s]);return n},map:function(t,e,i){var s,o,r=0,a=[];if(n(t))for(s=t.length;r<s;r++)null!=(o=e(t[r],r,i))&&a.push(o);else for(r in t)null!=(o=e(t[r],r,i))&&a.push(o);return st.apply([],a)},guid:1,proxy:function(t,e){var i,n,s;if("string"==typeof e&&(i=t[e],e=t,t=i),ft.isFunction(t))return n=nt.call(arguments,2),s=function(){return t.apply(e||this,n.concat(nt.call(arguments)))},s.guid=t.guid=t.guid||ft.guid++,s},now:Date.now,support:dt}),"function"==typeof Symbol&&(ft.fn[Symbol.iterator]=tt[Symbol.iterator]),ft.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){at["[object "+e+"]"]=e.toLowerCase()});var bt=function(t){function e(t,e,i,n){var s,o,r,a,l,c,d,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return i;if(!n&&((e?e.ownerDocument||e:R)!==I&&A(e),e=e||I,j)){if(11!==p&&(l=gt.exec(t)))if(s=l[1]){if(9===p){if(!(r=e.getElementById(s)))return i;if(r.id===s)return i.push(r),i}else if(f&&(r=f.getElementById(s))&&B(e,r)&&r.id===s)return i.push(r),i}else{if(l[2])return K.apply(i,e.getElementsByTagName(t)),i;if((s=l[3])&&y.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(s)),i}if(y.qsa&&!q[t+" "]&&(!L||!L.test(t))){if(1!==p)f=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(_t,yt):e.setAttribute("id",a=F),o=(c=T(t)).length;o--;)c[o]="#"+a+" "+u(c[o]);d=c.join(","),f=mt.test(t)&&h(e.parentNode)||e}if(d)try{return K.apply(i,f.querySelectorAll(d)),i}catch(t){}finally{a===F&&e.removeAttribute("id")}}}return O(t.replace(ot,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>C.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[F]=!0,t}function s(t){var e=I.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)C.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&xt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function h(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function u(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,s=e.next,o=s||n,r=i&&"parentNode"===o,a=W++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,s);return!1}:function(e,i,l){var h,c,u,d=[H,a];if(l){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||r)if(u=e[F]||(e[F]={}),c=u[e.uniqueID]||(u[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[n]||e;else{if((h=c[o])&&h[0]===H&&h[1]===a)return d[2]=h[2];if(c[o]=d,d[2]=t(e,i,l))return!0}return!1}}function f(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function p(t,i,n){for(var s=0,o=i.length;s<o;s++)e(t,i[s],n);return n}function g(t,e,i,n,s){for(var o,r=[],a=0,l=t.length,h=null!=e;a<l;a++)(o=t[a])&&(i&&!i(o,n,s)||(r.push(o),h&&e.push(a)));return r}function m(t,e,i,s,o,r){return s&&!s[F]&&(s=m(s)),o&&!o[F]&&(o=m(o,r)),n(function(n,r,a,l){var h,c,u,d=[],f=[],m=r.length,v=n||p(e||"*",a.nodeType?[a]:a,[]),b=!t||!n&&e?v:g(v,d,t,a,l),_=i?o||(n?t:m||s)?[]:r:b;if(i&&i(b,_,a,l),s)for(h=g(_,f),s(h,[],a,l),c=h.length;c--;)(u=h[c])&&(_[f[c]]=!(b[f[c]]=u));if(n){if(o||t){if(o){for(h=[],c=_.length;c--;)(u=_[c])&&h.push(b[c]=u);o(null,_=[],h,l)}for(c=_.length;c--;)(u=_[c])&&(h=o?J(n,u):d[c])>-1&&(n[h]=!(r[h]=u))}}else _=g(_===r?_.splice(m,_.length):_),o?o(null,r,_,l):K.apply(r,_)})}function v(t){for(var e,i,n,s=t.length,o=C.relative[t[0].type],r=o||C.relative[" "],a=o?1:0,l=d(function(t){return t===e},r,!0),h=d(function(t){return J(e,t)>-1},r,!0),c=[function(t,i,n){var s=!o&&(n||i!==E)||((e=i).nodeType?l(t,i,n):h(t,i,n));return e=null,s}];a<s;a++)if(i=C.relative[t[a].type])c=[d(f(c),i)];else{if((i=C.filter[t[a].type].apply(null,t[a].matches))[F]){for(n=++a;n<s&&!C.relative[t[n].type];n++);return m(a>1&&f(c),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ot,"$1"),i,a<n&&v(t.slice(a,n)),n<s&&v(t=t.slice(n)),n<s&&u(t))}c.push(i)}return f(c)}function b(t,i){var s=i.length>0,o=t.length>0,r=function(n,r,a,l,h){var c,u,d,f=0,p="0",m=n&&[],v=[],b=E,_=n||o&&C.find.TAG("*",h),y=H+=null==b?1:Math.random()||.1,x=_.length;for(h&&(E=r===I||r||h);p!==x&&null!=(c=_[p]);p++){if(o&&c){for(u=0,r||c.ownerDocument===I||(A(c),a=!j);d=t[u++];)if(d(c,r||I,a)){l.push(c);break}h&&(H=y)}s&&((c=!d&&c)&&f--,n&&m.push(c))}if(f+=p,s&&p!==f){for(u=0;d=i[u++];)d(m,v,r,a);if(n){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=Y.call(l));v=g(v)}K.apply(l,v),h&&!n&&v.length>0&&f+i.length>1&&e.uniqueSort(l)}return h&&(H=y,E=b),m};return s?n(r):r}var _,y,C,x,w,T,S,O,E,k,D,A,I,P,j,L,M,N,B,F="sizzle"+1*new Date,R=t.document,H=0,W=0,z=i(),U=i(),q=i(),V=function(t,e){return t===e&&(D=!0),0},X={}.hasOwnProperty,G=[],Y=G.pop,$=G.push,K=G.push,Q=G.slice,J=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",it="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",nt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",st=new RegExp(tt+"+","g"),ot=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),rt=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ht=new RegExp(nt),ct=new RegExp("^"+et+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+nt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),bt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},_t=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,yt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Ct=function(){A()},xt=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{K.apply(G=Q.call(R.childNodes),R.childNodes),G[R.childNodes.length].nodeType}catch(t){K={apply:G.length?function(t,e){$.apply(t,Q.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}y=e.support={},w=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},A=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:R;return n!==I&&9===n.nodeType&&n.documentElement?(I=n,P=I.documentElement,j=!w(I),R!==I&&(i=I.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",Ct,!1):i.attachEvent&&i.attachEvent("onunload",Ct)),y.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),y.getElementsByTagName=s(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),y.getElementsByClassName=pt.test(I.getElementsByClassName),y.getById=s(function(t){return P.appendChild(t).id=F,!I.getElementsByName||!I.getElementsByName(F).length}),y.getById?(C.filter.ID=function(t){var e=t.replace(vt,bt);return function(t){return t.getAttribute("id")===e}},C.find.ID=function(t,e){if(void 0!==e.getElementById&&j){var i=e.getElementById(t);return i?[i]:[]}}):(C.filter.ID=function(t){var e=t.replace(vt,bt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},C.find.ID=function(t,e){if(void 0!==e.getElementById&&j){var i,n,s,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(s=e.getElementsByName(t),n=0;o=s[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),C.find.TAG=y.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):y.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},C.find.CLASS=y.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&j)return e.getElementsByClassName(t)},M=[],L=[],(y.qsa=pt.test(I.querySelectorAll))&&(s(function(t){P.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+tt+"*(?:value|"+Z+")"),t.querySelectorAll("[id~="+F+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||L.push(".#.+[+~]")}),s(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=I.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),P.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(y.matchesSelector=pt.test(N=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&s(function(t){y.disconnectedMatch=N.call(t,"*"),N.call(t,"[s!='']:x"),M.push("!=",nt)}),L=L.length&&new RegExp(L.join("|")),M=M.length&&new RegExp(M.join("|")),e=pt.test(P.compareDocumentPosition),B=e||pt.test(P.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return D=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!y.sortDetached&&e.compareDocumentPosition(t)===i?t===I||t.ownerDocument===R&&B(R,t)?-1:e===I||e.ownerDocument===R&&B(R,e)?1:k?J(k,t)-J(k,e):0:4&i?-1:1)}:function(t,e){if(t===e)return D=!0,0;var i,n=0,s=t.parentNode,o=e.parentNode,a=[t],l=[e];if(!s||!o)return t===I?-1:e===I?1:s?-1:o?1:k?J(k,t)-J(k,e):0;if(s===o)return r(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?r(a[n],l[n]):a[n]===R?-1:l[n]===R?1:0},I):I},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==I&&A(t),i=i.replace(lt,"='$1']"),y.matchesSelector&&j&&!q[i+" "]&&(!M||!M.test(i))&&(!L||!L.test(i)))try{var n=N.call(t,i);if(n||y.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,I,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==I&&A(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==I&&A(t);var i=C.attrHandle[e.toLowerCase()],n=i&&X.call(C.attrHandle,e.toLowerCase())?i(t,e,!j):void 0;return void 0!==n?n:y.attributes||!j?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.escape=function(t){return(t+"").replace(_t,yt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(D=!y.detectDuplicates,k=!y.sortStable&&t.slice(0),t.sort(V),D){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return k=null,t},x=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=x(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=x(e);return i},(C=e.selectors={cacheLength:50,createPseudo:n,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ht.test(i)&&(e=T(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(st," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,f,p,g=o!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!l&&!a,_=!1;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[r?m.firstChild:m.lastChild],r&&b){for(_=(f=(h=(c=(u=(d=m)[F]||(d[F]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===H&&h[1])&&h[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(_=f=0)||p.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[H,f,_];break}}else if(b&&(_=f=(h=(c=(u=(d=e)[F]||(d[F]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===H&&h[1]),!1===_)for(;(d=++f&&d&&d[g]||(_=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(b&&((c=(u=d[F]||(d[F]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[H,_]),d!==e)););return(_-=s)===n||_%n==0&&_/n>=0}}},PSEUDO:function(t,i){var s,o=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(i):o.length>1?(s=[t,t,"",i],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),r=s.length;r--;)t[n=J(t,s[r])]=!(e[n]=s[r])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=S(t.replace(ot,"$1"));return s[F]?n(function(t,e,i,n){for(var o,r=s(t,null,n,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(vt,bt),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:n(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,bt).toLowerCase(),function(e){var i;do{if(i=j?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[i<0?i+e:i]}),even:l(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=C.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[_]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(_);for(_ in{submit:!0,reset:!0})C.pseudos[_]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(_);return c.prototype=C.filters=C.pseudos,C.setFilters=new c,T=e.tokenize=function(t,i){var n,s,o,r,a,l,h,c=U[t+" "];if(c)return i?0:c.slice(0);for(a=t,l=[],h=C.preFilter;a;){n&&!(s=rt.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),n=!1,(s=at.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(ot," ")}),a=a.slice(n.length));for(r in C.filter)!(s=ut[r].exec(a))||h[r]&&!(s=h[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):U(t,l).slice(0)},S=e.compile=function(t,e){var i,n=[],s=[],o=q[t+" "];if(!o){for(e||(e=T(t)),i=e.length;i--;)(o=v(e[i]))[F]?n.push(o):s.push(o);(o=q(t,b(s,n))).selector=t}return o},O=e.select=function(t,e,i,n){var s,o,r,a,l,c="function"==typeof t&&t,d=!n&&T(t=c.selector||t);if(i=i||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(r=o[0]).type&&9===e.nodeType&&j&&C.relative[o[1].type]){if(!(e=(C.find.ID(r.matches[0].replace(vt,bt),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=ut.needsContext.test(t)?0:o.length;s--&&(r=o[s],!C.relative[a=r.type]);)if((l=C.find[a])&&(n=l(r.matches[0].replace(vt,bt),mt.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(s,1),!(t=n.length&&u(o)))return K.apply(i,n),i;break}}return(c||S(t,d))(n,e,!j,i,!e||mt.test(t)&&h(e.parentNode)||e),i},y.sortStable=F.split("").sort(V).join("")===F,y.detectDuplicates=!!D,A(),y.sortDetached=s(function(t){return 1&t.compareDocumentPosition(I.createElement("fieldset"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),y.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(Z,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ft.find=bt,ft.expr=bt.selectors,ft.expr[":"]=ft.expr.pseudos,ft.uniqueSort=ft.unique=bt.uniqueSort,ft.text=bt.getText,ft.isXMLDoc=bt.isXML,ft.contains=bt.contains,ft.escapeSelector=bt.escape;var _t=function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&ft(t).is(i))break;n.push(t)}return n},yt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},Ct=ft.expr.match.needsContext,xt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,wt=/^.[^:#\[\.,]*$/;ft.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ft.find.matchesSelector(n,t)?[n]:[]:ft.find.matches(t,ft.grep(e,function(t){return 1===t.nodeType}))},ft.fn.extend({find:function(t){var e,i,n=this.length,s=this;if("string"!=typeof t)return this.pushStack(ft(t).filter(function(){for(e=0;e<n;e++)if(ft.contains(s[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)ft.find(t,s[e],i);return n>1?ft.uniqueSort(i):i},filter:function(t){return this.pushStack(o(this,t||[],!1))},not:function(t){return this.pushStack(o(this,t||[],!0))},is:function(t){return!!o(this,"string"==typeof t&&Ct.test(t)?ft(t):t||[],!1).length}});var Tt,St=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ft.fn.init=function(t,e,i){var n,s;if(!t)return this;if(i=i||Tt,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:St.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof ft?e[0]:e,ft.merge(this,ft.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:et,!0)),xt.test(n[1])&&ft.isPlainObject(e))for(n in e)ft.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(s=et.getElementById(n[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):ft.isFunction(t)?void 0!==i.ready?i.ready(t):t(ft):ft.makeArray(t,this)}).prototype=ft.fn,Tt=ft(et);var Ot=/^(?:parents|prev(?:Until|All))/,Et={children:!0,contents:!0,next:!0,prev:!0};ft.fn.extend({has:function(t){var e=ft(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(ft.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,s=this.length,o=[],r="string"!=typeof t&&ft(t);if(!Ct.test(t))for(;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ft.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?ft.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?rt.call(ft(t),this[0]):rt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ft.uniqueSort(ft.merge(this.get(),ft(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ft.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return _t(t,"parentNode")},parentsUntil:function(t,e,i){return _t(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return _t(t,"nextSibling")},prevAll:function(t){return _t(t,"previousSibling")},nextUntil:function(t,e,i){return _t(t,"nextSibling",i)},prevUntil:function(t,e,i){return _t(t,"previousSibling",i)},siblings:function(t){return yt((t.parentNode||{}).firstChild,t)},children:function(t){return yt(t.firstChild)},contents:function(t){return s(t,"iframe")?t.contentDocument:(s(t,"template")&&(t=t.content||t),ft.merge([],t.childNodes))}},function(t,e){ft.fn[t]=function(i,n){var s=ft.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=ft.filter(n,s)),this.length>1&&(Et[t]||ft.uniqueSort(s),Ot.test(t)&&s.reverse()),this.pushStack(s)}});var kt=/[^\x20\t\r\n\f]+/g;ft.Callbacks=function(t){t="string"==typeof t?a(t):ft.extend({},t);var e,i,n,s,o=[],r=[],l=-1,h=function(){for(s=s||t.once,n=e=!0;r.length;l=-1)for(i=r.shift();++l<o.length;)!1===o[l].apply(i[0],i[1])&&t.stopOnFalse&&(l=o.length,i=!1);t.memory||(i=!1),e=!1,s&&(o=i?[]:"")},c={add:function(){return o&&(i&&!e&&(l=o.length-1,r.push(i)),function e(i){ft.each(i,function(i,n){ft.isFunction(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==ft.type(n)&&e(n)})}(arguments),i&&!e&&h()),this},remove:function(){return ft.each(arguments,function(t,e){for(var i;(i=ft.inArray(e,o,i))>-1;)o.splice(i,1),i<=l&&l--}),this},has:function(t){return t?ft.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=r=[],o=i="",this},disabled:function(){return!o},lock:function(){return s=r=[],i||e||(o=i=""),this},locked:function(){return!!s},fireWith:function(t,i){return s||(i=[t,(i=i||[]).slice?i.slice():i],r.push(i),e||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},ft.extend({Deferred:function(e){var i=[["notify","progress",ft.Callbacks("memory"),ft.Callbacks("memory"),2],["resolve","done",ft.Callbacks("once memory"),ft.Callbacks("once memory"),0,"resolved"],["reject","fail",ft.Callbacks("once memory"),ft.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return ft.Deferred(function(e){ft.each(i,function(i,n){var s=ft.isFunction(t[n[4]])&&t[n[4]];o[n[1]](function(){var t=s&&s.apply(this,arguments);t&&ft.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,s?[t]:arguments)})}),t=null}).promise()},then:function(e,n,s){function o(e,i,n,s){return function(){var a=this,c=arguments,u=function(){var t,u;if(!(e<r)){if((t=n.apply(a,c))===i.promise())throw new TypeError("Thenable self-resolution");u=t&&("object"==typeof t||"function"==typeof t)&&t.then,ft.isFunction(u)?s?u.call(t,o(r,i,l,s),o(r,i,h,s)):(r++,u.call(t,o(r,i,l,s),o(r,i,h,s),o(r,i,l,i.notifyWith))):(n!==l&&(a=void 0,c=[t]),(s||i.resolveWith)(a,c))}},d=s?u:function(){try{u()}catch(t){ft.Deferred.exceptionHook&&ft.Deferred.exceptionHook(t,d.stackTrace),e+1>=r&&(n!==h&&(a=void 0,c=[t]),i.rejectWith(a,c))}};e?d():(ft.Deferred.getStackHook&&(d.stackTrace=ft.Deferred.getStackHook()),t.setTimeout(d))}}var r=0;return ft.Deferred(function(t){i[0][3].add(o(0,t,ft.isFunction(s)?s:l,t.notifyWith)),i[1][3].add(o(0,t,ft.isFunction(e)?e:l)),i[2][3].add(o(0,t,ft.isFunction(n)?n:h))}).promise()},promise:function(t){return null!=t?ft.extend(t,s):s}},o={};return ft.each(i,function(t,e){var r=e[2],a=e[5];s[e[1]]=r.add,a&&r.add(function(){n=a},i[3-t][2].disable,i[0][2].lock),r.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=r.fireWith}),s.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),s=nt.call(arguments),o=ft.Deferred(),r=function(t){return function(i){n[t]=this,s[t]=arguments.length>1?nt.call(arguments):i,--e||o.resolveWith(n,s)}};if(e<=1&&(c(t,o.done(r(i)).resolve,o.reject,!e),"pending"===o.state()||ft.isFunction(s[i]&&s[i].then)))return o.then();for(;i--;)c(s[i],r(i),o.reject);return o.promise()}});var Dt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ft.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&Dt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},ft.readyException=function(e){t.setTimeout(function(){throw e})};var At=ft.Deferred();ft.fn.ready=function(t){return At.then(t).catch(function(t){ft.readyException(t)}),this},ft.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--ft.readyWait:ft.isReady)||(ft.isReady=!0,!0!==t&&--ft.readyWait>0||At.resolveWith(et,[ft]))}}),ft.ready.then=At.then,"complete"===et.readyState||"loading"!==et.readyState&&!et.documentElement.doScroll?t.setTimeout(ft.ready):(et.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u));var It=function(t,e,i,n,s,o,r){var a=0,l=t.length,h=null==i;if("object"===ft.type(i)){s=!0;for(a in i)It(t,e,a,i[a],!0,o,r)}else if(void 0!==n&&(s=!0,ft.isFunction(n)||(r=!0),h&&(r?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(ft(t),i)})),e))for(;a<l;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:h?e.call(t):l?e(t[0],i):o},Pt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};d.uid=1,d.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Pt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,s=this.cache(t);if("string"==typeof e)s[ft.camelCase(e)]=i;else for(n in e)s[ft.camelCase(n)]=e[n];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][ft.camelCase(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(ft.camelCase):(e=ft.camelCase(e))in n?[e]:e.match(kt)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||ft.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!ft.isEmptyObject(e)}};var jt=new d,Lt=new d,Mt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Nt=/[A-Z]/g;ft.extend({hasData:function(t){return Lt.hasData(t)||jt.hasData(t)},data:function(t,e,i){return Lt.access(t,e,i)},removeData:function(t,e){Lt.remove(t,e)},_data:function(t,e,i){return jt.access(t,e,i)},_removeData:function(t,e){jt.remove(t,e)}}),ft.fn.extend({data:function(t,e){var i,n,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=Lt.get(o),1===o.nodeType&&!jt.get(o,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&0===(n=r[i].name).indexOf("data-")&&(n=ft.camelCase(n.slice(5)),p(o,n,s[n]));jt.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){Lt.set(this,t)}):It(this,function(e){var i;if(o&&void 0===e){if(void 0!==(i=Lt.get(o,t)))return i;if(void 0!==(i=p(o,t)))return i}else this.each(function(){Lt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Lt.remove(this,t)})}}),ft.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=jt.get(t,e),i&&(!n||Array.isArray(i)?n=jt.access(t,e,ft.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=ft.queue(t,e),n=i.length,s=i.shift(),o=ft._queueHooks(t,e);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,function(){ft.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return jt.get(t,i)||jt.access(t,i,{empty:ft.Callbacks("once memory").add(function(){jt.remove(t,[e+"queue",i])})})}}),ft.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ft.queue(this[0],t):void 0===e?this:this.each(function(){var i=ft.queue(this,t,e);ft._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ft.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ft.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=ft.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(i=jt.get(o[r],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ft=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),Rt=["Top","Right","Bottom","Left"],Ht=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ft.contains(t.ownerDocument,t)&&"none"===ft.css(t,"display")},Wt=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s},zt={};ft.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ht(this)?ft(this).show():ft(this).hide()})}});var Ut=/^(?:checkbox|radio)$/i,qt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Vt=/^$|\/(?:java|ecma)script/i,Xt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td;var Gt=/<|&#?\w+;/;!function(){var t=et.createDocumentFragment().appendChild(et.createElement("div")),e=et.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),dt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",dt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Yt=et.documentElement,$t=/^key/,Kt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qt=/^([^.]*)(?:\.(.+)|)/;ft.event={global:{},add:function(t,e,i,n,s){var o,r,a,l,h,c,u,d,f,p,g,m=jt.get(t);if(m)for(i.handler&&(i=(o=i).handler,s=o.selector),s&&ft.find.matchesSelector(Yt,s),i.guid||(i.guid=ft.guid++),(l=m.events)||(l=m.events={}),(r=m.handle)||(r=m.handle=function(e){return void 0!==ft&&ft.event.triggered!==e.type?ft.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(kt)||[""]).length;h--;)f=g=(a=Qt.exec(e[h])||[])[1],p=(a[2]||"").split(".").sort(),f&&(u=ft.event.special[f]||{},f=(s?u.delegateType:u.bindType)||f,u=ft.event.special[f]||{},c=ft.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&ft.expr.match.needsContext.test(s),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,p,r)||t.addEventListener&&t.addEventListener(f,r)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,c):d.push(c),ft.event.global[f]=!0)},remove:function(t,e,i,n,s){var o,r,a,l,h,c,u,d,f,p,g,m=jt.hasData(t)&&jt.get(t);if(m&&(l=m.events)){for(h=(e=(e||"").match(kt)||[""]).length;h--;)if(a=Qt.exec(e[h])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f){for(u=ft.event.special[f]||{},d=l[f=(n?u.delegateType:u.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=d.length;o--;)c=d[o],!s&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));r&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,p,m.handle)||ft.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)ft.event.remove(t,f+e[h],i,n,!0);ft.isEmptyObject(l)&&jt.remove(t,"handle events")}},dispatch:function(t){var e,i,n,s,o,r,a=ft.event.fix(t),l=new Array(arguments.length),h=(jt.get(this,"events")||{})[a.type]||[],c=ft.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(r=ft.event.handlers.call(this,a,h),e=0;(s=r[e++])&&!a.isPropagationStopped();)for(a.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(n=((ft.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,l))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,n,s,o,r,a=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],r={},i=0;i<l;i++)void 0===r[s=(n=e[i]).selector+" "]&&(r[s]=n.needsContext?ft(s,this).index(h)>-1:ft.find(s,this,null,[h]).length),r[s]&&o.push(n);o.length&&a.push({elem:h,handlers:o})}return h=this,l<e.length&&a.push({elem:h,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(ft.Event.prototype,t,{enumerable:!0,configurable:!0,get:ft.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[ft.expando]?t:new ft.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&s(this,"input"))return this.click(),!1},_default:function(t){return s(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ft.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},ft.Event=function(t,e){if(!(this instanceof ft.Event))return new ft.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?C:x,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&ft.extend(this,e),this.timeStamp=t&&t.timeStamp||ft.now(),this[ft.expando]=!0},ft.Event.prototype={constructor:ft.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=C,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=C,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=C,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},ft.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&$t.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Kt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},ft.event.addProp),ft.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ft.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return s&&(s===n||ft.contains(n,s))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ft.fn.extend({on:function(t,e,i,n){return T(this,t,e,i,n)},one:function(t,e,i,n){return T(this,t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ft(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=x),this.each(function(){ft.event.remove(this,t,i,e)})}});var Jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Zt=/<script|<style|<link/i,te=/checked\s*(?:[^=]|=\s*.checked.)/i,ee=/^true\/(.*)/,ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ft.extend({htmlPrefilter:function(t){return t.replace(Jt,"<$1></$2>")},clone:function(t,e,i){var n,s,o,r,a=t.cloneNode(!0),l=ft.contains(t.ownerDocument,t);if(!(dt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ft.isXMLDoc(t)))for(r=b(a),n=0,s=(o=b(t)).length;n<s;n++)D(o[n],r[n]);if(e)if(i)for(o=o||b(t),r=r||b(a),n=0,s=o.length;n<s;n++)k(o[n],r[n]);else k(t,a);return(r=b(a,"script")).length>0&&_(r,!l&&b(t,"script")),a},cleanData:function(t){for(var e,i,n,s=ft.event.special,o=0;void 0!==(i=t[o]);o++)if(Pt(i)){if(e=i[jt.expando]){if(e.events)for(n in e.events)s[n]?ft.event.remove(i,n):ft.removeEvent(i,n,e.handle);i[jt.expando]=void 0}i[Lt.expando]&&(i[Lt.expando]=void 0)}}}),ft.fn.extend({detach:function(t){return I(this,t,!0)},remove:function(t){return I(this,t)},text:function(t){return It(this,function(t){return void 0===t?ft.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return A(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||S(this,t).appendChild(t)})},prepend:function(){return A(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=S(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(ft.cleanData(b(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ft.clone(this,t,e)})},html:function(t){return It(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Zt.test(t)&&!Xt[(qt.exec(t)||["",""])[1].toLowerCase()]){t=ft.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(ft.cleanData(b(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return A(this,arguments,function(e){var i=this.parentNode;ft.inArray(this,t)<0&&(ft.cleanData(b(this)),i&&i.replaceChild(e,this))},t)}}),ft.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ft.fn[t]=function(t){for(var i,n=[],s=ft(t),o=s.length-1,r=0;r<=o;r++)i=r===o?this:this.clone(!0),ft(s[r])[e](i),ot.apply(n,i.get());return this.pushStack(n)}});var ne=/^margin/,se=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),oe=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Yt.appendChild(r);var e=t.getComputedStyle(a);i="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",s="4px"===e.marginRight,Yt.removeChild(r),a=null}}var i,n,s,o,r=et.createElement("div"),a=et.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",dt.clearCloneStyle="content-box"===a.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(a),ft.extend(dt,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),s},reliableMarginLeft:function(){return e(),o}}))}();var re=/^(none|table(?!-c[ea]).+)/,ae=/^--/,le={position:"absolute",visibility:"hidden",display:"block"},he={letterSpacing:"0",fontWeight:"400"},ce=["Webkit","Moz","ms"],ue=et.createElement("div").style;ft.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=P(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=ft.camelCase(e),l=ae.test(e),h=t.style;if(l||(e=M(a)),r=ft.cssHooks[e]||ft.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:h[e];"string"==(o=typeof i)&&(s=Ft.exec(i))&&s[1]&&(i=g(t,e,s),o="number"),null!=i&&i===i&&("number"===o&&(i+=s&&s[3]||(ft.cssNumber[a]?"":"px")),dt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var s,o,r,a=ft.camelCase(e);return ae.test(e)||(e=M(a)),(r=ft.cssHooks[e]||ft.cssHooks[a])&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=P(t,e,n)),"normal"===s&&e in he&&(s=he[e]),""===i||i?(o=parseFloat(s),!0===i||isFinite(o)?o||0:s):s}}),ft.each(["height","width"],function(t,e){ft.cssHooks[e]={get:function(t,i,n){if(i)return!re.test(ft.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?F(t,e,n):Wt(t,le,function(){return F(t,e,n)})},set:function(t,i,n){var s,o=n&&oe(t),r=n&&B(t,e,n,"border-box"===ft.css(t,"boxSizing",!1,o),o);return r&&(s=Ft.exec(i))&&"px"!==(s[3]||"px")&&(t.style[e]=i,i=ft.css(t,e)),N(t,i,r)}}}),ft.cssHooks.marginLeft=j(dt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(P(t,"marginLeft"))||t.getBoundingClientRect().left-Wt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),ft.each({margin:"",padding:"",border:"Width"},function(t,e){ft.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];n<4;n++)s[t+Rt[n]+e]=o[n]||o[n-2]||o[0];return s}},ne.test(t)||(ft.cssHooks[t+e].set=N)}),ft.fn.extend({css:function(t,e){return It(this,function(t,e,i){var n,s,o={},r=0;if(Array.isArray(e)){for(n=oe(t),s=e.length;r<s;r++)o[e[r]]=ft.css(t,e[r],!1,n);return o}return void 0!==i?ft.style(t,e,i):ft.css(t,e)},t,e,arguments.length>1)}}),ft.Tween=R,R.prototype={constructor:R,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||ft.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ft.cssNumber[i]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,i=R.propHooks[this.prop];return this.options.duration?this.pos=e=ft.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ft.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){ft.fx.step[t.prop]?ft.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ft.cssProps[t.prop]]&&!ft.cssHooks[t.prop]?t.elem[t.prop]=t.now:ft.style(t.elem,t.prop,t.now+t.unit)}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ft.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ft.fx=R.prototype.init,ft.fx.step={};var de,fe,pe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;ft.Animation=ft.extend(V,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return g(i.elem,t,Ft.exec(e),i),i}]},tweener:function(t,e){ft.isFunction(t)?(e=t,t=["*"]):t=t.match(kt);for(var i,n=0,s=t.length;n<s;n++)i=t[n],V.tweeners[i]=V.tweeners[i]||[],V.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,s,o,r,a,l,h,c,u="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&Ht(t),m=jt.get(t,"fxshow");i.queue||(null==(r=ft._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,ft.queue(t,"fx").length||r.empty.fire()})}));for(n in e)if(s=e[n],pe.test(s)){if(delete e[n],o=o||"toggle"===s,s===(g?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;g=!0}f[n]=m&&m[n]||ft.style(t,n)}if((l=!ft.isEmptyObject(e))||!ft.isEmptyObject(f)){u&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=m&&m.display)&&(h=jt.get(t,"display")),"none"===(c=ft.css(t,"display"))&&(h?c=h:(v([t],!0),h=t.style.display||h,c=ft.css(t,"display"),v([t]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===ft.css(t,"float")&&(l||(d.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1;for(n in f)l||(m?"hidden"in m&&(g=m.hidden):m=jt.access(t,"fxshow",{display:h}),o&&(m.hidden=!g),g&&v([t],!0),d.done(function(){g||v([t]),jt.remove(t,"fxshow");for(n in f)ft.style(t,n,f[n])})),l=U(g?m[n]:0,n,d),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}}],prefilter:function(t,e){e?V.prefilters.unshift(t):V.prefilters.push(t)}}),ft.speed=function(t,e,i){var n=t&&"object"==typeof t?ft.extend({},t):{complete:i||!i&&e||ft.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ft.isFunction(e)&&e};return ft.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in ft.fx.speeds?n.duration=ft.fx.speeds[n.duration]:n.duration=ft.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ft.isFunction(n.old)&&n.old.call(this),n.queue&&ft.dequeue(this,n.queue)},n},ft.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Ht).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=ft.isEmptyObject(t),o=ft.speed(e,i,n),r=function(){var e=V(this,ft.extend({},t),o);(s||jt.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=ft.timers,r=jt.get(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&ge.test(s)&&n(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));!e&&i||ft.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=jt.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=ft.timers,r=n?n.length:0;for(i.finish=!0,ft.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ft.each(["toggle","show","hide"],function(t,e){var i=ft.fn[e];ft.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(z(e,!0),t,n,s)}}),ft.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ft.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ft.timers=[],ft.fx.tick=function(){var t,e=0,i=ft.timers;for(de=ft.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||ft.fx.stop(),de=void 0},ft.fx.timer=function(t){ft.timers.push(t),ft.fx.start()},ft.fx.interval=13,ft.fx.start=function(){fe||(fe=!0,H())},ft.fx.stop=function(){fe=null},ft.fx.speeds={slow:600,fast:200,_default:400},ft.fn.delay=function(e,i){return e=ft.fx?ft.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var s=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(s)}})},function(){var t=et.createElement("input"),e=et.createElement("select").appendChild(et.createElement("option"));t.type="checkbox",dt.checkOn=""!==t.value,dt.optSelected=e.selected,(t=et.createElement("input")).value="t",t.type="radio",dt.radioValue="t"===t.value}();var me,ve=ft.expr.attrHandle;ft.fn.extend({attr:function(t,e){return It(this,ft.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ft.removeAttr(this,t)})}}),ft.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?ft.prop(t,e,i):(1===o&&ft.isXMLDoc(t)||(s=ft.attrHooks[e.toLowerCase()]||(ft.expr.match.bool.test(e)?me:void 0)),void 0!==i?null===i?void ft.removeAttr(t,e):s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:(t.setAttribute(e,i+""),i):s&&"get"in s&&null!==(n=s.get(t,e))?n:(n=ft.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!dt.radioValue&&"radio"===e&&s(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,s=e&&e.match(kt);if(s&&1===t.nodeType)for(;i=s[n++];)t.removeAttribute(i)}}),me={set:function(t,e,i){return!1===e?ft.removeAttr(t,i):t.setAttribute(i,i),i}},ft.each(ft.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ve[e]||ft.find.attr;ve[e]=function(t,e,n){var s,o,r=e.toLowerCase();return n||(o=ve[r],ve[r]=s,s=null!=i(t,e,n)?r:null,ve[r]=o),s}});var be=/^(?:input|select|textarea|button)$/i,_e=/^(?:a|area)$/i;ft.fn.extend({prop:function(t,e){return It(this,ft.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[ft.propFix[t]||t]})}}),ft.extend({prop:function(t,e,i){var n,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ft.isXMLDoc(t)||(e=ft.propFix[e]||e,s=ft.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ft.find.attr(t,"tabindex");return e?parseInt(e,10):be.test(t.nodeName)||_e.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),dt.optSelected||(ft.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ft.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ft.propFix[this.toLowerCase()]=this}),ft.fn.extend({addClass:function(t){var e,i,n,s,o,r,a,l=0;if(ft.isFunction(t))return this.each(function(e){ft(this).addClass(t.call(this,e,G(this)))});if("string"==typeof t&&t)for(e=t.match(kt)||[];i=this[l++];)if(s=G(i),n=1===i.nodeType&&" "+X(s)+" "){for(r=0;o=e[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s!==(a=X(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,s,o,r,a,l=0;if(ft.isFunction(t))return this.each(function(e){ft(this).removeClass(t.call(this,e,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(kt)||[];i=this[l++];)if(s=G(i),n=1===i.nodeType&&" "+X(s)+" "){for(r=0;o=e[r++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");s!==(a=X(n))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ft.isFunction(t)?this.each(function(i){ft(this).toggleClass(t.call(this,i,G(this),e),e)}):this.each(function(){var e,n,s,o;if("string"===i)for(n=0,s=ft(this),o=t.match(kt)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==i||((e=G(this))&&jt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":jt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+X(G(i))+" ").indexOf(e)>-1)return!0;return!1}});var ye=/\r/g;ft.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=ft.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(null==(s=n?t.call(this,i,ft(this).val()):t)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=ft.map(s,function(t){return null==t?"":t+""})),(e=ft.valHooks[this.type]||ft.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return(e=ft.valHooks[s.type]||ft.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(ye,""):null==i?"":i)}}}),ft.extend({valHooks:{option:{get:function(t){var e=ft.find.attr(t,"value");return null!=e?e:X(ft.text(t))}},select:{get:function(t){var e,i,n,o=t.options,r=t.selectedIndex,a="select-one"===t.type,l=a?null:[],h=a?r+1:o.length;for(n=r<0?h:a?r:0;n<h;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!s(i.parentNode,"optgroup"))){if(e=ft(i).val(),a)return e;l.push(e)}return l},set:function(t,e){for(var i,n,s=t.options,o=ft.makeArray(e),r=s.length;r--;)((n=s[r]).selected=ft.inArray(ft.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),ft.each(["radio","checkbox"],function(){ft.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=ft.inArray(ft(t).val(),e)>-1}},dt.checkOn||(ft.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ce=/^(?:focusinfocus|focusoutblur)$/;ft.extend(ft.event,{trigger:function(e,i,n,s){var o,r,a,l,h,c,u,d=[n||et],f=ht.call(e,"type")?e.type:e,p=ht.call(e,"namespace")?e.namespace.split("."):[];if(r=a=n=n||et,3!==n.nodeType&&8!==n.nodeType&&!Ce.test(f+ft.event.triggered)&&(f.indexOf(".")>-1&&(f=(p=f.split(".")).shift(),p.sort()),h=f.indexOf(":")<0&&"on"+f,e=e[ft.expando]?e:new ft.Event(f,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:ft.makeArray(i,[e]),u=ft.event.special[f]||{},s||!u.trigger||!1!==u.trigger.apply(n,i))){if(!s&&!u.noBubble&&!ft.isWindow(n)){for(l=u.delegateType||f,Ce.test(l+f)||(r=r.parentNode);r;r=r.parentNode)d.push(r),a=r;a===(n.ownerDocument||et)&&d.push(a.defaultView||a.parentWindow||t)}for(o=0;(r=d[o++])&&!e.isPropagationStopped();)e.type=o>1?l:u.bindType||f,(c=(jt.get(r,"events")||{})[e.type]&&jt.get(r,"handle"))&&c.apply(r,i),(c=h&&r[h])&&c.apply&&Pt(r)&&(e.result=c.apply(r,i),!1===e.result&&e.preventDefault());return e.type=f,s||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),i)||!Pt(n)||h&&ft.isFunction(n[f])&&!ft.isWindow(n)&&((a=n[h])&&(n[h]=null),ft.event.triggered=f,n[f](),ft.event.triggered=void 0,a&&(n[h]=a)),e.result}},simulate:function(t,e,i){var n=ft.extend(new ft.Event,i,{type:t,isSimulated:!0});ft.event.trigger(n,null,e)}}),ft.fn.extend({trigger:function(t,e){return this.each(function(){ft.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return ft.event.trigger(t,e,i,!0)}}),ft.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){ft.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ft.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),dt.focusin="onfocusin"in t,dt.focusin||ft.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ft.event.simulate(e,t.target,ft.event.fix(t))};ft.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=jt.access(n,e);s||n.addEventListener(t,i,!0),jt.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=jt.access(n,e)-1;s?jt.access(n,e,s):(n.removeEventListener(t,i,!0),jt.remove(n,e))}}});var xe=t.location,we=ft.now(),Te=/\?/;ft.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||ft.error("Invalid XML: "+e),i};var Se=/\[\]$/,Oe=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;ft.param=function(t,e){var i,n=[],s=function(t,e){var i=ft.isFunction(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!ft.isPlainObject(t))ft.each(t,function(){s(this.name,this.value)});else for(i in t)Y(i,t[i],e,s);return n.join("&")},ft.fn.extend({serialize:function(){return ft.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ft.prop(this,"elements");return t?ft.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ft(this).is(":disabled")&&ke.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!Ut.test(t))}).map(function(t,e){var i=ft(this).val();return null==i?null:Array.isArray(i)?ft.map(i,function(t){return{name:e.name,value:t.replace(Oe,"\r\n")}}):{name:e.name,value:i.replace(Oe,"\r\n")}}).get()}});var De=/%20/g,Ae=/#.*$/,Ie=/([?&])_=[^&]*/,Pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Le=/^(?:GET|HEAD)$/,Me=/^\/\//,Ne={},Be={},Fe="*/".concat("*"),Re=et.createElement("a");Re.href=xe.href,ft.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:je.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ft.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Q(Q(t,ft.ajaxSettings),e):Q(ft.ajaxSettings,t)},ajaxPrefilter:$(Ne),ajaxTransport:$(Be),ajax:function(e,i){function n(e,i,n,a){var h,d,f,y,C,x=i;c||(c=!0,l&&t.clearTimeout(l),s=void 0,r=a||"",w.readyState=e>0?4:0,h=e>=200&&e<300||304===e,n&&(y=J(p,w,n)),y=Z(p,y,w,h),h?(p.ifModified&&((C=w.getResponseHeader("Last-Modified"))&&(ft.lastModified[o]=C),(C=w.getResponseHeader("etag"))&&(ft.etag[o]=C)),204===e||"HEAD"===p.type?x="nocontent":304===e?x="notmodified":(x=y.state,d=y.data,h=!(f=y.error))):(f=x,!e&&x||(x="error",e<0&&(e=0))),w.status=e,w.statusText=(i||x)+"",h?v.resolveWith(g,[d,x,w]):v.rejectWith(g,[w,x,f]),w.statusCode(_),_=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[w,p,h?d:f]),b.fireWith(g,[w,x]),u&&(m.trigger("ajaxComplete",[w,p]),--ft.active||ft.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0),i=i||{};var s,o,r,a,l,h,c,u,d,f,p=ft.ajaxSetup({},i),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?ft(g):ft.event,v=ft.Deferred(),b=ft.Callbacks("once memory"),_=p.statusCode||{},y={},C={},x="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Pe.exec(r);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(t,e){return null==c&&(t=C[t.toLowerCase()]=C[t.toLowerCase()]||t,y[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)w.always(t[w.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||x;return s&&s.abort(e),n(0,e),this}};if(v.promise(w),p.url=((e||p.url||xe.href)+"").replace(Me,xe.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(kt)||[""],null==p.crossDomain){h=et.createElement("a");try{h.href=p.url,h.href=h.href,p.crossDomain=Re.protocol+"//"+Re.host!=h.protocol+"//"+h.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ft.param(p.data,p.traditional)),K(Ne,p,i,w),c)return w;(u=ft.event&&p.global)&&0==ft.active++&&ft.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Le.test(p.type),o=p.url.replace(Ae,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(De,"+")):(f=p.url.slice(o.length),p.data&&(o+=(Te.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Ie,"$1"),f=(Te.test(o)?"&":"?")+"_="+we+++f),p.url=o+f),p.ifModified&&(ft.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ft.lastModified[o]),ft.etag[o]&&w.setRequestHeader("If-None-Match",ft.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Fe+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)w.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(g,w,p)||c))return w.abort();if(x="abort",b.add(p.complete),w.done(p.success),w.fail(p.error),s=K(Be,p,i,w)){if(w.readyState=1,u&&m.trigger("ajaxSend",[w,p]),c)return w;p.async&&p.timeout>0&&(l=t.setTimeout(function(){w.abort("timeout")},p.timeout));try{c=!1,s.send(y,n)}catch(t){if(c)throw t;n(-1,t)}}else n(-1,"No Transport");return w},getJSON:function(t,e,i){return ft.get(t,e,i,"json")},getScript:function(t,e){return ft.get(t,void 0,e,"script")}}),ft.each(["get","post"],function(t,e){ft[e]=function(t,i,n,s){return ft.isFunction(i)&&(s=s||n,n=i,i=void 0),ft.ajax(ft.extend({url:t,type:e,dataType:s,data:i,success:n},ft.isPlainObject(t)&&t))}}),ft._evalUrl=function(t){return ft.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ft.fn.extend({wrapAll:function(t){var e;return this[0]&&(ft.isFunction(t)&&(t=t.call(this[0])),e=ft(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return ft.isFunction(t)?this.each(function(e){ft(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ft(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ft.isFunction(t);return this.each(function(i){ft(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){ft(this).replaceWith(this.childNodes)}),this}}),ft.expr.pseudos.hidden=function(t){return!ft.expr.pseudos.visible(t)},ft.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},ft.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},We=ft.ajaxSettings.xhr();dt.cors=!!We&&"withCredentials"in We,dt.ajax=We=!!We,ft.ajaxTransport(function(e){var i,n;if(dt.cors||We&&!e.crossDomain)return{send:function(s,o){var r,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(r in s)a.setRequestHeader(r,s[r]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),ft.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),ft.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ft.globalEval(t),t}}}),ft.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ft.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,s){e=ft("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),et.head.appendChild(e[0])},abort:function(){i&&i()}}}});var ze=[],Ue=/(=)\?(?=&|$)|\?\?/;ft.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||ft.expando+"_"+we++;return this[t]=!0,t}}),ft.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,r,a=!1!==e.jsonp&&(Ue.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ue.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=ft.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ue,"$1"+s):!1!==e.jsonp&&(e.url+=(Te.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||ft.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},n.always(function(){void 0===o?ft(t).removeProp(s):t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,ze.push(s)),r&&ft.isFunction(o)&&o(r[0]),r=o=void 0}),"script"}),dt.createHTMLDocument=function(){var t=et.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),ft.parseHTML=function(t,e,i){if("string"!=typeof t)return[];"boolean"==typeof e&&(i=e,e=!1);var n,s,o;return e||(dt.createHTMLDocument?((n=(e=et.implementation.createHTMLDocument("")).createElement("base")).href=et.location.href,e.head.appendChild(n)):e=et),s=xt.exec(t),o=!i&&[],s?[e.createElement(s[1])]:(s=y([t],e,o),o&&o.length&&ft(o).remove(),ft.merge([],s.childNodes))},ft.fn.load=function(t,e,i){var n,s,o,r=this,a=t.indexOf(" ");return a>-1&&(n=X(t.slice(a)),t=t.slice(0,a)),ft.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&ft.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?ft("<div>").append(ft.parseHTML(t)).find(n):t)}).always(i&&function(t,e){r.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},ft.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ft.fn[e]=function(t){return this.on(e,t)}}),ft.expr.pseudos.animated=function(t){return ft.grep(ft.timers,function(e){return t===e.elem}).length},ft.offset={setOffset:function(t,e,i){var n,s,o,r,a,l,h=ft.css(t,"position"),c=ft(t),u={};"static"===h&&(t.style.position="relative"),a=c.offset(),o=ft.css(t,"top"),l=ft.css(t,"left"),("absolute"===h||"fixed"===h)&&(o+l).indexOf("auto")>-1?(r=(n=c.position()).top,s=n.left):(r=parseFloat(o)||0,s=parseFloat(l)||0),ft.isFunction(e)&&(e=e.call(t,i,ft.extend({},a))),null!=e.top&&(u.top=e.top-a.top+r),null!=e.left&&(u.left=e.left-a.left+s),"using"in e?e.using.call(t,u):c.css(u)}},ft.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ft.offset.setOffset(this,t,e)});var e,i,n,s,o=this[0];if(o)return o.getClientRects().length?(n=o.getBoundingClientRect(),e=o.ownerDocument,i=e.documentElement,s=e.defaultView,{top:n.top+s.pageYOffset-i.clientTop,left:n.left+s.pageXOffset-i.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===ft.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),s(t[0],"html")||(n=t.offset()),n={top:n.top+ft.css(t[0],"borderTopWidth",!0),left:n.left+ft.css(t[0],"borderLeftWidth",!0)}),{top:e.top-n.top-ft.css(i,"marginTop",!0),left:e.left-n.left-ft.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ft.css(t,"position");)t=t.offsetParent;return t||Yt})}}),ft.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;ft.fn[t]=function(n){return It(this,function(t,n,s){var o;if(ft.isWindow(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===s)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:s,i?s:o.pageYOffset):t[n]=s},t,n,arguments.length)}}),ft.each(["top","left"],function(t,e){ft.cssHooks[e]=j(dt.pixelPosition,function(t,i){if(i)return i=P(t,e),se.test(i)?ft(t).position()[e]+"px":i})}),ft.each({Height:"height",Width:"width"},function(t,e){ft.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ft.fn[n]=function(s,o){var r=arguments.length&&(i||"boolean"!=typeof s),a=i||(!0===s||!0===o?"margin":"border");return It(this,function(e,i,s){var o;return ft.isWindow(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===s?ft.css(e,i,a):ft.style(e,i,s,a)},e,r?s:void 0,r)}})}),ft.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),ft.holdReady=function(t){t?ft.readyWait++:ft.ready(!0)},ft.isArray=Array.isArray,ft.parseJSON=JSON.parse,ft.nodeName=s,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ft});var qe=t.jQuery,Ve=t.$;return ft.noConflict=function(e){return t.$===ft&&(t.$=Ve),e&&t.jQuery===ft&&(t.jQuery=qe),ft},e||(t.jQuery=t.$=ft),ft}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.ui=t.ui||{};t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{(n=t._data(s,"events"))&&n.remove&&t(s).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,o,r,a={},l=e.split(".")[0],h=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},s=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){t.isFunction(n)?a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}():a[e]=n}),o.prototype=t.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix||e:e},a,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,s,o=i.call(arguments,1),r=0,a=o.length;r<a;r++)for(n in o[r])s=o[r][n],o[r].hasOwnProperty(n)&&void 0!==s&&(t.isPlainObject(s)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],s):t.widget.extend({},s):e[n]=s);return e},t.widget.bridge=function(e,n){var s=n.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,a=i.call(arguments,1),l=this;return r?this.length||"instance"!==o?this.each(function(){var i,n=t.data(this,s);return"instance"===o?(l=n,!1):n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):l=void 0:(a.length&&(o=t.widget.extend.apply(null,[o].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new n(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(s=r[e]=t.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,s;for(i in e)s=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&s&&s.length&&(n=t(s.get()),this._removeClass(s,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var r,a;for(a=0;a<i.length;a++)r=s.classesElementLookup[i[a]]||t(),r=t(e.add?t.unique(r.get().concat(e.element.get())):r.not(e.element).get()),s.classesElementLookup[i[a]]=r,n.push(i[a]),o&&e.classes[i[a]]&&n.push(e.classes[i[a]])}var n=[],s=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(n,s){-1!==t.inArray(e.target,s)&&(i.classesElementLookup[n]=t(s.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof t||null===t,o={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,r){function a(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?o[r]:r).apply(o,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?s.on(h,c,a):i.on(h,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}});t.widget,t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var n=!1;t(document).on("mouseup",function(){n=!1});t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,n=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle"),o=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;e<i;e++)o.push("<span tabindex='0'></span>");this.handles=s.add(t(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,o,r,a,l,h=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-h.values(e));(s>i||s===i&&(e===h._lastChangedValue||h.values(e)===c.min))&&(s=i,o=t(this),r=e)}),!1!==this._start(e,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),a=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-o.width()/2,top:e.pageY-a.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,s=this.value(),o=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),s=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),o[e]=i),i!==s&&!1!==this._trigger("slide",t,this._uiHash(e,i,o))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=s-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,s,o,r=this.options.range,a=this.options,l=this,h=!this._animateOff&&a.animate,c={};this._hasMultipleValues()?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},a.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,n,s,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,o)))return}switch(s=this.options.step,i=n=this._hasMultipleValues()?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-s)}this._slide(e,o,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})}),function(t,e,i){"function"==typeof define&&define.amd?define(["jquery"],function(n){return i(n,t,e),n.mobile}):i(t.jQuery,t,e)}(this,document,function(t,e,i){t.mobile={},function(t,e){function n(e,i){var n,o,r,a=e.nodeName.toLowerCase();return"area"===a?(n=e.parentNode,o=n.name,!(!e.href||!o||"map"!==n.nodeName.toLowerCase())&&(!!(r=t("img[usemap=#"+o+"]")[0])&&s(r))):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"c0ab71056b936627e8a7821f03c044aec6280a40",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(this[0].ownerDocument||i):e},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function s(e,i,n,s){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(r,s(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(r,s(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in i.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var s,o,r=t(this[0]);r.length&&r[0]!==i;){if(("absolute"===(s=r.css("position"))||"relative"===s||"fixed"===s)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<o.length;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}}}(t),function(t,e){var n=function(e,i){var n=e.parent(),s=[],o=function(){var e=t(this),i=t.mobile.toolbar&&e.data("mobile-toolbar")?e.toolbar("option"):{position:e.attr("data-"+t.mobile.ns+"position"),updatePagePadding:!1!==e.attr("data-"+t.mobile.ns+"update-page-padding")};return!("fixed"===i.position&&!0===i.updatePagePadding)},r=n.children(":jqmData(role='header')").filter(o),a=e.children(":jqmData(role='header')"),l=n.children(":jqmData(role='footer')").filter(o),h=e.children(":jqmData(role='footer')");return 0===a.length&&r.length>0&&(s=s.concat(r.toArray())),0===h.length&&l.length>0&&(s=s.concat(l.toArray())),t.each(s,function(e,n){i-=t(n).outerHeight()}),Math.max(0,i)};t.extend(t.mobile,{window:t(e),document:t(i),keyCode:t.ui.keyCode,behaviors:{},silentScroll:function(i){"number"!==t.type(i)&&(i=t.mobile.defaultHomeScroll),t.event.special.scrollstart.enabled=!1,setTimeout(function(){e.scrollTo(0,i),t.mobile.document.trigger("silentscroll",{x:0,y:i})},20),setTimeout(function(){t.event.special.scrollstart.enabled=!0},150)},getClosestBaseUrl:function(e){var i=t(e).closest(".ui-page").jqmData("url"),n=t.mobile.path.documentBase.hrefNoHash;return t.mobile.dynamicBaseEnabled&&i&&t.mobile.path.isPath(i)||(i=n),t.mobile.path.makeUrlAbsolute(i,n)},removeActiveLinkClass:function(e){!t.mobile.activeClickedLink||t.mobile.activeClickedLink.closest("."+t.mobile.activePageClass).length&&!e||t.mobile.activeClickedLink.removeClass(t.mobile.activeBtnClass),t.mobile.activeClickedLink=null},getInheritedTheme:function(t,e){for(var i,n,s=t[0],o="",r=/ui-(bar|body|overlay)-([a-z])\b/;s&&!((i=s.className||"")&&(n=r.exec(i))&&(o=n[2]));)s=s.parentNode;return o||e||"a"},enhanceable:function(t){return this.haveParents(t,"enhance")},hijackable:function(t){return this.haveParents(t,"ajax")},haveParents:function(e,i){if(!t.mobile.ignoreContentEnabled)return e;var n,s,o,r,a=e.length,l=t();for(r=0;a>r;r++){for(s=e.eq(r),o=!1,n=e[r];n;){if("false"===(n.getAttribute?n.getAttribute("data-"+t.mobile.ns+i):"")){o=!0;break}n=n.parentNode}o||(l=l.add(s))}return l},getScreenHeight:function(){return e.innerHeight||t.mobile.window.height()},resetActivePageHeight:function(e){var i=t("."+t.mobile.activePageClass),s=i.height(),o=i.outerHeight(!0);e=n(i,"number"==typeof e?e:t.mobile.getScreenHeight()),i.css("min-height",""),i.height()<e&&i.css("min-height",e-(o-s))},loading:function(){var e=this.loading._widget||t(t.mobile.loader.prototype.defaultHtml).loader(),i=e.loader.apply(e,arguments);return this.loading._widget=e,i}}),t.addDependents=function(e,i){var n=t(e),s=n.jqmData("dependents")||t();n.jqmData("dependents",t(s).add(i))},t.fn.extend({removeWithDependents:function(){t.removeWithDependents(this)},enhanceWithin:function(){var e,i={},n=t.mobile.page.prototype.keepNativeSelector(),s=this;t.mobile.nojs&&t.mobile.nojs(this),t.mobile.links&&t.mobile.links(this),t.mobile.degradeInputsWithin&&t.mobile.degradeInputsWithin(this),t.fn.buttonMarkup&&this.find(t.fn.buttonMarkup.initSelector).not(n).jqmEnhanceable().buttonMarkup(),t.fn.fieldcontain&&this.find(":jqmData(role='fieldcontain')").not(n).jqmEnhanceable().fieldcontain(),t.each(t.mobile.widgets,function(e,o){if(o.initSelector){var r=t.mobile.enhanceable(s.find(o.initSelector));r.length>0&&(r=r.not(n)),r.length>0&&(i[o.prototype.widgetName]=r)}});for(e in i)i[e][e]();return this},addDependents:function(e){t.addDependents(this,e)},getEncodedText:function(){return t("<a>").text(this.text()).html()},jqmEnhanceable:function(){return t.mobile.enhanceable(this)},jqmHijackable:function(){return t.mobile.hijackable(this)}}),t.removeWithDependents=function(e){var i=t(e);(i.jqmData("dependents")||t()).remove(),i.remove()},t.addDependents=function(e,i){var n=t(e),s=n.jqmData("dependents")||t();n.jqmData("dependents",t(s).add(i))},t.find.matches=function(e,i){return t.find(e,null,null,i)},t.find.matchesSelector=function(e,i){return t.find(i,null,null,[e]).length>0}}(t,this),function(t){t.extend(t.mobile,{version:"1.4.5",subPageUrlKey:"ui-page",hideUrlBar:!0,keepNative:":jqmData(role='none'), :jqmData(role='nojs')",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:0,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"a",phonegapNavigationEnabled:!1,autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,buttonMarkup:{hoverDelay:200},dynamicBaseEnabled:!0,pageContainer:t(),allowCrossDomainPages:!1,dialogHashKey:"&ui-state=dialog"})}(t),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(t){}s(e)},t.widget=function(e,i,n){var s,o,r,a,l={},h=e.split(".")[0];return e=e.split(".")[1],s=h+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[h]=t[h]||{},o=t[h][e],r=t[h][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),r.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||e:e},l,{constructor:r,namespace:h,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(i){for(var s,o,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==e&&(i[s]=t.isPlainObject(o)?t.isPlainObject(i[s])?t.widget.extend({},i[s],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;t.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),h=this;return r=!a&&l.length?t.widget.extend.apply(null,[r].concat(l)):r,this.each(a?function(){var n,s=t.data(this,o);return"instance"===r?(h=s,!1):s?t.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,l),n!==s&&n!==e?(h=n&&n.jquery?h.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}:function(){var e=t.data(this,o);e?e.option(r||{})._init():t.data(this,o,new s(r,this))}),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,o,r,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(o=a[i]=t.widget.extend({},this.options[i]),r=0;r<s.length-1;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(i=s.pop(),n===e)return o[i]===e?null:o[i];o[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,r){function a(){return e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?s.delegate(c,h,a):i.bind(h,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(t),function(t,e,i){var n={},s=t.find,o=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,r=/:jqmData\(([^)]*)\)/g;t.extend(t.mobile,{ns:"",getAttribute:function(e,i){var n;(e=e.jquery?e[0]:e)&&e.getAttribute&&(n=e.getAttribute("data-"+t.mobile.ns+i));try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:o.test(n)?JSON.parse(n):n)}catch(t){}return n},nsNormalizeDict:n,nsNormalize:function(e){return n[e]||(n[e]=t.camelCase(t.mobile.ns+e))},closestPageData:function(t){return t.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page")}}),t.fn.jqmData=function(e,i){var n;return void 0!==e&&(e&&(e=t.mobile.nsNormalize(e)),n=arguments.length<2||void 0===i?this.data(e):this.data(e,i)),n},t.jqmData=function(e,i,n){var s;return void 0!==i&&(s=t.data(e,i?t.mobile.nsNormalize(i):i,n)),s},t.fn.jqmRemoveData=function(e){return this.removeData(t.mobile.nsNormalize(e))},t.jqmRemoveData=function(e,i){return t.removeData(e,t.mobile.nsNormalize(i))},t.find=function(e,i,n,o){return e.indexOf(":jqmData")>-1&&(e=e.replace(r,"[data-"+(t.mobile.ns||"")+"$1]")),s.call(this,e,i,n,o)},t.extend(t.find,s)}(t),function(t){var e=/[A-Z]/g,i=function(t){return"-"+t.toLowerCase()};t.extend(t.Widget.prototype,{_getCreateOptions:function(){var n,s,o=this.element[0],r={};if(!t.mobile.getAttribute(o,"defaults"))for(n in this.options)null!=(s=t.mobile.getAttribute(o,n.replace(e,i)))&&(r[n]=s);return r}}),t.mobile.widget=t.Widget}(t),function(t){var e="ui-loader",i=t("html");t.widget("mobile.loader",{options:{theme:"a",textVisible:!1,html:"",text:"loading"},defaultHtml:"<div class='"+e+"'><span class='ui-icon-loading'></span><h1></h1></div>",fakeFixLoader:function(){var e=t("."+t.mobile.activeBtnClass).first();this.element.css({top:t.support.scrollTop&&this.window.scrollTop()+this.window.height()/2||e.length&&e.offset().top||100})},checkLoaderPosition:function(){var e=this.element.offset(),i=this.window.scrollTop(),n=t.mobile.getScreenHeight();(e.top<i||e.top-i>n)&&(this.element.addClass("ui-loader-fakefix"),this.fakeFixLoader(),this.window.unbind("scroll",this.checkLoaderPosition).bind("scroll",t.proxy(this.fakeFixLoader,this)))},resetHtml:function(){this.element.html(t(this.defaultHtml).html())},show:function(n,s,o){var r,a,l;this.resetHtml(),"object"===t.type(n)?(l=t.extend({},this.options,n),n=l.theme):(l=this.options,n=n||l.theme),a=s||(!1===l.text?"":l.text),i.addClass("ui-loading"),r=l.textVisible,this.element.attr("class",e+" ui-corner-all ui-body-"+n+" ui-loader-"+(r||s||n.text?"verbose":"default")+(l.textonly||o?" ui-loader-textonly":"")),l.html?this.element.html(l.html):this.element.find("h1").text(a),this.element.appendTo(t(t.mobile.pagecontainer?":mobile-pagecontainer":"body")),this.checkLoaderPosition(),this.window.bind("scroll",t.proxy(this.checkLoaderPosition,this))},hide:function(){i.removeClass("ui-loading"),this.options.text&&this.element.removeClass("ui-loader-fakefix"),this.window.unbind("scroll",this.fakeFixLoader),this.window.unbind("scroll",this.checkLoaderPosition)}})}(t),function(t,e,n){"$:nomunge";function s(t){return"#"+(t=t||location.href).replace(/^[^#]*#?(.*)$/,"$1")}var o,r="hashchange",a=i,l=t.event.special,h=a.documentMode,c="on"+r in e&&(h===n||h>7);t.fn[r]=function(t){return t?this.bind(r,t):this.trigger(r)},t.fn[r].delay=50,l[r]=t.extend(l[r],{setup:function(){return!c&&void t(o.start)},teardown:function(){return!c&&void t(o.stop)}}),o=function(){function i(){var n=s(),a=f(h);n!==h?(d(h=n,a),t(e).trigger(r)):a!==h&&(location.href=location.href.replace(/#.*/,"")+a),o=setTimeout(i,t.fn[r].delay)}var o,l={},h=s(),u=function(t){return t},d=u,f=u;return l.start=function(){o||i()},l.stop=function(){o&&clearTimeout(o),o=n},e.attachEvent&&!e.addEventListener&&!c&&function(){var e,n;l.start=function(){e||(n=t.fn[r].src,n=n&&n+s(),e=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||d(s()),i()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow,a.onpropertychange=function(){try{"title"===event.propertyName&&(e.document.title=a.title)}catch(t){}})},l.stop=u,f=function(){return s(e.location.href)},d=function(i,n){var s=e.document,o=t.fn[r].domain;i!==n&&(s.title=a.title,s.open(),o&&s.write('<script>document.domain="'+o+'"<\/script>'),s.close(),e.location.hash=i)}}(),l}()}(t,this),function(t){e.matchMedia=e.matchMedia||function(t){var e,i=t.documentElement,n=i.firstElementChild||i.firstChild,s=t.createElement("body"),o=t.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(o),function(t){return o.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(s,n),e=42===o.offsetWidth,i.removeChild(s),{matches:e,media:t}}}(i),t.mobile.media=function(t){return e.matchMedia(t).matches}}(t),function(t){var e={touch:"ontouchend"in i};t.mobile.support=t.mobile.support||{},t.extend(t.support,e),t.extend(t.mobile.support,e)}(t),function(t){t.extend(t.support,{orientation:"orientation"in e&&"onorientationchange"in e})}(t),function(t,n){function s(t){var e,i=t.charAt(0).toUpperCase()+t.substr(1),s=(t+" "+l.join(i+" ")+i).split(" ");for(e in s)if(a[s[e]]!==n)return!0}var o,r=t("<body>").prependTo("html"),a=r[0].style,l=["Webkit","Moz","O"],h="palmGetResource"in e,c=e.operamini&&"[object OperaMini]"==={}.toString.call(e.operamini),u=e.blackberry&&!s("-webkit-transform");t.extend(t.mobile,{browser:{}}),t.mobile.browser.oldIE=function(){var t=3,e=i.createElement("div"),n=e.all||[];do{e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><br><![endif]--\x3e"}while(n[0]);return t>4?t:!t}(),t.extend(t.support,{pushState:"pushState"in history&&"replaceState"in history&&!(e.navigator.userAgent.indexOf("Firefox")>=0&&e.top!==e)&&-1===e.navigator.userAgent.search(/CriOS/),mediaquery:t.mobile.media("only all"),cssPseudoElement:!!s("content"),touchOverflow:!!s("overflowScrolling"),cssTransform3d:function(){var s,o,a,h="transform-3d",c=t.mobile.media("(-"+l.join("-"+h+"),(-")+"-"+h+"),("+h+")");if(c)return!!c;s=i.createElement("div"),o={MozTransform:"-moz-transform",transform:"transform"},r.append(s);for(a in o)s.style[a]!==n&&(s.style[a]="translate3d( 100px, 1px, 1px )",c=e.getComputedStyle(s).getPropertyValue(o[a]));return!!c&&"none"!==c}(),boxShadow:!!s("boxShadow")&&!u,fixedPosition:function(){var t=e,i=navigator.userAgent,n=navigator.platform,s=i.match(/AppleWebKit\/([0-9]+)/),o=!!s&&s[1],r=i.match(/Fennec\/([0-9]+)/),a=!!r&&r[1],l=i.match(/Opera Mobi\/([0-9]+)/),h=!!l&&l[1];return!((n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1||n.indexOf("iPod")>-1)&&o&&534>o||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||l&&7458>h||i.indexOf("Android")>-1&&o&&533>o||a&&6>a||"palmGetResource"in e&&o&&534>o||i.indexOf("MeeGo")>-1&&i.indexOf("NokiaBrowser/8.5.0")>-1)}(),scrollTop:("pageXOffset"in e||"scrollTop"in i.documentElement||"scrollTop"in r[0])&&!h&&!c,dynamicBaseTag:function(){var e,i,n=location.protocol+"//"+location.host+location.pathname+"ui-dir/",s=t("head base"),o=null,a="";return s.length?a=s.attr("href"):s=o=t("<base>",{href:n}).appendTo("head"),e=t("<a href='testurl' />").prependTo(r),i=e[0].href,s[0].href=a||location.pathname,o&&o.remove(),0===i.indexOf(n)}(),cssPointerEvents:function(){var t,n=i.createElement("x"),s=i.documentElement,o=e.getComputedStyle;return"pointerEvents"in n.style&&(n.style.pointerEvents="auto",n.style.pointerEvents="x",s.appendChild(n),t=o&&"auto"===o(n,"").pointerEvents,s.removeChild(n),!!t)}(),boundingRect:void 0!==i.createElement("div").getBoundingClientRect,inlineSVG:function(){var i=e,n=!(!i.document.createElementNS||!i.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||i.opera&&-1===navigator.userAgent.indexOf("Chrome")),s=function(e){e&&n||t("html").addClass("ui-nosvg")},o=new i.Image;o.onerror=function(){s(!1)},o.onload=function(){s(1===o.width&&1===o.height)},o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}),r.remove(),o=function(){var t=e.navigator.userAgent;return t.indexOf("Nokia")>-1&&(t.indexOf("Symbian/3")>-1||t.indexOf("Series60/5")>-1)&&t.indexOf("AppleWebKit")>-1&&t.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}(),t.mobile.gradeA=function(){return(t.support.mediaquery&&t.support.cssPseudoElement||t.mobile.browser.oldIE&&t.mobile.browser.oldIE>=8)&&(t.support.boundingRect||null!==t.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/))},t.mobile.ajaxBlacklist=e.blackberry&&!e.WebKitPoint||c||o,o&&t(function(){t("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")}),t.support.boxShadow||t("html").addClass("ui-noboxshadow")}(t),function(t,e){var i,n=t.mobile.window,s=function(){};t.event.special.beforenavigate={setup:function(){n.on("navigate",s)},teardown:function(){n.off("navigate",s)}},t.event.special.navigate=i={bound:!1,pushStateEnabled:!0,originalEventName:void 0,isPushStateEnabled:function(){return t.support.pushState&&!0===t.mobile.pushStateEnabled&&this.isHashChangeEnabled()},isHashChangeEnabled:function(){return!0===t.mobile.hashListeningEnabled},popstate:function(e){var i=new t.Event("navigate"),s=new t.Event("beforenavigate"),o=e.originalEvent.state||{};s.originalEvent=e,n.trigger(s),s.isDefaultPrevented()||(e.historyState&&t.extend(o,e.historyState),i.originalEvent=e,setTimeout(function(){n.trigger(i,{state:o})},0))},hashchange:function(e){var i=new t.Event("navigate"),s=new t.Event("beforenavigate");s.originalEvent=e,n.trigger(s),s.isDefaultPrevented()||(i.originalEvent=e,n.trigger(i,{state:e.hashchangeState||{}}))},setup:function(){i.bound||(i.bound=!0,i.isPushStateEnabled()?(i.originalEventName="popstate",n.bind("popstate.navigate",i.popstate)):i.isHashChangeEnabled()&&(i.originalEventName="hashchange",n.bind("hashchange.navigate",i.hashchange)))}}}(t),function(t,i){var n,s,o="&ui-state=dialog";t.mobile.path=n={uiStateKey:"&ui-state",urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(t){var e=this.parseUrl(t||location.href),i=t?e:location,n=e.hash;return n="#"===n?"":n,i.protocol+e.doubleSlash+i.host+(""!==i.protocol&&"/"!==i.pathname.substring(0,1)?"/":"")+i.pathname+i.search+n},getDocumentUrl:function(e){return e?t.extend({},n.documentUrl):n.documentUrl.href},parseLocation:function(){return this.parseUrl(this.getLocation())},parseUrl:function(e){if("object"===t.type(e))return e;var i=n.urlParseRE.exec(e||"")||[];return{href:i[0]||"",hrefNoHash:i[1]||"",hrefNoSearch:i[2]||"",domain:i[3]||"",protocol:i[4]||"",doubleSlash:i[5]||"",authority:i[6]||"",username:i[8]||"",password:i[9]||"",host:i[10]||"",hostname:i[11]||"",port:i[12]||"",pathname:i[13]||"",directory:i[14]||"",filename:i[15]||"",search:i[16]||"",hash:i[17]||""}},makePathAbsolute:function(t,e){var i,n,s,o;if(t&&"/"===t.charAt(0))return t;for(t=t||"",i=(e=e?e.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"")?e.split("/"):[],n=t.split("/"),s=0;s<n.length;s++)switch(o=n[s]){case".":break;case"..":i.length&&i.pop();break;default:i.push(o)}return"/"+i.join("/")},isSameDomain:function(t,e){return n.parseUrl(t).domain.toLowerCase()===n.parseUrl(e).domain.toLowerCase()},isRelativeUrl:function(t){return""===n.parseUrl(t).protocol},isAbsoluteUrl:function(t){return""!==n.parseUrl(t).protocol},makeUrlAbsolute:function(t,e){if(!n.isRelativeUrl(t))return t;e===i&&(e=this.documentBase);var s=n.parseUrl(t),o=n.parseUrl(e),r=s.protocol||o.protocol,a=s.protocol?s.doubleSlash:s.doubleSlash||o.doubleSlash,l=s.authority||o.authority,h=""!==s.pathname;return r+a+l+n.makePathAbsolute(s.pathname||o.filename,o.pathname)+(s.search||!h&&o.search||"")+s.hash},addSearchParams:function(e,i){var s=n.parseUrl(e),o="object"==typeof i?t.param(i):i,r=s.search||"?";return s.hrefNoSearch+r+("?"!==r.charAt(r.length-1)?"&":"")+o+(s.hash||"")},convertUrlToDataUrl:function(t){var i=t,s=n.parseUrl(t);return n.isEmbeddedPage(s)?i=s.hash.split(o)[0].replace(/^#/,"").replace(/\?.*$/,""):n.isSameDomain(s,this.documentBase)&&(i=s.hrefNoHash.replace(this.documentBase.domain,"").split(o)[0]),e.decodeURIComponent(i)},get:function(t){return t===i&&(t=n.parseLocation().hash),n.stripHash(t).replace(/[^\/]*\.[^\/*]+$/,"")},set:function(t){location.hash=t},isPath:function(t){return/\//.test(t)},clean:function(t){return t.replace(this.documentBase.domain,"")},stripHash:function(t){return t.replace(/^#/,"")},stripQueryParams:function(t){return t.replace(/\?.*$/,"")},cleanHash:function(t){return n.stripHash(t.replace(/\?.*$/,"").replace(o,""))},isHashValid:function(t){return/^#[^#]+$/.test(t)},isExternal:function(t){var e=n.parseUrl(t);return!(!e.protocol||e.domain.toLowerCase()===this.documentUrl.domain.toLowerCase())},hasProtocol:function(t){return/^(:?\w+:)/.test(t)},isEmbeddedPage:function(t){var e=n.parseUrl(t);return""!==e.protocol?!this.isPath(e.hash)&&e.hash&&(e.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&e.hrefNoHash===this.documentBase.hrefNoHash):/^#/.test(e.href)},squash:function(t,e){var i,s,o,r,a,l=this.isPath(t),h=this.parseUrl(t),c=h.hash,u="";return e||(l?e=n.getLocation():(a=n.getDocumentUrl(!0),e=n.isPath(a.hash)?n.squash(a.href):a.href)),s=l?n.stripHash(t):t,s=n.isPath(h.hash)?n.stripHash(h.hash):s,(r=s.indexOf(this.uiStateKey))>-1&&(u=s.slice(r),s=s.slice(0,r)),i=n.makeUrlAbsolute(s,e),o=this.parseUrl(i).search,l?((n.isPath(c)||0===c.replace("#","").indexOf(this.uiStateKey))&&(c=""),u&&-1===c.indexOf(this.uiStateKey)&&(c+=u),-1===c.indexOf("#")&&""!==c&&(c="#"+c),i=n.parseUrl(i),i=i.protocol+i.doubleSlash+i.host+i.pathname+o+c):i+=i.indexOf("#")>-1?u:"#"+u,i},isPreservableHash:function(t){return 0===t.replace("#","").indexOf(this.uiStateKey)},hashToSelector:function(t){var e="#"===t.substring(0,1);return e&&(t=t.substring(1)),(e?"#":"")+t.replace(/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,"\\$1")},getFilePath:function(t){return t&&t.split(o)[0]},isFirstPageUrl:function(e){var s=n.parseUrl(n.makeUrlAbsolute(e,this.documentBase)),o=s.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&s.hrefNoHash===this.documentBase.hrefNoHash,r=t.mobile.firstPage,a=r&&r[0]?r[0].id:i;return o&&(!s.hash||"#"===s.hash||a&&s.hash.replace(/^#/,"")===a)},isPermittedCrossDomainRequest:function(e,i){return t.mobile.allowCrossDomainPages&&("file:"===e.protocol||"content:"===e.protocol)&&-1!==i.search(/^https?:/)}},n.documentUrl=n.parseLocation(),s=t("head").find("base"),n.documentBase=s.length?n.parseUrl(n.makeUrlAbsolute(s.attr("href"),n.documentUrl.href)):n.documentUrl,n.documentBaseDiffers=n.documentUrl.hrefNoHash!==n.documentBase.hrefNoHash,n.getDocumentBase=function(e){return e?t.extend({},n.documentBase):n.documentBase.href},t.extend(t.mobile,{getDocumentUrl:n.getDocumentUrl,getDocumentBase:n.getDocumentBase})}(t),function(t,e){t.mobile.History=function(t,e){this.stack=t||[],this.activeIndex=e||0},t.extend(t.mobile.History.prototype,{getActive:function(){return this.stack[this.activeIndex]},getLast:function(){return this.stack[this.previousIndex]},getNext:function(){return this.stack[this.activeIndex+1]},getPrev:function(){return this.stack[this.activeIndex-1]},add:function(t,e){e=e||{},this.getNext()&&this.clearForward(),e.hash&&-1===e.hash.indexOf("#")&&(e.hash="#"+e.hash),e.url=t,this.stack.push(e),this.activeIndex=this.stack.length-1},clearForward:function(){this.stack=this.stack.slice(0,this.activeIndex+1)},find:function(t,e,i){var n,s,o,r=(e=e||this.stack).length;for(s=0;r>s;s++)if(n=e[s],(decodeURIComponent(t)===decodeURIComponent(n.url)||decodeURIComponent(t)===decodeURIComponent(n.hash))&&(o=s,i))return o;return o},closest:function(t){var i,n=this.activeIndex;return(i=this.find(t,this.stack.slice(0,n)))===e&&(i=this.find(t,this.stack.slice(n),!0),i=i===e?i:i+n),i},direct:function(i){var n=this.closest(i.url),s=this.activeIndex;n!==e&&(this.activeIndex=n,this.previousIndex=s),s>n?(i.present||i.back||t.noop)(this.getActive(),"back"):n>s?(i.present||i.forward||t.noop)(this.getActive(),"forward"):n===e&&i.missing&&i.missing(this.getActive())}})}(t),function(t){var n=t.mobile.path,s=location.href;t.mobile.Navigator=function(e){this.history=e,this.ignoreInitialHashChange=!0,t.mobile.window.bind({"popstate.history":t.proxy(this.popstate,this),"hashchange.history":t.proxy(this.hashchange,this)})},t.extend(t.mobile.Navigator.prototype,{squash:function(s,o){var r,a,l=n.isPath(s)?n.stripHash(s):s;return a=n.squash(s),r=t.extend({hash:l,url:a},o),e.history.replaceState(r,r.title||i.title,a),r},hash:function(t,e){var i,s,o,r;return i=n.parseUrl(t),s=n.parseLocation(),s.pathname+s.search===i.pathname+i.search?o=i.hash?i.hash:i.pathname+i.search:n.isPath(t)?(r=n.parseUrl(e),o=r.pathname+r.search+(n.isPreservableHash(r.hash)?r.hash.replace("#",""):"")):o=t,o},go:function(s,o,r){var a,l,h,c,u=t.event.special.navigate.isPushStateEnabled();l=n.squash(s),h=this.hash(s,l),r&&h!==n.stripHash(n.parseLocation().hash)&&(this.preventNextHashChange=r),this.preventHashAssignPopState=!0,e.location.hash=h,this.preventHashAssignPopState=!1,a=t.extend({url:l,hash:h,title:i.title},o),u&&(c=new t.Event("popstate"),c.originalEvent={type:"popstate",state:null},this.squash(s,a),r||(this.ignorePopState=!0,t.mobile.window.trigger(c))),this.history.add(a.url,a)},popstate:function(e){var i,o;if(t.event.special.navigate.isPushStateEnabled())return this.preventHashAssignPopState?(this.preventHashAssignPopState=!1,void e.stopImmediatePropagation()):this.ignorePopState?void(this.ignorePopState=!1):!e.originalEvent.state&&1===this.history.stack.length&&this.ignoreInitialHashChange&&(this.ignoreInitialHashChange=!1,location.href===s)?void e.preventDefault():(i=n.parseLocation().hash,!e.originalEvent.state&&i?(o=this.squash(i),this.history.add(o.url,o),void(e.historyState=o)):void this.history.direct({url:(e.originalEvent.state||{}).url||i,present:function(i,n){e.historyState=t.extend({},i),e.historyState.direction=n}}))},hashchange:function(e){var s,o;if(t.event.special.navigate.isHashChangeEnabled()&&!t.event.special.navigate.isPushStateEnabled()){if(this.preventNextHashChange)return this.preventNextHashChange=!1,void e.stopImmediatePropagation();s=this.history,o=n.parseLocation().hash,this.history.direct({url:o,present:function(i,n){e.hashchangeState=t.extend({},i),e.hashchangeState.direction=n},missing:function(){s.add(o,{hash:o,title:i.title})}})}}})}(t),function(t){t.mobile.navigate=function(e,i,n){t.mobile.navigate.navigator.go(e,i,n)},t.mobile.navigate.history=new t.mobile.History,t.mobile.navigate.navigator=new t.mobile.Navigator(t.mobile.navigate.history);var e=t.mobile.path.parseLocation();t.mobile.navigate.history.add(e.href,{hash:e.hash})}(t),function(t,e){var n={animation:{},transition:{}},s=i.createElement("a"),o=["","webkit-","moz-","o-"];t.each(["animation","transition"],function(i,r){var a=0===i?r+"-name":r;t.each(o,function(i,o){return s.style[t.camelCase(o+a)]!==e?(n[r].prefix=o,!1):void 0}),n[r].duration=t.camelCase(n[r].prefix+r+"-duration"),n[r].event=t.camelCase(n[r].prefix+r+"-end"),""===n[r].prefix&&(n[r].event=n[r].event.toLowerCase())}),t.support.cssTransitions=n.transition.prefix!==e,t.support.cssAnimations=n.animation.prefix!==e,t(s).remove(),t.fn.animationComplete=function(s,o,r){var a,l,h=this,c=function(){clearTimeout(a),s.apply(this,arguments)},u=o&&"animation"!==o?"transition":"animation";return t.support.cssTransitions&&"transition"===u||t.support.cssAnimations&&"animation"===u?(r===e&&(t(this).context!==i&&(l=3e3*parseFloat(t(this).css(n[u].duration))),(0===l||l===e||isNaN(l))&&(l=t.fn.animationComplete.defaultDuration)),a=setTimeout(function(){t(h).off(n[u].event,c),s.apply(h)},l),t(this).one(n[u].event,c)):(setTimeout(t.proxy(s,this),0),t(this))},t.fn.animationComplete.defaultDuration=1e3}(t),function(t,e,i,n){function s(t){for(;t&&void 0!==t.originalEvent;)t=t.originalEvent;return t}function o(e,i){var o,r,a,l,h,c,u,d,f,p=e.type;if(e=t.Event(e),e.type=i,o=e.originalEvent,r=t.event.props,p.search(/^(mouse|click)/)>-1&&(r=D),o)for(u=r.length,l;u;)l=r[--u],e[l]=o[l];if(p.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==p.search(/^touch/)&&(a=s(o),p=a.touches,h=a.changedTouches,c=p&&p.length?p[0]:h&&h.length?h[0]:n))for(d=0,f=E.length;f>d;d++)l=E[d],e[l]=c[l];return e}function r(e){for(var i,n,s={};e;){i=t.data(e,T);for(n in i)i[n]&&(s[n]=s.hasVirtualBinding=!0);e=e.parentNode}return s}function a(e,i){for(var n;e;){if((n=t.data(e,T))&&(!i||n[i]))return e;e=e.parentNode}return null}function l(){B=!1}function h(){B=!0}function c(){W=0,M.length=0,N=!1,h()}function u(){l()}function d(){f(),I=setTimeout(function(){I=0,c()},t.vmouse.resetTimerDuration)}function f(){I&&(clearTimeout(I),I=0)}function p(e,i,n){var s;return(n&&n[e]||!n&&a(i.target,e))&&(s=o(i,e),t(i.target).trigger(s)),s}function g(e){var i,n=t.data(e.target,S);N||W&&W===n||(i=p("v"+e.type,e))&&(i.isDefaultPrevented()&&e.preventDefault(),i.isPropagationStopped()&&e.stopPropagation(),i.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}function m(e){var i,n,o,a=s(e).touches;a&&1===a.length&&(i=e.target,(n=r(i)).hasVirtualBinding&&(W=H++,t.data(i,S,W),f(),u(),L=!1,o=s(e).touches[0],P=o.pageX,j=o.pageY,p("vmouseover",e,n),p("vmousedown",e,n)))}function v(t){B||(L||p("vmousecancel",t,r(t.target)),L=!0,d())}function b(e){if(!B){var i=s(e).touches[0],n=L,o=t.vmouse.moveDistanceThreshold,a=r(e.target);(L=L||Math.abs(i.pageX-P)>o||Math.abs(i.pageY-j)>o)&&!n&&p("vmousecancel",e,a),p("vmousemove",e,a),d()}}function _(t){if(!B){h();var e,i,n=r(t.target);p("vmouseup",t,n),L||(e=p("vclick",t,n))&&e.isDefaultPrevented()&&(i=s(t).changedTouches[0],M.push({touchID:W,x:i.clientX,y:i.clientY}),N=!0),p("vmouseout",t,n),L=!1,d()}}function y(e){var i,n=t.data(e,T);if(n)for(i in n)if(n[i])return!0;return!1}function C(){}var x,w,T="virtualMouseBindings",S="virtualTouchID",O="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),E="clientX clientY pageX pageY screenX screenY".split(" "),k=t.event.mouseHooks?t.event.mouseHooks.props:[],D=t.event.props.concat(k),A={},I=0,P=0,j=0,L=!1,M=[],N=!1,B=!1,F="addEventListener"in i,R=t(i),H=1,W=0;for(t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},w=0;w<O.length;w++)t.event.special[O[w]]=function(e){var i=e.substr(1);return{setup:function(){y(this)||t.data(this,T,{}),t.data(this,T)[e]=!0,A[e]=(A[e]||0)+1,1===A[e]&&R.bind(i,g),t(this).bind(i,C),F&&(A.touchstart=(A.touchstart||0)+1,1===A.touchstart&&R.bind("touchstart",m).bind("touchend",_).bind("touchmove",b).bind("scroll",v))},teardown:function(){--A[e]||R.unbind(i,g),F&&(--A.touchstart||R.unbind("touchstart",m).unbind("touchmove",b).unbind("touchend",_).unbind("scroll",v));var n=t(this),s=t.data(this,T);s&&(s[e]=!1),n.unbind(i,C),y(this)||n.removeData(T)}}}(O[w]);F&&i.addEventListener("click",function(e){var i,n,s,o,r,a=M.length,l=e.target;if(a)for(i=e.clientX,n=e.clientY,x=t.vmouse.clickDistanceThreshold,s=l;s;){for(o=0;a>o;o++)if(r=M[o],0,s===l&&Math.abs(r.x-i)<x&&Math.abs(r.y-n)<x||t.data(s,S)===r.touchID)return e.preventDefault(),void e.stopPropagation();s=s.parentNode}},!0)}(t,0,i),function(t,e,n){function s(e,i,s,o){var r=s.type;s.type=i,o?t.event.trigger(s,n,e):t.event.dispatch.call(e,s),s.type=r}var o=t(i),r=t.mobile.support.touch,a="touchmove scroll",l=r?"touchstart":"mousedown",h=r?"touchend":"mouseup",c=r?"touchmove":"mousemove";t.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,i){t.fn[i]=function(t){return t?this.bind(i,t):this.trigger(i)},t.attrFn&&(t.attrFn[i]=!0)}),t.event.special.scrollstart={enabled:!0,setup:function(){function e(t,e){s(o,(i=e)?"scrollstart":"scrollstop",t)}var i,n,o=this;t(o).bind(a,function(s){t.event.special.scrollstart.enabled&&(i||e(s,!0),clearTimeout(n),n=setTimeout(function(){e(s,!1)},50))})},teardown:function(){t(this).unbind(a)}},t.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var e=this,i=t(e),n=!1;i.bind("vmousedown",function(r){function a(){clearTimeout(c)}function l(){a(),i.unbind("vclick",h).unbind("vmouseup",a),o.unbind("vmousecancel",l)}function h(t){l(),n||u!==t.target?n&&t.preventDefault():s(e,"tap",t)}if(n=!1,r.which&&1!==r.which)return!1;var c,u=r.target;i.bind("vmouseup",a).bind("vclick",h),o.bind("vmousecancel",l),c=setTimeout(function(){t.event.special.tap.emitTapOnTaphold||(n=!0),s(e,"taphold",t.Event("taphold",{target:u}))},t.event.special.tap.tapholdThreshold)})},teardown:function(){t(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),o.unbind("vmousecancel")}},t.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(t){var i=e.pageXOffset,n=e.pageYOffset,s=t.clientX,o=t.clientY;return 0===t.pageY&&Math.floor(o)>Math.floor(t.pageY)||0===t.pageX&&Math.floor(s)>Math.floor(t.pageX)?(s-=i,o-=n):(o<t.pageY-n||s<t.pageX-i)&&(s=t.pageX-i,o=t.pageY-n),{x:s,y:o}},start:function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=t.event.special.swipe.getLocation(i);return{time:(new Date).getTime(),coords:[n.x,n.y],origin:t(e.target)}},stop:function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=t.event.special.swipe.getLocation(i);return{time:(new Date).getTime(),coords:[n.x,n.y]}},handleSwipe:function(e,i,n,o){if(i.time-e.time<t.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-i.coords[0])>t.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-i.coords[1])<t.event.special.swipe.verticalDistanceThreshold){var r=e.coords[0]>i.coords[0]?"swipeleft":"swiperight";return s(n,"swipe",t.Event("swipe",{target:o,swipestart:e,swipestop:i}),!0),s(n,r,t.Event(r,{target:o,swipestart:e,swipestop:i}),!0),!0}return!1},eventInProgress:!1,setup:function(){var e,i=this,n=t(i),s={};(e=t.data(this,"mobile-events"))||(e={length:0},t.data(this,"mobile-events",e)),e.length++,e.swipe=s,s.start=function(e){if(!t.event.special.swipe.eventInProgress){t.event.special.swipe.eventInProgress=!0;var n,r=t.event.special.swipe.start(e),a=e.target,l=!1;s.move=function(e){r&&!e.isDefaultPrevented()&&(n=t.event.special.swipe.stop(e),l||(l=t.event.special.swipe.handleSwipe(r,n,i,a))&&(t.event.special.swipe.eventInProgress=!1),Math.abs(r.coords[0]-n.coords[0])>t.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},s.stop=function(){l=!0,t.event.special.swipe.eventInProgress=!1,o.off(c,s.move),s.move=null},o.on(c,s.move).one(h,s.stop)}},n.on(l,s.start)},teardown:function(){var e,i;(e=t.data(this,"mobile-events"))&&(i=e.swipe,delete e.swipe,0===--e.length&&t.removeData(this,"mobile-events")),i&&(i.start&&t(this).off(l,i.start),i.move&&o.off(c,i.move),i.stop&&o.off(h,i.stop))}},t.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,i){t.event.special[e]={setup:function(){t(this).bind(i,t.noop)},teardown:function(){t(this).unbind(i)}}})}(t,this),function(t){t.event.special.throttledresize={setup:function(){t(this).bind("resize",s)},teardown:function(){t(this).unbind("resize",s)}};var e,i,n,s=function(){i=(new Date).getTime(),(n=i-o)>=250?(o=i,t(this).trigger("throttledresize")):(e&&clearTimeout(e),e=setTimeout(s,250-n))},o=0}(t),function(t,e){function n(){var t=s();t!==o&&(o=t,u.trigger(d))}var s,o,r,a,l,h,c,u=t(e),d="orientationchange",f={0:!0,180:!0};t.support.orientation&&(l=e.innerWidth||u.width(),h=e.innerHeight||u.height(),c=50,r=l>h&&l-h>c,a=f[e.orientation],(r&&a||!r&&!a)&&(f={"-90":!0,90:!0})),t.event.special.orientationchange=t.extend({},t.event.special.orientationchange,{setup:function(){return!(t.support.orientation&&!t.event.special.orientationchange.disabled)&&(o=s(),void u.bind("throttledresize",n))},teardown:function(){return!(t.support.orientation&&!t.event.special.orientationchange.disabled)&&void u.unbind("throttledresize",n)},add:function(t){var e=t.handler;t.handler=function(t){return t.orientation=s(),e.apply(this,arguments)}}}),t.event.special.orientationchange.orientation=s=function(){var n=!0,s=i.documentElement;return n=t.support.orientation?f[e.orientation]:s&&s.clientWidth/s.clientHeight<1.1,n?"portrait":"landscape"},t.fn[d]=function(t){return t?this.bind(d,t):this.trigger(d)},t.attrFn&&(t.attrFn[d]=!0)}(t,this),function(t){var e=t("head").children("base"),i={element:e.length?e:t("<base>",{href:t.mobile.path.documentBase.hrefNoHash}).prependTo(t("head")),linkSelector:"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",set:function(e){t.mobile.dynamicBaseEnabled&&t.support.dynamicBaseTag&&i.element.attr("href",t.mobile.path.makeUrlAbsolute(e,t.mobile.path.documentBase))},rewrite:function(e,n){var s=t.mobile.path.get(e);n.find(i.linkSelector).each(function(e,i){var n=t(i).is("[href]")?"href":t(i).is("[src]")?"src":"action",o=t.mobile.path.parseLocation(),r=t(i).attr(n);r=r.replace(o.protocol+o.doubleSlash+o.host+o.pathname,""),/^(\w+:|#|\/)/.test(r)||t(i).attr(n,s+r)})},reset:function(){i.element.attr("href",t.mobile.path.documentBase.hrefNoSearch)}};t.mobile.base=i}(t),function(t,e){t.mobile.widgets={};var i=t.widget,n=t.mobile.keepNative;t.widget=function(i){return function(){var n=i.apply(this,arguments),s=n.prototype.widgetName;return n.initSelector=n.prototype.initSelector!==e?n.prototype.initSelector:":jqmData(role='"+s+"')",t.mobile.widgets[s]=n,n}}(t.widget),t.extend(t.widget,i),t.mobile.document.on("create",function(e){t(e.target).enhanceWithin()}),t.widget("mobile.page",{options:{theme:"a",domCache:!1,keepNativeDefault:t.mobile.keepNative,contentTheme:null,enhanced:!1},_createWidget:function(){t.Widget.prototype._createWidget.apply(this,arguments),this._trigger("init")},_create:function(){return!1!==this._trigger("beforecreate")&&(this.options.enhanced||this._enhance(),this._on(this.element,{pagebeforehide:"removeContainerBackground",pagebeforeshow:"_handlePageBeforeShow"}),this.element.enhanceWithin(),void("dialog"===t.mobile.getAttribute(this.element[0],"role")&&t.mobile.dialog&&this.element.dialog()))},_enhance:function(){var i="data-"+t.mobile.ns,n=this;this.options.role&&this.element.attr("data-"+t.mobile.ns+"role",this.options.role),this.element.attr("tabindex","0").addClass("ui-page ui-page-theme-"+this.options.theme),this.element.find("["+i+"role='content']").each(function(){var s=t(this),o=this.getAttribute(i+"theme")||e;n.options.contentTheme=o||n.options.contentTheme||n.options.dialog&&n.options.theme||"dialog"===n.element.jqmData("role")&&n.options.theme,s.addClass("ui-content"),n.options.contentTheme&&s.addClass("ui-body-"+n.options.contentTheme),s.attr("role","main").addClass("ui-content")})},bindRemove:function(e){var i=this.element;!i.data("mobile-page").options.domCache&&i.is(":jqmData(external-page='true')")&&i.bind("pagehide.remove",e||function(e,i){if(!i.samePage){var n=t(this),s=new t.Event("pageremove");n.trigger(s),s.isDefaultPrevented()||n.removeWithDependents()}})},_setOptions:function(i){i.theme!==e&&this.element.removeClass("ui-page-theme-"+this.options.theme).addClass("ui-page-theme-"+i.theme),i.contentTheme!==e&&this.element.find("[data-"+t.mobile.ns+"='content']").removeClass("ui-body-"+this.options.contentTheme).addClass("ui-body-"+i.contentTheme)},_handlePageBeforeShow:function(){this.setContainerBackground()},removeContainerBackground:function(){this.element.closest(":mobile-pagecontainer").pagecontainer({theme:"none"})},setContainerBackground:function(t){this.element.parent().pagecontainer({theme:t||this.options.theme})},keepNativeSelector:function(){var e=this.options,i=t.trim(e.keepNative||""),s=t.trim(t.mobile.keepNative),o=t.trim(e.keepNativeDefault),r=n===s?"":s,a=""===r?o:"";return(i?[i]:[]).concat(r?[r]:[]).concat(a?[a]:[]).join(", ")}})}(t),function(t,n){t.widget("mobile.pagecontainer",{options:{theme:"a"},initSelector:!1,_create:function(){this._trigger("beforecreate"),this.setLastScrollEnabled=!0,this._on(this.window,{navigate:"_disableRecordScroll",scrollstop:"_delayedRecordScroll"}),this._on(this.window,{navigate:"_filterNavigateEvents"}),this._on({pagechange:"_afterContentChange"}),this.window.one("navigate",t.proxy(function(){this.setLastScrollEnabled=!0},this))},_setOptions:function(t){t.theme!==n&&"none"!==t.theme?this.element.removeClass("ui-overlay-"+this.options.theme).addClass("ui-overlay-"+t.theme):t.theme!==n&&this.element.removeClass("ui-overlay-"+this.options.theme),this._super(t)},_disableRecordScroll:function(){this.setLastScrollEnabled=!1},_enableRecordScroll:function(){this.setLastScrollEnabled=!0},_afterContentChange:function(){this.setLastScrollEnabled=!0,this._off(this.window,"scrollstop"),this._on(this.window,{scrollstop:"_delayedRecordScroll"})},_recordScroll:function(){if(this.setLastScrollEnabled){var t,e,i,n=this._getActiveHistory();n&&(t=this._getScroll(),e=this._getMinScroll(),i=this._getDefaultScroll(),n.lastScroll=e>t?i:t)}},_delayedRecordScroll:function(){setTimeout(t.proxy(this,"_recordScroll"),100)},_getScroll:function(){return this.window.scrollTop()},_getMinScroll:function(){return t.mobile.minScrollBack},_getDefaultScroll:function(){return t.mobile.defaultHomeScroll},_filterNavigateEvents:function(e,i){var n;e.originalEvent&&e.originalEvent.isDefaultPrevented()||((n=e.originalEvent.type.indexOf("hashchange")>-1?i.state.hash:i.state.url)||(n=this._getHash()),n&&"#"!==n&&0!==n.indexOf("#"+t.mobile.path.uiStateKey)||(n=location.href),this._handleNavigate(n,i.state))},_getHash:function(){return t.mobile.path.parseLocation().hash},getActivePage:function(){return this.activePage},_getInitialContent:function(){return t.mobile.firstPage},_getHistory:function(){return t.mobile.navigate.history},_getActiveHistory:function(){return this._getHistory().getActive()},_getDocumentBase:function(){return t.mobile.path.documentBase},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(i){if(t.mobile.hashListeningEnabled)e.history.go(i);else{var n=t.mobile.navigate.history.activeIndex,s=n+parseInt(i,10),o=t.mobile.navigate.history.stack[s].url,r=i>=1?"forward":"back";t.mobile.navigate.history.activeIndex=s,t.mobile.navigate.history.previousIndex=n,this.change(o,{direction:r,changeHash:!1,fromHashChange:!0})}},_handleDestination:function(e){return"string"===t.type(e)&&(e=t.mobile.path.stripHash(e)),e&&(this._getHistory(),e=t.mobile.path.isPath(e)?e:t.mobile.path.makeUrlAbsolute("#"+e,this._getDocumentBase())),e||this._getInitialContent()},_transitionFromHistory:function(t,e){var i=this._getHistory(),n="back"===t?i.getLast():i.getActive();return n&&n.transition||e},_handleDialog:function(e,i){var n,s,o=this.getActivePage();return o&&!o.data("mobile-dialog")?("back"===i.direction?this.back():this.forward(),!1):(n=i.pageUrl,s=this._getActiveHistory(),t.extend(e,{role:s.role,transition:this._transitionFromHistory(i.direction,e.transition),reverse:"back"===i.direction}),n)},_handleNavigate:function(e,i){var n=t.mobile.path.stripHash(e),s=this._getHistory(),o=0===s.stack.length?"none":this._transitionFromHistory(i.direction),r={changeHash:!1,fromHashChange:!0,reverse:"back"===i.direction};t.extend(r,i,{transition:o}),s.activeIndex>0&&n.indexOf(t.mobile.dialogHashKey)>-1&&!1===(n=this._handleDialog(r,i))||this._changeContent(this._handleDestination(n),r)},_changeContent:function(e,i){t.mobile.changePage(e,i)},_getBase:function(){return t.mobile.base},_getNs:function(){return t.mobile.ns},_enhance:function(t,e){return t.page({role:e})},_include:function(t,e){t.appendTo(this.element),this._enhance(t,e.role),t.page("bindRemove")},_find:function(e){var i,n=this._createFileUrl(e),s=this._createDataUrl(e),o=this._getInitialContent();return 0===(i=this.element.children("[data-"+this._getNs()+"url='"+t.mobile.path.hashToSelector(s)+"']")).length&&s&&!t.mobile.path.isPath(s)&&(i=this.element.children(t.mobile.path.hashToSelector("#"+s)).attr("data-"+this._getNs()+"url",s).jqmData("url",s)),0===i.length&&t.mobile.path.isFirstPageUrl(n)&&o&&o.parent().length&&(i=t(o)),i},_getLoader:function(){return t.mobile.loading()},_showLoading:function(e,i,n,s){this._loadMsg||(this._loadMsg=setTimeout(t.proxy(function(){this._getLoader().loader("show",i,n,s),this._loadMsg=0},this),e))},_hideLoading:function(){clearTimeout(this._loadMsg),this._loadMsg=0,this._getLoader().loader("hide")},_showError:function(){this._hideLoading(),this._showLoading(0,t.mobile.pageLoadErrorMessageTheme,t.mobile.pageLoadErrorMessage,!0),setTimeout(t.proxy(this,"_hideLoading"),1500)},_parse:function(e,i){var n,s=t("<div></div>");return s.get(0).innerHTML=e,(n=s.find(":jqmData(role='page'), :jqmData(role='dialog')").first()).length||(n=t("<div data-"+this._getNs()+"role='page'>"+(e.split(/<\/?body[^>]*>/gim)[1]||"")+"</div>")),n.attr("data-"+this._getNs()+"url",this._createDataUrl(i)).attr("data-"+this._getNs()+"external-page",!0),n},_setLoadedTitle:function(e,i){var n=i.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;n&&!e.jqmData("title")&&(n=t("<div>"+n+"</div>").text(),e.jqmData("title",n))},_isRewritableBaseTag:function(){return t.mobile.dynamicBaseEnabled&&!t.support.dynamicBaseTag},_createDataUrl:function(e){return t.mobile.path.convertUrlToDataUrl(e)},_createFileUrl:function(e){return t.mobile.path.getFilePath(e)},_triggerWithDeprecated:function(e,i,n){var s=t.Event("page"+e),o=t.Event(this.widgetName+e);return(n||this.element).trigger(s,i),this._trigger(e,o,i),{deprecatedEvent:s,event:o}},_loadSuccess:function(e,i,s,o){var r=this._createFileUrl(e);return t.proxy(function(a,l,h){var c,u=new RegExp("(<[^>]+\\bdata-"+this._getNs()+"role=[\"']?page[\"']?[^>]*>)"),d=new RegExp("\\bdata-"+this._getNs()+"url=[\"']?([^\"'>]*)[\"']?");u.test(a)&&RegExp.$1&&d.test(RegExp.$1)&&RegExp.$1&&(r=t.mobile.path.getFilePath(t("<div>"+RegExp.$1+"</div>").text()),r=this.window[0].encodeURIComponent(r)),s.prefetch===n&&this._getBase().set(r),c=this._parse(a,r),this._setLoadedTitle(c,a),i.xhr=h,i.textStatus=l,i.page=c,i.content=c,i.toPage=c,this._triggerWithDeprecated("load",i).event.isDefaultPrevented()||(this._isRewritableBaseTag()&&c&&this._getBase().rewrite(r,c),this._include(c,s),s.showLoadMsg&&this._hideLoading(),o.resolve(e,s,c))},this)},_loadDefaults:{type:"get",data:n,reloadPage:!1,reload:!1,role:n,showLoadMsg:!1,loadMsgDelay:50},load:function(e,i){var s,o,r,a,l=i&&i.deferred||t.Deferred(),h=i&&i.reload===n&&i.reloadPage!==n?{reload:i.reloadPage}:{},c=t.extend({},this._loadDefaults,i,h),u=null,d=t.mobile.path.makeUrlAbsolute(e,this._findBaseWithDefault());return c.data&&"get"===c.type&&(d=t.mobile.path.addSearchParams(d,c.data),c.data=n),c.data&&"post"===c.type&&(c.reload=!0),s=this._createFileUrl(d),o=this._createDataUrl(d),u=this._find(d),0===u.length&&t.mobile.path.isEmbeddedPage(s)&&!t.mobile.path.isFirstPageUrl(s)?(l.reject(d,c),l.promise()):(this._getBase().reset(),u.length&&!c.reload?(this._enhance(u,c.role),l.resolve(d,c,u),c.prefetch||this._getBase().set(e),l.promise()):(a={url:e,absUrl:d,toPage:e,prevPage:i?i.fromPage:n,dataUrl:o,deferred:l,options:c},r=this._triggerWithDeprecated("beforeload",a),r.deprecatedEvent.isDefaultPrevented()||r.event.isDefaultPrevented()?l.promise():(c.showLoadMsg&&this._showLoading(c.loadMsgDelay),c.prefetch===n&&this._getBase().reset(),t.mobile.allowCrossDomainPages||t.mobile.path.isSameDomain(t.mobile.path.documentUrl,d)?(t.ajax({url:s,type:c.type,data:c.data,contentType:c.contentType,dataType:"html",success:this._loadSuccess(d,a,c,l),error:this._loadError(d,a,c,l)}),l.promise()):(l.reject(d,c),l.promise()))))},_loadError:function(e,i,n,s){return t.proxy(function(o,r,a){this._getBase().set(t.mobile.path.get()),i.xhr=o,i.textStatus=r,i.errorThrown=a;var l=this._triggerWithDeprecated("loadfailed",i);l.deprecatedEvent.isDefaultPrevented()||l.event.isDefaultPrevented()||(n.showLoadMsg&&this._showError(),s.reject(e,n))},this)},_getTransitionHandler:function(e){return e=t.mobile._maybeDegradeTransition(e),t.mobile.transitionHandlers[e]||t.mobile.defaultTransitionHandler},_triggerCssTransitionEvents:function(e,i,n){var s=!1;n=n||"",i&&(e[0]===i[0]&&(s=!0),this._triggerWithDeprecated(n+"hide",{nextPage:e,toPage:e,prevPage:i,samePage:s},i)),this._triggerWithDeprecated(n+"show",{prevPage:i||t(""),toPage:e},e)},_cssTransition:function(e,i,n){var s,o=n.transition,r=n.reverse,a=n.deferred;this._triggerCssTransitionEvents(e,i,"before"),this._hideLoading(),(s=new(this._getTransitionHandler(o))(o,r,e,i).transition()).done(t.proxy(function(){this._triggerCssTransitionEvents(e,i)},this)),s.done(function(){a.resolve.apply(a,arguments)})},_releaseTransitionLock:function(){o=!1,s.length>0&&t.mobile.changePage.apply(null,s.pop())},_removeActiveLinkClass:function(e){t.mobile.removeActiveLinkClass(e)},_loadUrl:function(e,i,n){n.target=e,n.deferred=t.Deferred(),this.load(e,n),n.deferred.done(t.proxy(function(t,e,n){o=!1,e.absUrl=i.absUrl,this.transition(n,i,e)},this)),n.deferred.fail(t.proxy(function(){this._removeActiveLinkClass(!0),this._releaseTransitionLock(),this._triggerWithDeprecated("changefailed",i)},this))},_triggerPageBeforeChange:function(e,i,n){var s;return i.prevPage=this.activePage,t.extend(i,{toPage:e,options:n}),i.absUrl="string"===t.type(e)?t.mobile.path.makeUrlAbsolute(e,this._findBaseWithDefault()):n.absUrl,!(s=this._triggerWithDeprecated("beforechange",i)).event.isDefaultPrevented()&&!s.deprecatedEvent.isDefaultPrevented()},change:function(e,i){if(o)s.unshift(arguments);else{var n=t.extend({},t.mobile.changePage.defaults,i),r={};n.fromPage=n.fromPage||this.activePage,this._triggerPageBeforeChange(e,r,n)&&(e=r.toPage,"string"===t.type(e)?(o=!0,this._loadUrl(e,r,n)):this.transition(e,r,n))}},transition:function(e,r,a){var l,h,c,u,d,f,p,g,m,v,b,_,y;if(o)s.unshift([e,a]);else if(this._triggerPageBeforeChange(e,r,a)&&(r.prevPage=a.fromPage,!(y=this._triggerWithDeprecated("beforetransition",r)).deprecatedEvent.isDefaultPrevented()&&!y.event.isDefaultPrevented())){if(o=!0,e[0]!==t.mobile.firstPage[0]||a.dataUrl||(a.dataUrl=t.mobile.path.documentUrl.hrefNoHash),l=a.fromPage,h=a.dataUrl&&t.mobile.path.convertUrlToDataUrl(a.dataUrl)||e.jqmData("url"),c=h,t.mobile.path.getFilePath(h),u=t.mobile.navigate.history.getActive(),d=0===t.mobile.navigate.history.activeIndex,f=0,p=i.title,g=("dialog"===a.role||"dialog"===e.jqmData("role"))&&!0!==e.jqmData("dialog"),l&&l[0]===e[0]&&!a.allowSamePageTransition)return o=!1,this._triggerWithDeprecated("transition",r),this._triggerWithDeprecated("change",r),void(a.fromHashChange&&t.mobile.navigate.history.direct({url:h}));e.page({role:a.role}),a.fromHashChange&&(f="back"===a.direction?-1:1);try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()?t(i.activeElement).blur():t("input:focus, textarea:focus, select:focus").blur()}catch(t){}m=!1,g&&u&&(u.url&&u.url.indexOf(t.mobile.dialogHashKey)>-1&&this.activePage&&!this.activePage.hasClass("ui-dialog")&&t.mobile.navigate.history.activeIndex>0&&(a.changeHash=!1,m=!0),h=u.url||"",h+=!m&&h.indexOf("#")>-1?t.mobile.dialogHashKey:"#"+t.mobile.dialogHashKey),(v=u?e.jqmData("title")||e.children(":jqmData(role='header')").find(".ui-title").text():p)&&p===i.title&&(p=v),e.jqmData("title")||e.jqmData("title",p),a.transition=a.transition||(f&&!d?u.transition:n)||(g?t.mobile.defaultDialogTransition:t.mobile.defaultPageTransition),!f&&m&&(t.mobile.navigate.history.getActive().pageUrl=c),h&&!a.fromHashChange&&(!t.mobile.path.isPath(h)&&h.indexOf("#")<0&&(h="#"+h),b={transition:a.transition,title:p,pageUrl:c,role:a.role},!1!==a.changeHash&&t.mobile.hashListeningEnabled?t.mobile.navigate(this.window[0].encodeURI(h),b,!0):e[0]!==t.mobile.firstPage[0]&&t.mobile.navigate.history.add(h,b)),i.title=p,t.mobile.activePage=e,this.activePage=e,a.reverse=a.reverse||0>f,_=t.Deferred(),this._cssTransition(e,l,{transition:a.transition,reverse:a.reverse,deferred:_}),_.done(t.proxy(function(i,n,s,o,l){t.mobile.removeActiveLinkClass(),a.duplicateCachedPage&&a.duplicateCachedPage.remove(),l||t.mobile.focusPage(e),this._releaseTransitionLock(),this._triggerWithDeprecated("transition",r),this._triggerWithDeprecated("change",r)},this))}},_findBaseWithDefault:function(){return this.activePage&&t.mobile.getClosestBaseUrl(this.activePage)||t.mobile.path.documentBase.hrefNoHash}}),t.mobile.navreadyDeferred=t.Deferred();var s=[],o=!1}(t),function(t,n){function s(t){for(;t&&("string"!=typeof t.nodeName||"a"!==t.nodeName.toLowerCase());)t=t.parentNode;return t}var o=t.Deferred(),r=t.Deferred(),a=function(){r.resolve(),r=null},l=t.mobile.path.documentUrl,h=null;t.mobile.loadPage=function(e,i){var n;return i=i||{},n=i.pageContainer||t.mobile.pageContainer,i.deferred=t.Deferred(),n.pagecontainer("load",e,i),i.deferred.promise()},t.mobile.back=function(){var i=e.navigator;this.phonegapNavigationEnabled&&i&&i.app&&i.app.backHistory?i.app.backHistory():t.mobile.pageContainer.pagecontainer("back")},t.mobile.focusPage=function(t){var e=t.find("[autofocus]"),i=t.find(".ui-title:eq(0)");return e.length?void e.focus():void(i.length?i.focus():t.focus())},t.mobile._maybeDegradeTransition=t.mobile._maybeDegradeTransition||function(t){return t},t.mobile.changePage=function(e,i){t.mobile.pageContainer.pagecontainer("change",e,i)},t.mobile.changePage.defaults={transition:n,reverse:!1,changeHash:!0,fromHashChange:!1,role:n,duplicateCachedPage:n,pageContainer:n,showLoadMsg:!0,dataUrl:n,fromPage:n,allowSamePageTransition:!1},t.mobile._registerInternalEvents=function(){var i=function(e,i){var n,s,o,r,a=!0;return!(!t.mobile.ajaxEnabled||e.is(":jqmData(ajax='false')")||!e.jqmHijackable().length||e.attr("target"))&&(n=h&&h.attr("formaction")||e.attr("action"),r=(e.attr("method")||"get").toLowerCase(),n||(n=t.mobile.getClosestBaseUrl(e),"get"===r&&(n=t.mobile.path.parseUrl(n).hrefNoSearch),n===t.mobile.path.documentBase.hrefNoHash&&(n=l.hrefNoSearch)),n=t.mobile.path.makeUrlAbsolute(n,t.mobile.getClosestBaseUrl(e)),!(t.mobile.path.isExternal(n)&&!t.mobile.path.isPermittedCrossDomainRequest(l,n))&&(i||(s=e.serializeArray(),h&&h[0].form===e[0]&&(o=h.attr("name"))&&(t.each(s,function(t,e){return e.name===o?(o="",!1):void 0}),o&&s.push({name:o,value:h.attr("value")})),a={url:n,options:{type:r,data:t.param(s),transition:e.jqmData("transition"),reverse:"reverse"===e.jqmData("direction"),reloadPage:!0}}),a))};t.mobile.document.delegate("form","submit",function(e){var n;e.isDefaultPrevented()||(n=i(t(this)))&&(t.mobile.changePage(n.url,n.options),e.preventDefault())}),t.mobile.document.bind("vclick",function(e){var n,o,r=e.target,a=!1;if(!(e.which>1)&&t.mobile.linkBindingEnabled){if(h=t(r),t.data(r,"mobile-button")){if(!i(t(r).closest("form"),!0))return;r.parentNode&&(r=r.parentNode)}else{if(!(r=s(r))||"#"===t.mobile.path.parseUrl(r.getAttribute("href")||"#").hash)return;if(!t(r).jqmHijackable().length)return}~r.className.indexOf("ui-link-inherit")?r.parentNode&&(o=t.data(r.parentNode,"buttonElements")):o=t.data(r,"buttonElements"),o?r=o.outer:a=!0,n=t(r),a&&(n=n.closest(".ui-btn")),n.length>0&&!n.hasClass("ui-state-disabled")&&(t.mobile.removeActiveLinkClass(!0),t.mobile.activeClickedLink=n,t.mobile.activeClickedLink.addClass(t.mobile.activeBtnClass))}}),t.mobile.document.bind("click",function(i){if(t.mobile.linkBindingEnabled&&!i.isDefaultPrevented()){var o,r,a,h,c,u,d=s(i.target),f=t(d),p=function(){e.setTimeout(function(){t.mobile.removeActiveLinkClass(!0)},200)};if(t.mobile.activeClickedLink&&t.mobile.activeClickedLink[0]===i.target.parentNode&&p(),d&&!(i.which>1)&&f.jqmHijackable().length){if(f.is(":jqmData(rel='back')"))return t.mobile.back(),!1;if(o=t.mobile.getClosestBaseUrl(f),r=t.mobile.path.makeUrlAbsolute(f.attr("href")||"#",o),!t.mobile.ajaxEnabled&&!t.mobile.path.isEmbeddedPage(r))return void p();if(!(-1===r.search("#")||t.mobile.path.isExternal(r)&&t.mobile.path.isAbsoluteUrl(r))){if(!(r=r.replace(/[^#]*#/,"")))return void i.preventDefault();r=t.mobile.path.isPath(r)?t.mobile.path.makeUrlAbsolute(r,o):t.mobile.path.makeUrlAbsolute("#"+r,l.hrefNoHash)}if(a=f.is("[rel='external']")||f.is(":jqmData(ajax='false')")||f.is("[target]"),a||t.mobile.path.isExternal(r)&&!t.mobile.path.isPermittedCrossDomainRequest(l,r))return void p();h=f.jqmData("transition"),c="reverse"===f.jqmData("direction")||f.jqmData("back"),u=f.attr("data-"+t.mobile.ns+"rel")||n,t.mobile.changePage(r,{transition:h,reverse:c,role:u,link:f}),i.preventDefault()}}}),t.mobile.document.delegate(".ui-page","pageshow.prefetch",function(){var e=[];t(this).find("a:jqmData(prefetch)").each(function(){var i=t(this),n=i.attr("href");n&&-1===t.inArray(n,e)&&(e.push(n),t.mobile.loadPage(n,{role:i.attr("data-"+t.mobile.ns+"rel"),prefetch:!0}))})}),t.mobile.pageContainer.pagecontainer(),t.mobile.document.bind("pageshow",function(){r?r.done(t.mobile.resetActivePageHeight):t.mobile.resetActivePageHeight()}),t.mobile.window.bind("throttledresize",t.mobile.resetActivePageHeight)},t(function(){o.resolve()}),"complete"===i.readyState?a():t.mobile.window.load(a),t.when(o,t.mobile.navreadyDeferred).done(function(){t.mobile._registerInternalEvents()})}(t),function(t,e){t.mobile.Transition=function(){this.init.apply(this,arguments)},t.extend(t.mobile.Transition.prototype,{toPreClass:" ui-page-pre-in",init:function(e,i,n,s){t.extend(this,{name:e,reverse:i,$to:n,$from:s,deferred:new t.Deferred})},cleanFrom:function(){this.$from.removeClass(t.mobile.activePageClass+" out in reverse "+this.name).height("")},beforeDoneIn:function(){},beforeDoneOut:function(){},beforeStartOut:function(){},doneIn:function(){this.beforeDoneIn(),this.$to.removeClass("out in reverse "+this.name).height(""),this.toggleViewportClass(),t.mobile.window.scrollTop()!==this.toScroll&&this.scrollPage(),this.sequential||this.$to.addClass(t.mobile.activePageClass),this.deferred.resolve(this.name,this.reverse,this.$to,this.$from,!0)},doneOut:function(t,e,i,n){this.beforeDoneOut(),this.startIn(t,e,i,n)},hideIn:function(t){this.$to.css("z-index",-10),t.call(this),this.$to.css("z-index","")},scrollPage:function(){t.event.special.scrollstart.enabled=!1,(t.mobile.hideUrlBar||this.toScroll!==t.mobile.defaultHomeScroll)&&e.scrollTo(0,this.toScroll),setTimeout(function(){t.event.special.scrollstart.enabled=!0},150)},startIn:function(e,i,n,s){this.hideIn(function(){this.$to.addClass(t.mobile.activePageClass+this.toPreClass),s||t.mobile.focusPage(this.$to),this.$to.height(e+this.toScroll),n||this.scrollPage()}),this.$to.removeClass(this.toPreClass).addClass(this.name+" in "+i),n?this.doneIn():this.$to.animationComplete(t.proxy(function(){this.doneIn()},this))},startOut:function(e,i,n){this.beforeStartOut(e,i,n),this.$from.height(e+t.mobile.window.scrollTop()).addClass(this.name+" out"+i)},toggleViewportClass:function(){t.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+this.name)},transition:function(){var e,i=this.reverse?" reverse":"",n=t.mobile.getScreenHeight(),s=!1!==t.mobile.maxTransitionWidth&&t.mobile.window.width()>t.mobile.maxTransitionWidth;return this.toScroll=t.mobile.navigate.history.getActive().lastScroll||t.mobile.defaultHomeScroll,e=!t.support.cssTransitions||!t.support.cssAnimations||s||!this.name||"none"===this.name||Math.max(t.mobile.window.scrollTop(),this.toScroll)>t.mobile.getMaxScrollForTransition(),this.toggleViewportClass(),this.$from&&!e?this.startOut(n,i,e):this.doneOut(n,i,e,!0),this.deferred.promise()}})}(t,this),function(t){t.mobile.SerialTransition=function(){this.init.apply(this,arguments)},t.extend(t.mobile.SerialTransition.prototype,t.mobile.Transition.prototype,{sequential:!0,beforeDoneOut:function(){this.$from&&this.cleanFrom()},beforeStartOut:function(e,i,n){this.$from.animationComplete(t.proxy(function(){this.doneOut(e,i,n)},this))}})}(t),function(t){t.mobile.ConcurrentTransition=function(){this.init.apply(this,arguments)},t.extend(t.mobile.ConcurrentTransition.prototype,t.mobile.Transition.prototype,{sequential:!1,beforeDoneIn:function(){this.$from&&this.cleanFrom()},beforeStartOut:function(t,e,i){this.doneOut(t,e,i)}})}(t),function(t){t.mobile.transitionHandlers={sequential:t.mobile.SerialTransition,simultaneous:t.mobile.ConcurrentTransition},t.mobile.defaultTransitionHandler=t.mobile.transitionHandlers.sequential,t.mobile.transitionFallbacks={},t.mobile._maybeDegradeTransition=function(e){return e&&!t.support.cssTransform3d&&t.mobile.transitionFallbacks[e]&&(e=t.mobile.transitionFallbacks[e]),e},t.mobile.getMaxScrollForTransition=t.mobile.getMaxScrollForTransition||function(){return 3*t.mobile.getScreenHeight()}}(t),t.mobile.transitionFallbacks.flip="fade",t.mobile.transitionFallbacks.flow="fade",t.mobile.transitionFallbacks.pop="fade",function(t){t.mobile.transitionHandlers.slide=t.mobile.transitionHandlers.simultaneous,t.mobile.transitionFallbacks.slide="fade"}(t),t.mobile.transitionFallbacks.slidedown="fade",t.mobile.transitionFallbacks.slidefade="fade",t.mobile.transitionFallbacks.slideup="fade",t.mobile.transitionFallbacks.turn="fade",function(t){t.mobile.degradeInputs={color:!1,date:!1,datetime:!1,"datetime-local":!1,email:!1,month:!1,number:!1,range:"number",search:"text",tel:!1,time:!1,url:!1,week:!1},t.mobile.page.prototype.options.degradeInputs=t.mobile.degradeInputs,t.mobile.degradeInputsWithin=function(e){(e=t(e)).find("input").not(t.mobile.page.prototype.keepNativeSelector()).each(function(){var e,i,n,s,o=t(this),r=this.getAttribute("type"),a=t.mobile.degradeInputs[r]||"text";t.mobile.degradeInputs[r]&&(e=t("<div>").html(o.clone()).html(),i=e.indexOf(" type=")>-1,n=i?/\s+type=["']?\w+['"]?/:/\/?>/,s=' type="'+a+'" data-'+t.mobile.ns+'type="'+r+'"'+(i?"":">"),o.replaceWith(e.replace(n,s)))})}}(t),function(t,e,i){t.widget("mobile.page",t.mobile.page,{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0,dialog:!1},_create:function(){this._super(),this.options.dialog&&(t.extend(this,{_inner:this.element.children(),_headerCloseButton:null}),this.options.enhanced||this._setCloseBtn(this.options.closeBtn))},_enhance:function(){this._super(),this.options.dialog&&this.element.addClass("ui-dialog").wrapInner(t("<div/>",{role:"dialog",class:"ui-dialog-contain ui-overlay-shadow"+(this.options.corners?" ui-corner-all":"")}))},_setOptions:function(e){var n,s,o=this.options;e.corners!==i&&this._inner.toggleClass("ui-corner-all",!!e.corners),e.overlayTheme!==i&&t.mobile.activePage[0]===this.element[0]&&(o.overlayTheme=e.overlayTheme,this._handlePageBeforeShow()),e.closeBtnText!==i&&(n=o.closeBtn,s=e.closeBtnText),e.closeBtn!==i&&(n=e.closeBtn),n&&this._setCloseBtn(n,s),this._super(e)},_handlePageBeforeShow:function(){this.options.overlayTheme&&this.options.dialog?(this.removeContainerBackground(),this.setContainerBackground(this.options.overlayTheme)):this._super()},_setCloseBtn:function(e,i){var n,s=this._headerCloseButton;"none"===(e="left"===e?"left":"right"===e?"right":"none")?s&&(s.remove(),s=null):s?(s.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+e),i&&s.text(i)):(n=this._inner.find(":jqmData(role='header')").first(),s=t("<a></a>",{href:"#",class:"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+e}).attr("data-"+t.mobile.ns+"rel","back").text(i||this.options.closeBtnText||"").prependTo(n)),this._headerCloseButton=s}})}(t),function(t,e,i){t.widget("mobile.dialog",{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0},_handlePageBeforeShow:function(){this._isCloseable=!0,this.options.overlayTheme&&this.element.page("removeContainerBackground").page("setContainerBackground",this.options.overlayTheme)},_handlePageBeforeHide:function(){this._isCloseable=!1},_handleVClickSubmit:function(e){var i,n=t(e.target).closest("vclick"===e.type?"a":"form");n.length&&!n.jqmData("transition")&&(i={},i["data-"+t.mobile.ns+"transition"]=(t.mobile.navigate.history.getActive()||{}).transition||t.mobile.defaultDialogTransition,i["data-"+t.mobile.ns+"direction"]="reverse",n.attr(i))},_create:function(){var e=this.element,i=this.options;e.addClass("ui-dialog").wrapInner(t("<div/>",{role:"dialog",class:"ui-dialog-contain ui-overlay-shadow"+(i.corners?" ui-corner-all":"")})),t.extend(this,{_isCloseable:!1,_inner:e.children(),_headerCloseButton:null}),this._on(e,{vclick:"_handleVClickSubmit",submit:"_handleVClickSubmit",pagebeforeshow:"_handlePageBeforeShow",pagebeforehide:"_handlePageBeforeHide"}),this._setCloseBtn(i.closeBtn)},_setOptions:function(e){var n,s,o=this.options;e.corners!==i&&this._inner.toggleClass("ui-corner-all",!!e.corners),e.overlayTheme!==i&&t.mobile.activePage[0]===this.element[0]&&(o.overlayTheme=e.overlayTheme,this._handlePageBeforeShow()),e.closeBtnText!==i&&(n=o.closeBtn,s=e.closeBtnText),e.closeBtn!==i&&(n=e.closeBtn),n&&this._setCloseBtn(n,s),this._super(e)},_setCloseBtn:function(e,i){var n,s=this._headerCloseButton;"none"===(e="left"===e?"left":"right"===e?"right":"none")?s&&(s.remove(),s=null):s?(s.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+e),i&&s.text(i)):(n=this._inner.find(":jqmData(role='header')").first(),s=t("<a></a>",{role:"button",href:"#",class:"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+e}).text(i||this.options.closeBtnText||"").prependTo(n),this._on(s,{click:"close"})),this._headerCloseButton=s},close:function(){var e=t.mobile.navigate.history;this._isCloseable&&(this._isCloseable=!1,t.mobile.hashListeningEnabled&&e.activeIndex>0?t.mobile.back():t.mobile.pageContainer.pagecontainer("back"))}})}(t),function(t,e){var i=/([A-Z])/g,n=function(t){return"ui-btn-icon-"+(null===t?"left":t)};t.widget("mobile.collapsible",{options:{enhanced:!1,expandCueText:null,collapseCueText:null,collapsed:!0,heading:"h1,h2,h3,h4,h5,h6,legend",collapsedIcon:null,expandedIcon:null,iconpos:null,theme:null,contentTheme:null,inset:null,corners:null,mini:null},_create:function(){var e=this.element,i={accordion:e.closest(":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')"+(t.mobile.collapsibleset?", :mobile-collapsibleset":"")).addClass("ui-collapsible-set")};this._ui=i,this._renderedOptions=this._getOptions(this.options),this.options.enhanced?(i.heading=this.element.children(".ui-collapsible-heading"),i.content=i.heading.next(),i.anchor=i.heading.children(),i.status=i.anchor.children(".ui-collapsible-heading-status")):this._enhance(e,i),this._on(i.heading,{tap:function(){i.heading.find("a").first().addClass(t.mobile.activeBtnClass)},click:function(t){this._handleExpandCollapse(!i.heading.hasClass("ui-collapsible-heading-collapsed")),t.preventDefault(),t.stopPropagation()}})},_getOptions:function(e){var n,s=this._ui.accordion,o=this._ui.accordionWidget;e=t.extend({},e),s.length&&!o&&(this._ui.accordionWidget=o=s.data("mobile-collapsibleset"));for(n in e)e[n]=null!=e[n]?e[n]:o?o.options[n]:s.length?t.mobile.getAttribute(s[0],n.replace(i,"-$1").toLowerCase()):null,null==e[n]&&(e[n]=t.mobile.collapsible.defaults[n]);return e},_themeClassFromOption:function(t,e){return e?"none"===e?"":t+e:""},_enhance:function(e,i){var s,o=this._renderedOptions,r=this._themeClassFromOption("ui-body-",o.contentTheme);return e.addClass("ui-collapsible "+(o.inset?"ui-collapsible-inset ":"")+(o.inset&&o.corners?"ui-corner-all ":"")+(r?"ui-collapsible-themed-content ":"")),i.originalHeading=e.children(this.options.heading).first(),i.content=e.wrapInner("<div class='ui-collapsible-content "+r+"'></div>").children(".ui-collapsible-content"),i.heading=i.originalHeading,i.heading.is("legend")&&(i.heading=t("<div role='heading'>"+i.heading.html()+"</div>"),i.placeholder=t("<div>\x3c!-- placeholder for legend --\x3e</div>").insertBefore(i.originalHeading),i.originalHeading.remove()),s=o.collapsed?o.collapsedIcon?"ui-icon-"+o.collapsedIcon:"":o.expandedIcon?"ui-icon-"+o.expandedIcon:"",i.status=t("<span class='ui-collapsible-heading-status'></span>"),i.anchor=i.heading.detach().addClass("ui-collapsible-heading").append(i.status).wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().addClass("ui-btn "+(s?s+" ":"")+(s?n(o.iconpos)+" ":"")+this._themeClassFromOption("ui-btn-",o.theme)+" "+(o.mini?"ui-mini ":"")),i.heading.insertBefore(i.content),this._handleExpandCollapse(this.options.collapsed),i},refresh:function(){this._applyOptions(this.options),this._renderedOptions=this._getOptions(this.options)},_applyOptions:function(t){var i,s,o,r,a,l=this.element,h=this._renderedOptions,c=this._ui,u=c.anchor,d=c.status,f=this._getOptions(t);t.collapsed!==e&&this._handleExpandCollapse(t.collapsed),(i=l.hasClass("ui-collapsible-collapsed"))?f.expandCueText!==e&&d.text(f.expandCueText):f.collapseCueText!==e&&d.text(f.collapseCueText),a=f.collapsedIcon!==e?!1!==f.collapsedIcon:!1!==h.collapsedIcon,(f.iconpos!==e||f.collapsedIcon!==e||f.expandedIcon!==e)&&(u.removeClass([n(h.iconpos)].concat(h.expandedIcon?["ui-icon-"+h.expandedIcon]:[]).concat(h.collapsedIcon?["ui-icon-"+h.collapsedIcon]:[]).join(" ")),a&&u.addClass([n(f.iconpos!==e?f.iconpos:h.iconpos)].concat(i?["ui-icon-"+(f.collapsedIcon!==e?f.collapsedIcon:h.collapsedIcon)]:["ui-icon-"+(f.expandedIcon!==e?f.expandedIcon:h.expandedIcon)]).join(" "))),f.theme!==e&&(o=this._themeClassFromOption("ui-btn-",h.theme),s=this._themeClassFromOption("ui-btn-",f.theme),u.removeClass(o).addClass(s)),f.contentTheme!==e&&(o=this._themeClassFromOption("ui-body-",h.contentTheme),s=this._themeClassFromOption("ui-body-",f.contentTheme),c.content.removeClass(o).addClass(s)),f.inset!==e&&(l.toggleClass("ui-collapsible-inset",f.inset),r=!(!f.inset||!f.corners&&!h.corners)),f.corners!==e&&(r=!(!f.corners||!f.inset&&!h.inset)),r!==e&&l.toggleClass("ui-corner-all",r),f.mini!==e&&u.toggleClass("ui-mini",f.mini)},_setOptions:function(t){this._applyOptions(t),this._super(t),this._renderedOptions=this._getOptions(this.options)},_handleExpandCollapse:function(e){var i=this._renderedOptions,n=this._ui;n.status.text(e?i.expandCueText:i.collapseCueText),n.heading.toggleClass("ui-collapsible-heading-collapsed",e).find("a").first().toggleClass("ui-icon-"+i.expandedIcon,!e).toggleClass("ui-icon-"+i.collapsedIcon,e||i.expandedIcon===i.collapsedIcon).removeClass(t.mobile.activeBtnClass),this.element.toggleClass("ui-collapsible-collapsed",e),n.content.toggleClass("ui-collapsible-content-collapsed",e).attr("aria-hidden",e).trigger("updatelayout"),this.options.collapsed=e,this._trigger(e?"collapse":"expand")},expand:function(){this._handleExpandCollapse(!1)},collapse:function(){this._handleExpandCollapse(!0)},_destroy:function(){var t=this._ui;this.options.enhanced||(t.placeholder?(t.originalHeading.insertBefore(t.placeholder),t.placeholder.remove(),t.heading.remove()):(t.status.remove(),t.heading.removeClass("ui-collapsible-heading ui-collapsible-heading-collapsed").children().contents().unwrap()),t.anchor.contents().unwrap(),t.content.contents().unwrap(),this.element.removeClass("ui-collapsible ui-collapsible-collapsed ui-collapsible-themed-content ui-collapsible-inset ui-corner-all"))}}),t.mobile.collapsible.defaults={expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsedIcon:"plus",contentTheme:"inherit",expandedIcon:"minus",iconpos:"left",inset:!0,corners:!0,theme:"inherit",mini:!1}}(t),function(t){function e(e){var n,s=e.length,o=[];for(n=0;s>n;n++)e[n].className.match(i)||o.push(e[n]);return t(o)}var i=/\bui-screen-hidden\b/;t.mobile.behaviors.addFirstLastClasses={_getVisibles:function(t,i){var n;return i?n=e(t):0===(n=t.filter(":visible")).length&&(n=e(t)),n},_addFirstLastClasses:function(t,e,i){t.removeClass("ui-first-child ui-last-child"),e.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child"),i||this.element.trigger("updatelayout")},_removeFirstLastClasses:function(t){t.removeClass("ui-first-child ui-last-child")}}}(t),function(t,e){var i=":mobile-collapsible, "+t.mobile.collapsible.initSelector;t.widget("mobile.collapsibleset",t.extend({initSelector:":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",options:t.extend({enhanced:!1},t.mobile.collapsible.defaults),_handleCollapsibleExpand:function(e){var i=t(e.target).closest(".ui-collapsible");i.parent().is(":mobile-collapsibleset, :jqmData(role='collapsible-set')")&&i.siblings(".ui-collapsible:not(.ui-collapsible-collapsed)").collapsible("collapse")},_create:function(){var e=this.element,i=this.options;t.extend(this,{_classes:""}),i.enhanced||(e.addClass("ui-collapsible-set "+this._themeClassFromOption("ui-group-theme-",i.theme)+" "+(i.corners&&i.inset?"ui-corner-all ":"")),this.element.find(t.mobile.collapsible.initSelector).collapsible()),this._on(e,{collapsibleexpand:"_handleCollapsibleExpand"})},_themeClassFromOption:function(t,e){return e?"none"===e?"":t+e:""},_init:function(){this._refresh(!0),this.element.children(i).filter(":jqmData(collapsed='false')").collapsible("expand")},_setOptions:function(t){var i,n,s=this.element,o=this._themeClassFromOption("ui-group-theme-",t.theme);return o&&s.removeClass(this._themeClassFromOption("ui-group-theme-",this.options.theme)).addClass(o),t.inset!==e&&(n=!(!t.inset||!t.corners&&!this.options.corners)),t.corners!==e&&(n=!(!t.corners||!t.inset&&!this.options.inset)),n!==e&&s.toggleClass("ui-corner-all",n),i=this._super(t),this.element.children(":mobile-collapsible").collapsible("refresh"),i},_destroy:function(){var t=this.element;this._removeFirstLastClasses(t.children(i)),t.removeClass("ui-collapsible-set ui-corner-all "+this._themeClassFromOption("ui-group-theme-",this.options.theme)).children(":mobile-collapsible").collapsible("destroy")},_refresh:function(e){var n=this.element.children(i);this.element.find(t.mobile.collapsible.initSelector).not(".ui-collapsible").collapsible(),this._addFirstLastClasses(n,this._getVisibles(n,e),e)},refresh:function(){this._refresh(!1)}},t.mobile.behaviors.addFirstLastClasses))}(t),t.fn.fieldcontain=function(){return this.addClass("ui-field-contain")},function(t){t.fn.grid=function(e){return this.each(function(){var i,n,s=t(this),o=t.extend({grid:null},e),r=s.children(),a={solo:1,a:2,b:3,c:4,d:5},l=o.grid;if(!l)if(r.length<=5)for(n in a)a[n]===r.length&&(l=n);else l="a",s.addClass("ui-grid-duo");i=a[l],s.addClass("ui-grid-"+l),r.filter(":nth-child("+i+"n+1)").addClass("ui-block-a"),i>1&&r.filter(":nth-child("+i+"n+2)").addClass("ui-block-b"),i>2&&r.filter(":nth-child("+i+"n+3)").addClass("ui-block-c"),i>3&&r.filter(":nth-child("+i+"n+4)").addClass("ui-block-d"),i>4&&r.filter(":nth-child("+i+"n+5)").addClass("ui-block-e")})}}(t),function(t,e){t.widget("mobile.navbar",{options:{iconpos:"top",grid:null},_create:function(){var e=this.element,n=e.find("a, button"),s=n.filter(":jqmData(icon)").length?this.options.iconpos:void 0;e.addClass("ui-navbar").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid}),n.each(function(){var e=t.mobile.getAttribute(this,"icon"),i=t.mobile.getAttribute(this,"theme"),n="ui-btn";i&&(n+=" ui-btn-"+i),e&&(n+=" ui-icon-"+e+" ui-btn-icon-"+s),t(this).addClass(n)}),e.delegate("a","vclick",function(){var e=t(this);e.hasClass("ui-state-disabled")||e.hasClass("ui-disabled")||e.hasClass(t.mobile.activeBtnClass)||(n.removeClass(t.mobile.activeBtnClass),e.addClass(t.mobile.activeBtnClass),t(i).one("pagehide",function(){e.removeClass(t.mobile.activeBtnClass)}))}),e.closest(".ui-page").bind("pagebeforeshow",function(){n.filter(".ui-state-persist").addClass(t.mobile.activeBtnClass)})}})}(t),function(t){var e=t.mobile.getAttribute;t.widget("mobile.listview",t.extend({options:{theme:null,countTheme:null,dividerTheme:null,icon:"carat-r",splitIcon:"carat-r",splitTheme:null,corners:!0,shadow:!0,inset:!1},_create:function(){var t=this,e="";e+=t.options.inset?" ui-listview-inset":"",t.options.inset&&(e+=t.options.corners?" ui-corner-all":"",e+=t.options.shadow?" ui-shadow":""),t.element.addClass(" ui-listview"+e),t.refresh(!0)},_findFirstElementByTagName:function(t,e,i,n){var s={};for(s[i]=s[n]=!0;t;){if(s[t.nodeName])return t;t=t[e]}return null},_addThumbClasses:function(e){var i,n,s=e.length;for(i=0;s>i;i++)(n=t(this._findFirstElementByTagName(e[i].firstChild,"nextSibling","img","IMG"))).length&&t(this._findFirstElementByTagName(n[0].parentNode,"parentNode","li","LI")).addClass(n.hasClass("ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb")},_getChildrenByTagName:function(e,i,n){var s=[],o={};for(o[i]=o[n]=!0,e=e.firstChild;e;)o[e.nodeName]&&s.push(e),e=e.nextSibling;return t(s)},_beforeListviewRefresh:t.noop,_afterListviewRefresh:t.noop,refresh:function(i){var n,s,o,r,a,l,h,c,u,d,f,p,g,m,v,b,_,y,C,x,w=this.options,T=this.element,S=!!t.nodeName(T[0],"ol"),O=T.attr("start"),E={},k=T.find(".ui-li-count"),D=e(T[0],"counttheme")||this.options.countTheme,A=D?"ui-body-"+D:"ui-body-inherit";for(w.theme&&T.addClass("ui-group-theme-"+w.theme),S&&(O||0===O)&&(f=parseInt(O,10)-1,T.css("counter-reset","listnumbering "+f)),this._beforeListviewRefresh(),s=0,o=(x=this._getChildrenByTagName(T[0],"li","LI")).length;o>s;s++)r=x.eq(s),a="",(i||r[0].className.search(/\bui-li-static\b|\bui-li-divider\b/)<0)&&(u=this._getChildrenByTagName(r[0],"a","A"),d="list-divider"===e(r[0],"role"),g=r.attr("value"),l=e(r[0],"theme"),u.length&&u[0].className.search(/\bui-btn\b/)<0&&!d?(h=e(r[0],"icon"),c=!1!==h&&(h||w.icon),u.removeClass("ui-link"),n="ui-btn",l&&(n+=" ui-btn-"+l),u.length>1?(a="ui-li-has-alt",m=u.last(),v=e(m[0],"theme")||w.splitTheme||e(r[0],"theme",!0),b=v?" ui-btn-"+v:"",_=e(m[0],"icon")||e(r[0],"icon")||w.splitIcon,y="ui-btn ui-btn-icon-notext ui-icon-"+_+b,m.attr("title",t.trim(m.getEncodedText())).addClass(y).empty(),u=u.first()):c&&(n+=" ui-btn-icon-right ui-icon-"+c),u.addClass(n)):d?(C=e(r[0],"theme")||w.dividerTheme||w.theme,a="ui-li-divider ui-bar-"+(C||"inherit"),r.attr("role","heading")):u.length<=0&&(a="ui-li-static ui-body-"+(l||"inherit")),S&&g&&(p=parseInt(g,10)-1,r.css("counter-reset","listnumbering "+p))),E[a]||(E[a]=[]),E[a].push(r[0]);for(a in E)t(E[a]).addClass(a);k.each(function(){t(this).closest("li").addClass("ui-li-has-count")}),A&&k.not("[class*='ui-body-']").addClass(A),this._addThumbClasses(x),this._addThumbClasses(x.find(".ui-btn")),this._afterListviewRefresh(),this._addFirstLastClasses(x,this._getVisibles(x,i),i)}},t.mobile.behaviors.addFirstLastClasses))}(t),function(t){t.widget("mobile.listview",t.mobile.listview,{options:{autodividers:!1,autodividersSelector:function(e){var i=t.trim(e.text())||null;return i?i=i.slice(0,1).toUpperCase():null}},_beforeListviewRefresh:function(){this.options.autodividers&&(this._replaceDividers(),this._superApply(arguments))},_replaceDividers:function(){var e,n,s,o,r,a=null,l=this.element;for(l.children("li:jqmData(role='list-divider')").remove(),n=l.children("li"),e=0;e<n.length;e++)s=n[e],(o=this.options.autodividersSelector(t(s)))&&a!==o&&((r=i.createElement("li")).appendChild(i.createTextNode(o)),r.setAttribute("data-"+t.mobile.ns+"role","list-divider"),s.parentNode.insertBefore(r,s)),a=o}})}(t),function(t){var e=/(^|\s)ui-li-divider($|\s)/,i=/(^|\s)ui-screen-hidden($|\s)/;t.widget("mobile.listview",t.mobile.listview,{options:{hideDividers:!1},_afterListviewRefresh:function(){var t,n,s,o=!0;if(this._superApply(arguments),this.options.hideDividers)for(t=this._getChildrenByTagName(this.element[0],"li","LI"),n=t.length-1;n>-1;n--)s=t[n],s.className.match(e)?(o&&(s.className=s.className+" ui-screen-hidden"),o=!0):s.className.match(i)||(o=!1)}})}(t),function(t){t.mobile.nojs=function(e){t(":jqmData(role='nojs')",e).addClass("ui-nojs")}}(t),t.mobile.behaviors.formReset={_handleFormReset:function(){this._on(this.element.closest("form"),{reset:function(){this._delay("_reset")}})}},function(t,e){var i=t.mobile.path.hashToSelector;t.widget("mobile.checkboxradio",t.extend({initSelector:"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",options:{theme:"inherit",mini:!1,wrapperClass:null,enhanced:!1,iconpos:"left"},_create:function(){var e=this.element,i=this.options,n=function(t,e){return t.jqmData(e)||t.closest("form, fieldset").jqmData(e)},s=this.options.enhanced?{element:this.element.siblings("label"),isParent:!1}:this._findLabel(),o=e[0].type,r="ui-"+o+"-on",a="ui-"+o+"-off";("checkbox"===o||"radio"===o)&&(this.element[0].disabled&&(this.options.disabled=!0),i.iconpos=n(e,"iconpos")||s.element.attr("data-"+t.mobile.ns+"iconpos")||i.iconpos,i.mini=n(e,"mini")||i.mini,t.extend(this,{input:e,label:s.element,labelIsParent:s.isParent,inputtype:o,checkedClass:r,uncheckedClass:a}),this.options.enhanced||this._enhance(),this._on(s.element,{vmouseover:"_handleLabelVMouseOver",vclick:"_handleLabelVClick"}),this._on(e,{vmousedown:"_cacheVals",vclick:"_handleInputVClick",focus:"_handleInputFocus",blur:"_handleInputBlur"}),this._handleFormReset(),this.refresh())},_findLabel:function(){var e,n,s,o=this.element,r=o[0].labels;return r&&r.length>0?(n=t(r[0]),s=t.contains(n[0],o[0])):(e=o.closest("label"),s=e.length>0,n=s?e:t(this.document[0].getElementsByTagName("label")).filter("[for='"+i(o[0].id)+"']").first()),{element:n,isParent:s}},_enhance:function(){this.label.addClass("ui-btn ui-corner-all"),this.labelIsParent?this.input.add(this.label).wrapAll(this._wrapper()):(this.element.wrap(this._wrapper()),this.element.parent().prepend(this.label)),this._setOptions({theme:this.options.theme,iconpos:this.options.iconpos,mini:this.options.mini})},_wrapper:function(){return t("<div class='"+(this.options.wrapperClass?this.options.wrapperClass:"")+" ui-"+this.inputtype+(this.options.disabled?" ui-state-disabled":"")+"' ></div>")},_handleInputFocus:function(){this.label.addClass(t.mobile.focusClass)},_handleInputBlur:function(){this.label.removeClass(t.mobile.focusClass)},_handleInputVClick:function(){this.element.prop("checked",this.element.is(":checked")),this._getInputSet().not(this.element).prop("checked",!1),this._updateAll(!0)},_handleLabelVMouseOver:function(t){this.label.parent().hasClass("ui-state-disabled")&&t.stopPropagation()},_handleLabelVClick:function(t){var e=this.element;return e.is(":disabled")?void t.preventDefault():(this._cacheVals(),e.prop("checked","radio"===this.inputtype&&!0||!e.prop("checked")),e.triggerHandler("click"),this._getInputSet().not(e).prop("checked",!1),this._updateAll(),!1)},_cacheVals:function(){this._getInputSet().each(function(){t(this).attr("data-"+t.mobile.ns+"cacheVal",this.checked)})},_getInputSet:function(){var e,n,s=this.element[0],o=s.name,r=s.form,a=this.element.parents().last().get(0),l=this.element;return o&&"radio"===this.inputtype&&a&&(e="input[type='radio'][name='"+i(o)+"']",r?((n=r.getAttribute("id"))&&(l=t(e+"[form='"+i(n)+"']",a)),l=t(r).find(e).filter(function(){return this.form===r}).add(l)):l=t(e,a).filter(function(){return!this.form})),l},_updateAll:function(e){var i=this;this._getInputSet().each(function(){var n=t(this);!this.checked&&"checkbox"!==i.inputtype||e||n.trigger("change")}).checkboxradio("refresh")},_reset:function(){this.refresh()},_hasIcon:function(){var e,i,n=t.mobile.controlgroup;return!(n&&(e=this.element.closest(":mobile-controlgroup,"+n.prototype.initSelector)).length>0)||(i=t.data(e[0],"mobile-controlgroup"),"horizontal"!==(i?i.options.type:e.attr("data-"+t.mobile.ns+"type")))},refresh:function(){var e=this.element[0].checked,i=t.mobile.activeBtnClass,n="ui-btn-icon-"+this.options.iconpos,s=[],o=[];this._hasIcon()?(o.push(i),s.push(n)):(o.push(n),(e?s:o).push(i)),e?(s.push(this.checkedClass),o.push(this.uncheckedClass)):(s.push(this.uncheckedClass),o.push(this.checkedClass)),this.widget().toggleClass("ui-state-disabled",this.element.prop("disabled")),this.label.addClass(s.join(" ")).removeClass(o.join(" "))},widget:function(){return this.label.parent()},_setOptions:function(t){var i=this.label,n=this.options,s=this.widget(),o=this._hasIcon();t.disabled!==e&&(this.input.prop("disabled",!!t.disabled),s.toggleClass("ui-state-disabled",!!t.disabled)),t.mini!==e&&s.toggleClass("ui-mini",!!t.mini),t.theme!==e&&i.removeClass("ui-btn-"+n.theme).addClass("ui-btn-"+t.theme),t.wrapperClass!==e&&s.removeClass(n.wrapperClass).addClass(t.wrapperClass),t.iconpos!==e&&o?i.removeClass("ui-btn-icon-"+n.iconpos).addClass("ui-btn-icon-"+t.iconpos):o||i.removeClass("ui-btn-icon-"+n.iconpos),this._super(t)}},t.mobile.behaviors.formReset))}(t),function(t,e){t.widget("mobile.button",{initSelector:"input[type='button'], input[type='submit'], input[type='reset']",options:{theme:null,icon:null,iconpos:"left",iconshadow:!1,corners:!0,shadow:!0,inline:null,mini:null,wrapperClass:null,enhanced:!1},_create:function(){this.element.is(":disabled")&&(this.options.disabled=!0),this.options.enhanced||this._enhance(),t.extend(this,{wrapper:this.element.parent()}),this._on({focus:function(){this.widget().addClass(t.mobile.focusClass)},blur:function(){this.widget().removeClass(t.mobile.focusClass)}}),this.refresh(!0)},_enhance:function(){this.element.wrap(this._button())},_button:function(){var e=this.options,i=this._getIconClasses(this.options);return t("<div class='ui-btn ui-input-btn"+(e.wrapperClass?" "+e.wrapperClass:"")+(e.theme?" ui-btn-"+e.theme:"")+(e.corners?" ui-corner-all":"")+(e.shadow?" ui-shadow":"")+(e.inline?" ui-btn-inline":"")+(e.mini?" ui-mini":"")+(e.disabled?" ui-state-disabled":"")+(i?" "+i:"")+"' >"+this.element.val()+"</div>")},widget:function(){return this.wrapper},_destroy:function(){this.element.insertBefore(this.wrapper),this.wrapper.remove()},_getIconClasses:function(t){return t.icon?"ui-icon-"+t.icon+(t.iconshadow?" ui-shadow-icon":"")+" ui-btn-icon-"+t.iconpos:""},_setOptions:function(i){var n=this.widget();i.theme!==e&&n.removeClass(this.options.theme).addClass("ui-btn-"+i.theme),i.corners!==e&&n.toggleClass("ui-corner-all",i.corners),i.shadow!==e&&n.toggleClass("ui-shadow",i.shadow),i.inline!==e&&n.toggleClass("ui-btn-inline",i.inline),i.mini!==e&&n.toggleClass("ui-mini",i.mini),i.disabled!==e&&(this.element.prop("disabled",i.disabled),n.toggleClass("ui-state-disabled",i.disabled)),(i.icon!==e||i.iconshadow!==e||i.iconpos!==e)&&n.removeClass(this._getIconClasses(this.options)).addClass(this._getIconClasses(t.extend({},this.options,i))),this._super(i)},refresh:function(e){var i,n=this.element.prop("disabled");this.options.icon&&"notext"===this.options.iconpos&&this.element.attr("title")&&this.element.attr("title",this.element.val()),e||(i=this.element.detach(),t(this.wrapper).text(this.element.val()).append(i)),this.options.disabled!==n&&this._setOptions({disabled:n})}})}(t),function(t){var e=t("meta[name=viewport]"),i=e.attr("content"),n=i+",maximum-scale=1, user-scalable=no",s=i+",maximum-scale=10, user-scalable=yes",o=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(i);t.mobile.zoom=t.extend({},{enabled:!o,locked:!1,disable:function(i){o||t.mobile.zoom.locked||(e.attr("content",n),t.mobile.zoom.enabled=!1,t.mobile.zoom.locked=i||!1)},enable:function(i){o||t.mobile.zoom.locked&&!0!==i||(e.attr("content",s),t.mobile.zoom.enabled=!0,t.mobile.zoom.locked=!1)},restore:function(){o||(e.attr("content",i),t.mobile.zoom.enabled=!0)}})}(t),function(t,e){t.widget("mobile.textinput",{initSelector:"input[type='text'],input[type='search'],:jqmData(type='search'),input[type='number'],:jqmData(type='number'),input[type='password'],input[type='email'],input[type='url'],input[type='tel'],textarea,input[type='time'],input[type='date'],input[type='month'],input[type='week'],input[type='datetime'],input[type='datetime-local'],input[type='color'],input:not([type]),input[type='file']",options:{theme:null,corners:!0,mini:!1,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,wrapperClass:"",enhanced:!1},_create:function(){var e=this.options,i=this.element.is("[type='search'], :jqmData(type='search')"),n="TEXTAREA"===this.element[0].tagName,s=this.element.is("[data-"+(t.mobile.ns||"")+"type='range']"),o=(this.element.is("input")||this.element.is("[data-"+(t.mobile.ns||"")+"type='search']"))&&!s;this.element.prop("disabled")&&(e.disabled=!0),t.extend(this,{classes:this._classesFromOptions(),isSearch:i,isTextarea:n,isRange:s,inputNeedsWrap:o}),this._autoCorrect(),e.enhanced||this._enhance(),this._on({focus:"_handleFocus",blur:"_handleBlur"})},refresh:function(){this.setOptions({disabled:this.element.is(":disabled")})},_enhance:function(){var t=[];this.isTextarea&&t.push("ui-input-text"),(this.isTextarea||this.isRange)&&t.push("ui-shadow-inset"),this.inputNeedsWrap?this.element.wrap(this._wrap()):t=t.concat(this.classes),this.element.addClass(t.join(" "))},widget:function(){return this.inputNeedsWrap?this.element.parent():this.element},_classesFromOptions:function(){var t=this.options,e=[];return e.push("ui-body-"+(null===t.theme?"inherit":t.theme)),t.corners&&e.push("ui-corner-all"),t.mini&&e.push("ui-mini"),t.disabled&&e.push("ui-state-disabled"),t.wrapperClass&&e.push(t.wrapperClass),e},_wrap:function(){return t("<div class='"+(this.isSearch?"ui-input-search ":"ui-input-text ")+this.classes.join(" ")+" ui-shadow-inset'></div>")},_autoCorrect:function(){void 0===this.element[0].autocorrect||t.support.touchOverflow||(this.element[0].setAttribute("autocorrect","off"),this.element[0].setAttribute("autocomplete","off"))},_handleBlur:function(){this.widget().removeClass(t.mobile.focusClass),this.options.preventFocusZoom&&t.mobile.zoom.enable(!0)},_handleFocus:function(){this.options.preventFocusZoom&&t.mobile.zoom.disable(!0),this.widget().addClass(t.mobile.focusClass)},_setOptions:function(t){var i=this.widget();this._super(t),(t.disabled!==e||t.mini!==e||t.corners!==e||t.theme!==e||t.wrapperClass!==e)&&(i.removeClass(this.classes.join(" ")),this.classes=this._classesFromOptions(),i.addClass(this.classes.join(" "))),t.disabled!==e&&this.element.prop("disabled",!!t.disabled)},_destroy:function(){this.options.enhanced||(this.inputNeedsWrap&&this.element.unwrap(),this.element.removeClass("ui-input-text "+this.classes.join(" ")))}})}(t),function(t,n){t.widget("mobile.slider",t.extend({initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",widgetEventPrefix:"slide",options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!1},_create:function(){var s,o,r,a,l,h,c,u,d,f,p=this,g=this.element,m=this.options.trackTheme||t.mobile.getAttribute(g[0],"theme"),v=m?" ui-bar-"+m:" ui-bar-inherit",b=this.options.corners||g.jqmData("corners")?" ui-corner-all":"",_=this.options.mini||g.jqmData("mini")?" ui-mini":"",y=g[0].nodeName.toLowerCase(),C="select"===y,x=g.parent().is(":jqmData(role='rangeslider')"),w=C?"ui-slider-switch":"",T=g.attr("id"),S=t("[for='"+T+"']"),O=S.attr("id")||T+"-label",E=C?0:parseFloat(g.attr("min")),k=C?g.find("option").length-1:parseFloat(g.attr("max")),D=e.parseFloat(g.attr("step")||1),A=i.createElement("a"),I=t(A),P=i.createElement("div"),j=t(P),L=!(!this.options.highlight||C)&&function(){var e=i.createElement("div");return e.className="ui-slider-bg "+t.mobile.activeBtnClass,t(e).prependTo(j)}();if(S.attr("id",O),this.isToggleSwitch=C,A.setAttribute("href","#"),P.setAttribute("role","application"),P.className=[this.isToggleSwitch?"ui-slider ui-slider-track ui-shadow-inset ":"ui-slider-track ui-shadow-inset ",w,v,b,_].join(""),A.className="ui-slider-handle",P.appendChild(A),I.attr({role:"slider","aria-valuemin":E,"aria-valuemax":k,"aria-valuenow":this._value(),"aria-valuetext":this._value(),title:this._value(),"aria-labelledby":O}),t.extend(this,{slider:j,handle:I,control:g,type:y,step:D,max:k,min:E,valuebg:L,isRangeslider:x,dragging:!1,beforeStart:null,userModified:!1,mouseMoved:!1}),C){for((c=g.attr("tabindex"))&&I.attr("tabindex",c),g.attr("tabindex","-1").focus(function(){t(this).blur(),I.focus()}),(o=i.createElement("div")).className="ui-slider-inneroffset",r=0,a=P.childNodes.length;a>r;r++)o.appendChild(P.childNodes[r]);for(P.appendChild(o),I.addClass("ui-slider-handle-snapping"),l=0,h=(s=g.find("option")).length;h>l;l++)u=l?"a":"b",d=l?" "+t.mobile.activeBtnClass:"",f=i.createElement("span"),f.className=["ui-slider-label ui-slider-label-",u,d].join(""),f.setAttribute("role","img"),f.appendChild(i.createTextNode(s[l].innerHTML)),t(f).prependTo(j);p._labels=t(".ui-slider-label",j)}g.addClass(C?"ui-slider-switch":"ui-slider-input"),this._on(g,{change:"_controlChange",keyup:"_controlKeyup",blur:"_controlBlur",vmouseup:"_controlVMouseUp"}),j.bind("vmousedown",t.proxy(this._sliderVMouseDown,this)).bind("vclick",!1),this._on(i,{vmousemove:"_preventDocumentDrag"}),this._on(j.add(i),{vmouseup:"_sliderVMouseUp"}),j.insertAfter(g),C||x||(o=this.options.mini?"<div class='ui-slider ui-mini'>":"<div class='ui-slider'>",g.add(j).wrapAll(o)),this._on(this.handle,{vmousedown:"_handleVMouseDown",keydown:"_handleKeydown",keyup:"_handleKeyup"}),this.handle.bind("vclick",!1),this._handleFormReset(),this.refresh(n,n,!0)},_setOptions:function(t){t.theme!==n&&this._setTheme(t.theme),t.trackTheme!==n&&this._setTrackTheme(t.trackTheme),t.corners!==n&&this._setCorners(t.corners),t.mini!==n&&this._setMini(t.mini),t.highlight!==n&&this._setHighlight(t.highlight),t.disabled!==n&&this._setDisabled(t.disabled),this._super(t)},_controlChange:function(t){return!1!==this._trigger("controlchange",t)&&void(this.mouseMoved||this.refresh(this._value(),!0))},_controlKeyup:function(){this.refresh(this._value(),!0,!0)},_controlBlur:function(){this.refresh(this._value(),!0)},_controlVMouseUp:function(){this._checkedRefresh()},_handleVMouseDown:function(){this.handle.focus()},_handleKeydown:function(e){var i=this._value();if(!this.options.disabled){switch(e.keyCode){case t.mobile.keyCode.HOME:case t.mobile.keyCode.END:case t.mobile.keyCode.PAGE_UP:case t.mobile.keyCode.PAGE_DOWN:case t.mobile.keyCode.UP:case t.mobile.keyCode.RIGHT:case t.mobile.keyCode.DOWN:case t.mobile.keyCode.LEFT:e.preventDefault(),this._keySliding||(this._keySliding=!0,this.handle.addClass("ui-state-active"))}switch(e.keyCode){case t.mobile.keyCode.HOME:this.refresh(this.min);break;case t.mobile.keyCode.END:this.refresh(this.max);break;case t.mobile.keyCode.PAGE_UP:case t.mobile.keyCode.UP:case t.mobile.keyCode.RIGHT:this.refresh(i+this.step);break;case t.mobile.keyCode.PAGE_DOWN:case t.mobile.keyCode.DOWN:case t.mobile.keyCode.LEFT:this.refresh(i-this.step)}}},_handleKeyup:function(){this._keySliding&&(this._keySliding=!1,this.handle.removeClass("ui-state-active"))},_sliderVMouseDown:function(t){return!(this.options.disabled||1!==t.which&&0!==t.which&&t.which!==n)&&(!1!==this._trigger("beforestart",t)&&(this.dragging=!0,this.userModified=!1,this.mouseMoved=!1,this.isToggleSwitch&&(this.beforeStart=this.element[0].selectedIndex),this.refresh(t),this._trigger("start"),!1))},_sliderVMouseUp:function(){return this.dragging?(this.dragging=!1,this.isToggleSwitch&&(this.handle.addClass("ui-slider-handle-snapping"),this.refresh(this.mouseMoved?this.userModified?0===this.beforeStart?1:0:this.beforeStart:0===this.beforeStart?1:0)),this.mouseMoved=!1,this._trigger("stop"),!1):void 0},_preventDocumentDrag:function(t){return!1!==this._trigger("drag",t)&&(this.dragging&&!this.options.disabled?(this.mouseMoved=!0,this.isToggleSwitch&&this.handle.removeClass("ui-slider-handle-snapping"),this.refresh(t),this.userModified=this.beforeStart!==this.element[0].selectedIndex,!1):void 0)},_checkedRefresh:function(){this.value!==this._value()&&this.refresh(this._value())},_value:function(){return this.isToggleSwitch?this.element[0].selectedIndex:parseFloat(this.element.val())},_reset:function(){this.refresh(n,!1,!0)},refresh:function(e,n,s){var o,r,a,l,h,c,u,d,f,p,g,m,v,b,_,y,C,x,w,T,S=this,O=t.mobile.getAttribute(this.element[0],"theme"),E=this.options.theme||O,k=E?" ui-btn-"+E:"",D=this.options.trackTheme||O,A=D?" ui-bar-"+D:" ui-bar-inherit",I=this.options.corners?" ui-corner-all":"",P=this.options.mini?" ui-mini":"";if(S.slider[0].className=[this.isToggleSwitch?"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset":"ui-slider-track ui-shadow-inset",A,I,P].join(""),(this.options.disabled||this.element.prop("disabled"))&&this.disable(),this.value=this._value(),this.options.highlight&&!this.isToggleSwitch&&0===this.slider.find(".ui-slider-bg").length&&(this.valuebg=function(){var e=i.createElement("div");return e.className="ui-slider-bg "+t.mobile.activeBtnClass,t(e).prependTo(S.slider)}()),this.handle.addClass("ui-btn"+k+" ui-shadow"),u=this.element,d=!this.isToggleSwitch,f=d?[]:u.find("option"),p=d?parseFloat(u.attr("min")):0,g=d?parseFloat(u.attr("max")):f.length-1,m=d&&parseFloat(u.attr("step"))>0?parseFloat(u.attr("step")):1,"object"==typeof e){if(a=e,l=8,o=this.slider.offset().left,r=this.slider.width(),h=r/((g-p)/m),!this.dragging||a.pageX<o-l||a.pageX>o+r+l)return;c=h>1?(a.pageX-o)/r*100:Math.round((a.pageX-o)/r*100)}else null==e&&(e=d?parseFloat(u.val()||0):u[0].selectedIndex),c=(parseFloat(e)-p)/(g-p)*100;if(!isNaN(c)&&(v=c/100*(g-p)+p,b=(v-p)%m,_=v-b,2*Math.abs(b)>=m&&(_+=b>0?m:-m),y=100/((g-p)/m),v=parseFloat(_.toFixed(5)),void 0===h&&(h=r/((g-p)/m)),h>1&&d&&(c=(v-p)*y*(1/m)),0>c&&(c=0),c>100&&(c=100),p>v&&(v=p),v>g&&(v=g),this.handle.css("left",c+"%"),this.handle[0].setAttribute("aria-valuenow",d?v:f.eq(v).attr("value")),this.handle[0].setAttribute("aria-valuetext",d?v:f.eq(v).getEncodedText()),this.handle[0].setAttribute("title",d?v:f.eq(v).getEncodedText()),this.valuebg&&this.valuebg.css("width",c+"%"),this._labels&&(C=this.handle.width()/this.slider.width()*100,x=c&&C+(100-C)*c/100,w=100===c?0:Math.min(C+100-x,100),this._labels.each(function(){var e=t(this).hasClass("ui-slider-label-a");t(this).width((e?x:w)+"%")})),!s)){if(T=!1,d?(T=parseFloat(u.val())!==v,u.val(v)):(T=u[0].selectedIndex!==v,u[0].selectedIndex=v),!1===this._trigger("beforechange",e))return!1;!n&&T&&u.trigger("change")}},_setHighlight:function(t){(t=!!t)?(this.options.highlight=!!t,this.refresh()):this.valuebg&&(this.valuebg.remove(),this.valuebg=!1)},_setTheme:function(t){this.handle.removeClass("ui-btn-"+this.options.theme).addClass("ui-btn-"+t);var e=this.options.theme?this.options.theme:"inherit",i=t||"inherit";this.control.removeClass("ui-body-"+e).addClass("ui-body-"+i)},_setTrackTheme:function(t){var e=this.options.trackTheme?this.options.trackTheme:"inherit",i=t||"inherit";this.slider.removeClass("ui-body-"+e).addClass("ui-body-"+i)},_setMini:function(t){t=!!t,this.isToggleSwitch||this.isRangeslider||(this.slider.parent().toggleClass("ui-mini",t),this.element.toggleClass("ui-mini",t)),this.slider.toggleClass("ui-mini",t)},_setCorners:function(t){this.slider.toggleClass("ui-corner-all",t),this.isToggleSwitch||this.control.toggleClass("ui-corner-all",t)},_setDisabled:function(t){t=!!t,this.element.prop("disabled",t),this.slider.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.toggleClass("ui-state-disabled",t)}},t.mobile.behaviors.formReset))}(t),function(t){function e(){return i||(i=t("<div></div>",{class:"ui-slider-popup ui-shadow ui-corner-all"})),i.clone()}var i;t.widget("mobile.slider",t.mobile.slider,{options:{popupEnabled:!1,showValue:!1},_create:function(){this._super(),t.extend(this,{_currentValue:null,_popup:null,_popupVisible:!1}),this._setOption("popupEnabled",this.options.popupEnabled),this._on(this.handle,{vmousedown:"_showPopup"}),this._on(this.slider.add(this.document),{vmouseup:"_hidePopup"}),this._refresh()},_positionPopup:function(){var t=this.handle.offset();this._popup.offset({left:t.left+(this.handle.width()-this._popup.width())/2,top:t.top-this._popup.outerHeight()-5})},_setOption:function(t,i){this._super(t,i),"showValue"===t?this.handle.html(i&&!this.options.mini?this._value():""):"popupEnabled"===t&&i&&!this._popup&&(this._popup=e().addClass("ui-body-"+(this.options.theme||"a")).hide().insertBefore(this.element))},refresh:function(){this._super.apply(this,arguments),this._refresh()},_refresh:function(){var t,e=this.options;e.popupEnabled&&this.handle.removeAttr("title"),(t=this._value())!==this._currentValue&&(this._currentValue=t,e.popupEnabled&&this._popup&&(this._positionPopup(),this._popup.html(t)),e.showValue&&!this.options.mini&&this.handle.html(t))},_showPopup:function(){this.options.popupEnabled&&!this._popupVisible&&(this.handle.html(""),this._popup.show(),this._positionPopup(),this._popupVisible=!0)},_hidePopup:function(){var t=this.options;t.popupEnabled&&this._popupVisible&&(t.showValue&&!t.mini&&this.handle.html(this._value()),this._popup.hide(),this._popupVisible=!1)}})}(t),function(t,e){t.widget("mobile.flipswitch",t.extend({options:{onText:"On",offText:"Off",theme:null,enhanced:!1,wrapperClass:null,corners:!0,mini:!1},_create:function(){this.options.enhanced?t.extend(this,{flipswitch:this.element.parent(),on:this.element.find(".ui-flipswitch-on").eq(0),off:this.element.find(".ui-flipswitch-off").eq(0),type:this.element.get(0).tagName}):this._enhance(),this._handleFormReset(),this._originalTabIndex=this.element.attr("tabindex"),null!=this._originalTabIndex&&this.on.attr("tabindex",this._originalTabIndex),this.element.attr("tabindex","-1"),this._on({focus:"_handleInputFocus"}),this.element.is(":disabled")&&this._setOptions({disabled:!0}),this._on(this.flipswitch,{click:"_toggle",swipeleft:"_left",swiperight:"_right"}),this._on(this.on,{keydown:"_keydown"}),this._on({change:"refresh"})},_handleInputFocus:function(){this.on.focus()},widget:function(){return this.flipswitch},_left:function(){this.flipswitch.removeClass("ui-flipswitch-active"),"SELECT"===this.type?this.element.get(0).selectedIndex=0:this.element.prop("checked",!1),this.element.trigger("change")},_right:function(){this.flipswitch.addClass("ui-flipswitch-active"),"SELECT"===this.type?this.element.get(0).selectedIndex=1:this.element.prop("checked",!0),this.element.trigger("change")},_enhance:function(){var e=t("<div>"),i=this.options,n=this.element,s=i.theme?i.theme:"inherit",o=t("<a></a>",{href:"#"}),r=t("<span></span>"),a=n.get(0).tagName,l="INPUT"===a?i.onText:n.find("option").eq(1).text(),h="INPUT"===a?i.offText:n.find("option").eq(0).text();o.addClass("ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit").text(l),r.addClass("ui-flipswitch-off").text(h),e.addClass("ui-flipswitch ui-shadow-inset ui-bar-"+s+" "+(i.wrapperClass?i.wrapperClass:"")+" "+(n.is(":checked")||n.find("option").eq(1).is(":selected")?"ui-flipswitch-active":"")+(n.is(":disabled")?" ui-state-disabled":"")+(i.corners?" ui-corner-all":"")+(i.mini?" ui-mini":"")).append(o,r),n.addClass("ui-flipswitch-input").after(e).appendTo(e),t.extend(this,{flipswitch:e,on:o,off:r,type:a})},_reset:function(){this.refresh()},refresh:function(){var t,e=this.flipswitch.hasClass("ui-flipswitch-active")?"_right":"_left";(t="SELECT"===this.type?this.element.get(0).selectedIndex>0?"_right":"_left":this.element.prop("checked")?"_right":"_left")!==e&&this[t]()},_toggle:function(){this[this.flipswitch.hasClass("ui-flipswitch-active")?"_left":"_right"]()},_keydown:function(e){e.which===t.mobile.keyCode.LEFT?this._left():e.which===t.mobile.keyCode.RIGHT?this._right():e.which===t.mobile.keyCode.SPACE&&(this._toggle(),e.preventDefault())},_setOptions:function(t){if(t.theme!==e){var i=t.theme?t.theme:"inherit",n=t.theme?t.theme:"inherit";this.widget().removeClass("ui-bar-"+i).addClass("ui-bar-"+n)}t.onText!==e&&this.on.text(t.onText),t.offText!==e&&this.off.text(t.offText),t.disabled!==e&&this.widget().toggleClass("ui-state-disabled",t.disabled),t.mini!==e&&this.widget().toggleClass("ui-mini",t.mini),t.corners!==e&&this.widget().toggleClass("ui-corner-all",t.corners),this._super(t)},_destroy:function(){this.options.enhanced||(null!=this._originalTabIndex?this.element.attr("tabindex",this._originalTabIndex):this.element.removeAttr("tabindex"),this.on.remove(),this.off.remove(),this.element.unwrap(),this.flipswitch.remove(),this.removeClass("ui-flipswitch-input"))}},t.mobile.behaviors.formReset))}(t),function(t,e){t.widget("mobile.rangeslider",t.extend({options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!0},_create:function(){var e=this.element,i=this.options.mini?"ui-rangeslider ui-mini":"ui-rangeslider",n=e.find("input").first(),s=e.find("input").last(),o=e.find("label").first(),r=t.data(n.get(0),"mobile-slider")||t.data(n.slider().get(0),"mobile-slider"),a=t.data(s.get(0),"mobile-slider")||t.data(s.slider().get(0),"mobile-slider"),l=r.slider,h=a.slider,c=r.handle,u=t("<div class='ui-rangeslider-sliders' />").appendTo(e);n.addClass("ui-rangeslider-first"),s.addClass("ui-rangeslider-last"),e.addClass(i),l.appendTo(u),h.appendTo(u),o.insertBefore(e),c.prependTo(h),t.extend(this,{_inputFirst:n,_inputLast:s,_sliderFirst:l,_sliderLast:h,_label:o,_targetVal:null,_sliderTarget:!1,_sliders:u,_proxy:!1}),this.refresh(),this._on(this.element.find("input.ui-slider-input"),{slidebeforestart:"_slidebeforestart",slidestop:"_slidestop",slidedrag:"_slidedrag",slidebeforechange:"_change",blur:"_change",keyup:"_change"}),this._on({mousedown:"_change"}),this._on(this.element.closest("form"),{reset:"_handleReset"}),this._on(c,{vmousedown:"_dragFirstHandle"})},_handleReset:function(){var t=this;setTimeout(function(){t._updateHighlight()},0)},_dragFirstHandle:function(e){return t.data(this._inputFirst.get(0),"mobile-slider").dragging=!0,t.data(this._inputFirst.get(0),"mobile-slider").refresh(e),t.data(this._inputFirst.get(0),"mobile-slider")._trigger("start"),!1},_slidedrag:function(e){var i=t(e.target).is(this._inputFirst),n=i?this._inputLast:this._inputFirst;return this._sliderTarget=!1,"first"===this._proxy&&i||"last"===this._proxy&&!i?(t.data(n.get(0),"mobile-slider").dragging=!0,t.data(n.get(0),"mobile-slider").refresh(e),!1):void 0},_slidestop:function(e){var i=t(e.target).is(this._inputFirst);this._proxy=!1,this.element.find("input").trigger("vmouseup"),this._sliderFirst.css("z-index",i?1:"")},_slidebeforestart:function(e){this._sliderTarget=!1,t(e.originalEvent.target).hasClass("ui-slider-track")&&(this._sliderTarget=!0,this._targetVal=t(e.target).val())},_setOptions:function(t){t.theme!==e&&this._setTheme(t.theme),t.trackTheme!==e&&this._setTrackTheme(t.trackTheme),t.mini!==e&&this._setMini(t.mini),t.highlight!==e&&this._setHighlight(t.highlight),t.disabled!==e&&this._setDisabled(t.disabled),this._super(t),this.refresh()},refresh:function(){var t=this.element,e=this.options;(this._inputFirst.is(":disabled")||this._inputLast.is(":disabled"))&&(this.options.disabled=!0),t.find("input").slider({theme:e.theme,trackTheme:e.trackTheme,disabled:e.disabled,corners:e.corners,mini:e.mini,highlight:e.highlight}).slider("refresh"),this._updateHighlight()},_change:function(e){if("keyup"===e.type)return this._updateHighlight(),!1;var i=this,n=parseFloat(this._inputFirst.val(),10),s=parseFloat(this._inputLast.val(),10),o=t(e.target).hasClass("ui-rangeslider-first"),r=o?this._inputFirst:this._inputLast,a=o?this._inputLast:this._inputFirst;if(this._inputFirst.val()>this._inputLast.val()&&"mousedown"===e.type&&!t(e.target).hasClass("ui-slider-handle"))r.blur();else if("mousedown"===e.type)return;return n>s&&!this._sliderTarget?(r.val(o?s:n).slider("refresh"),this._trigger("normalize")):n>s&&(r.val(this._targetVal).slider("refresh"),setTimeout(function(){a.val(o?n:s).slider("refresh"),t.data(a.get(0),"mobile-slider").handle.focus(),i._sliderFirst.css("z-index",o?"":1),i._trigger("normalize")},0),this._proxy=o?"first":"last"),n===s?(t.data(r.get(0),"mobile-slider").handle.css("z-index",1),t.data(a.get(0),"mobile-slider").handle.css("z-index",0)):(t.data(a.get(0),"mobile-slider").handle.css("z-index",""),t.data(r.get(0),"mobile-slider").handle.css("z-index","")),this._updateHighlight(),!(n>=s)&&void 0},_updateHighlight:function(){var e=parseInt(t.data(this._inputFirst.get(0),"mobile-slider").handle.get(0).style.left,10),i=parseInt(t.data(this._inputLast.get(0),"mobile-slider").handle.get(0).style.left,10)-e;this.element.find(".ui-slider-bg").css({"margin-left":e+"%",width:i+"%"})},_setTheme:function(t){this._inputFirst.slider("option","theme",t),this._inputLast.slider("option","theme",t)},_setTrackTheme:function(t){this._inputFirst.slider("option","trackTheme",t),this._inputLast.slider("option","trackTheme",t)},_setMini:function(t){this._inputFirst.slider("option","mini",t),this._inputLast.slider("option","mini",t),this.element.toggleClass("ui-mini",!!t)},_setHighlight:function(t){this._inputFirst.slider("option","highlight",t),this._inputLast.slider("option","highlight",t)},_setDisabled:function(t){this._inputFirst.prop("disabled",t),this._inputLast.prop("disabled",t)},_destroy:function(){this._label.prependTo(this.element),this.element.removeClass("ui-rangeslider ui-mini"),this._inputFirst.after(this._sliderFirst),this._inputLast.after(this._sliderLast),this._sliders.remove(),this.element.find("input").removeClass("ui-rangeslider-first ui-rangeslider-last").slider("destroy")}},t.mobile.behaviors.formReset))}(t),function(t,e){t.widget("mobile.textinput",t.mobile.textinput,{options:{clearBtn:!1,clearBtnText:"Clear text"},_create:function(){this._super(),this.isSearch&&(this.options.clearBtn=!0),this.options.clearBtn&&this.inputNeedsWrap&&this._addClearBtn()},clearButton:function(){return t("<a href='#' tabindex='-1' aria-hidden='true' class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'></a>").attr("title",this.options.clearBtnText).text(this.options.clearBtnText)},_clearBtnClick:function(t){this.element.val("").focus().trigger("change"),this._clearBtn.addClass("ui-input-clear-hidden"),t.preventDefault()},_addClearBtn:function(){this.options.enhanced||this._enhanceClear(),t.extend(this,{_clearBtn:this.widget().find("a.ui-input-clear")}),this._bindClearEvents(),this._toggleClear()},_enhanceClear:function(){this.clearButton().appendTo(this.widget()),this.widget().addClass("ui-input-has-clear")},_bindClearEvents:function(){this._on(this._clearBtn,{click:"_clearBtnClick"}),this._on({keyup:"_toggleClear",change:"_toggleClear",input:"_toggleClear",focus:"_toggleClear",blur:"_toggleClear",cut:"_toggleClear",paste:"_toggleClear"})},_unbindClear:function(){this._off(this._clearBtn,"click"),this._off(this.element,"keyup change input focus blur cut paste")},_setOptions:function(t){this._super(t),t.clearBtn===e||this.element.is("textarea, :jqmData(type='range')")||(t.clearBtn?this._addClearBtn():this._destroyClear()),t.clearBtnText!==e&&this._clearBtn!==e&&this._clearBtn.text(t.clearBtnText).attr("title",t.clearBtnText)},_toggleClear:function(){this._delay("_toggleClearClass",0)},_toggleClearClass:function(){this._clearBtn.toggleClass("ui-input-clear-hidden",!this.element.val())},_destroyClear:function(){this.widget().removeClass("ui-input-has-clear"),this._unbindClear(),this._clearBtn.remove()},_destroy:function(){this._super(),this.options.clearBtn&&this._destroyClear()}})}(t),function(t,e){t.widget("mobile.textinput",t.mobile.textinput,{options:{autogrow:!0,keyupTimeoutBuffer:100},_create:function(){this._super(),this.options.autogrow&&this.isTextarea&&this._autogrow()},_autogrow:function(){this.element.addClass("ui-textinput-autogrow"),this._on({keyup:"_timeout",change:"_timeout",input:"_timeout",paste:"_timeout"}),this._on(!0,this.document,{pageshow:"_handleShow",popupbeforeposition:"_handleShow",updatelayout:"_handleShow",panelopen:"_handleShow"})},_handleShow:function(e){t.contains(e.target,this.element[0])&&this.element.is(":visible")&&("popupbeforeposition"!==e.type&&this.element.addClass("ui-textinput-autogrow-resize").animationComplete(t.proxy(function(){this.element.removeClass("ui-textinput-autogrow-resize")},this),"transition"),this._prepareHeightUpdate())},_unbindAutogrow:function(){this.element.removeClass("ui-textinput-autogrow"),this._off(this.element,"keyup change input paste"),this._off(this.document,"pageshow popupbeforeposition updatelayout panelopen")},keyupTimeout:null,_prepareHeightUpdate:function(t){this.keyupTimeout&&clearTimeout(this.keyupTimeout),t===e?this._updateHeight():this.keyupTimeout=this._delay("_updateHeight",t)},_timeout:function(){this._prepareHeightUpdate(this.options.keyupTimeoutBuffer)},_updateHeight:function(){var t,e,i,n,s,o,r=this.window.scrollTop();this.keyupTimeout=0,"onpage"in this.element[0]||this.element.css({height:0,"min-height":0,"max-height":0}),n=this.element[0].scrollHeight,s=this.element[0].clientHeight,o=n+(parseFloat(this.element.css("border-top-width"))+parseFloat(this.element.css("border-bottom-width")))+15,0===s&&(t=parseFloat(this.element.css("padding-top")),e=parseFloat(this.element.css("padding-bottom")),i=t+e,o+=i),this.element.css({height:o,"min-height":"","max-height":""}),this.window.scrollTop(r)},refresh:function(){this.options.autogrow&&this.isTextarea&&this._updateHeight()},_setOptions:function(t){this._super(t),t.autogrow!==e&&this.isTextarea&&(t.autogrow?this._autogrow():this._unbindAutogrow())}})}(t),function(t){t.widget("mobile.selectmenu",t.extend({initSelector:"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",options:{theme:null,icon:"carat-d",iconpos:"right",inline:!1,corners:!0,shadow:!0,iconshadow:!1,overlayTheme:null,dividerTheme:null,hidePlaceholderMenuItems:!0,closeText:"Close",nativeMenu:!0,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,mini:!1},_button:function(){return t("<div/>")},_setDisabled:function(t){return this.element.attr("disabled",t),this.button.attr("aria-disabled",t),this._setOption("disabled",t)},_focusButton:function(){var t=this;setTimeout(function(){t.button.focus()},40)},_selectOptions:function(){return this.select.find("option")},_preExtension:function(){var e=this.options.inline||this.element.jqmData("inline"),i=this.options.mini||this.element.jqmData("mini"),n="";~this.element[0].className.indexOf("ui-btn-left")&&(n=" ui-btn-left"),~this.element[0].className.indexOf("ui-btn-right")&&(n=" ui-btn-right"),e&&(n+=" ui-btn-inline"),i&&(n+=" ui-mini"),this.select=this.element.removeClass("ui-btn-left ui-btn-right").wrap("<div class='ui-select"+n+"'>"),this.selectId=this.select.attr("id")||"select-"+this.uuid,this.buttonId=this.selectId+"-button",this.label=t("label[for='"+this.selectId+"']"),this.isMultiple=this.select[0].multiple},_destroy:function(){var t=this.element.parents(".ui-select");t.length>0&&(t.is(".ui-btn-left, .ui-btn-right")&&this.element.addClass(t.hasClass("ui-btn-left")?"ui-btn-left":"ui-btn-right"),this.element.insertAfter(t),t.remove())},_create:function(){this._preExtension(),this.button=this._button();var i=this,n=this.options,s=!!n.icon&&(n.iconpos||this.select.jqmData("iconpos")),o=this.button.insertBefore(this.select).attr("id",this.buttonId).addClass("ui-btn"+(n.icon?" ui-icon-"+n.icon+" ui-btn-icon-"+s+(n.iconshadow?" ui-shadow-icon":""):"")+(n.theme?" ui-btn-"+n.theme:"")+(n.corners?" ui-corner-all":"")+(n.shadow?" ui-shadow":""));this.setButtonText(),n.nativeMenu&&e.opera&&e.opera.version&&o.addClass("ui-select-nativeonly"),this.isMultiple&&(this.buttonCount=t("<span>").addClass("ui-li-count ui-body-inherit").hide().appendTo(o.addClass("ui-li-has-count"))),(n.disabled||this.element.attr("disabled"))&&this.disable(),this.select.change(function(){i.refresh(),n.nativeMenu&&i._delay(function(){i.select.blur()})}),this._handleFormReset(),this._on(this.button,{keydown:"_handleKeydown"}),this.build()},build:function(){var e=this;this.select.appendTo(e.button).bind("vmousedown",function(){e.button.addClass(t.mobile.activeBtnClass)}).bind("focus",function(){e.button.addClass(t.mobile.focusClass)}).bind("blur",function(){e.button.removeClass(t.mobile.focusClass)}).bind("focus vmouseover",function(){e.button.trigger("vmouseover")}).bind("vmousemove",function(){e.button.removeClass(t.mobile.activeBtnClass)}).bind("change blur vmouseout",function(){e.button.trigger("vmouseout").removeClass(t.mobile.activeBtnClass)}),e.button.bind("vmousedown",function(){e.options.preventFocusZoom&&t.mobile.zoom.disable(!0)}),e.label.bind("click focus",function(){e.options.preventFocusZoom&&t.mobile.zoom.disable(!0)}),e.select.bind("focus",function(){e.options.preventFocusZoom&&t.mobile.zoom.disable(!0)}),e.button.bind("mouseup",function(){e.options.preventFocusZoom&&setTimeout(function(){t.mobile.zoom.enable(!0)},0)}),e.select.bind("blur",function(){e.options.preventFocusZoom&&t.mobile.zoom.enable(!0)})},selected:function(){return this._selectOptions().filter(":selected")},selectedIndices:function(){var t=this;return this.selected().map(function(){return t._selectOptions().index(this)}).get()},setButtonText:function(){var e=this,n=this.selected(),s=this.placeholder,o=t(i.createElement("span"));this.button.children("span").not(".ui-li-count").remove().end().end().prepend((s=n.length?n.map(function(){return t(this).text()}).get().join(", "):e.placeholder,s?o.text(s):o.html("&#160;"),o.addClass(e.select.attr("class")).addClass(n.attr("class")).removeClass("ui-screen-hidden")))},setButtonCount:function(){var t=this.selected();this.isMultiple&&this.buttonCount[t.length>1?"show":"hide"]().text(t.length)},_handleKeydown:function(){this._delay("_refreshButton")},_reset:function(){this.refresh()},_refreshButton:function(){this.setButtonText(),this.setButtonCount()},refresh:function(){this._refreshButton()},open:t.noop,close:t.noop,disable:function(){this._setDisabled(!0),this.button.addClass("ui-state-disabled")},enable:function(){this._setDisabled(!1),this.button.removeClass("ui-state-disabled")}},t.mobile.behaviors.formReset))}(t),function(t){t.mobile.links=function(e){t(e).find("a").jqmEnhanceable().filter(":jqmData(rel='popup')[href][href!='']").each(function(){var t=this,e=t.getAttribute("href").substring(1);e&&(t.setAttribute("aria-haspopup",!0),t.setAttribute("aria-owns",e),t.setAttribute("aria-expanded",!1))}).end().not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link")}}(t),function(t,i){function n(t,e,i,n){return e>t?i+(t-e)/2:Math.min(Math.max(i,n-e/2),i+t-e)}function s(t){return{x:t.scrollLeft(),y:t.scrollTop(),cx:t[0].innerWidth||t.width(),cy:t[0].innerHeight||t.height()}}t.widget("mobile.popup",{options:{wrapperClass:null,theme:null,overlayTheme:null,shadow:!0,corners:!0,transition:"none",positionTo:"origin",tolerance:null,closeLinkSelector:"a:jqmData(rel='back')",closeLinkEvents:"click.popup",navigateEvents:"navigate.popup",closeEvents:"navigate.popup pagebeforechange.popup",dismissible:!0,enhanced:!1,history:!t.mobile.browser.oldIE},_handleDocumentVmousedown:function(e){this._isOpen&&t.contains(this._ui.container[0],e.target)&&this._ignoreResizeEvents()},_create:function(){var e=this.element,i=e.attr("id"),n=this.options;n.history=n.history&&t.mobile.ajaxEnabled&&t.mobile.hashListeningEnabled,this._on(this.document,{vmousedown:"_handleDocumentVmousedown"}),t.extend(this,{_scrollTop:0,_page:e.closest(".ui-page"),_ui:null,_fallbackTransition:"",_currentTransition:!1,_prerequisites:null,_isOpen:!1,_tolerance:null,_resizeData:null,_ignoreResizeTo:0,_orientationchangeInProgress:!1}),0===this._page.length&&(this._page=t("body")),n.enhanced?this._ui={container:e.parent(),screen:e.parent().prev(),placeholder:t(this.document[0].getElementById(i+"-placeholder"))}:(this._ui=this._enhance(e,i),this._applyTransition(n.transition)),this._setTolerance(n.tolerance)._ui.focusElement=this._ui.container,this._on(this._ui.screen,{vclick:"_eatEventAndClose"}),this._on(this.window,{orientationchange:t.proxy(this,"_handleWindowOrientationchange"),resize:t.proxy(this,"_handleWindowResize"),keyup:t.proxy(this,"_handleWindowKeyUp")}),this._on(this.document,{focusin:"_handleDocumentFocusIn"})},_enhance:function(e,i){var n=this.options,s=n.wrapperClass,o={screen:t("<div class='ui-screen-hidden ui-popup-screen "+this._themeClassFromOption("ui-overlay-",n.overlayTheme)+"'></div>"),placeholder:t("<div style='display: none;'>\x3c!-- placeholder --\x3e</div>"),container:t("<div class='ui-popup-container ui-popup-hidden ui-popup-truncate"+(s?" "+s:"")+"'></div>")},r=this.document[0].createDocumentFragment();return r.appendChild(o.screen[0]),r.appendChild(o.container[0]),i&&(o.screen.attr("id",i+"-screen"),o.container.attr("id",i+"-popup"),o.placeholder.attr("id",i+"-placeholder").html("\x3c!-- placeholder for "+i+" --\x3e")),this._page[0].appendChild(r),o.placeholder.insertAfter(e),e.detach().addClass("ui-popup "+this._themeClassFromOption("ui-body-",n.theme)+" "+(n.shadow?"ui-overlay-shadow ":"")+(n.corners?"ui-corner-all ":"")).appendTo(o.container),o},_eatEventAndClose:function(t){return t.preventDefault(),t.stopImmediatePropagation(),this.options.dismissible&&this.close(),!1},_resizeScreen:function(){var t=this._ui.screen,e=this._ui.container.outerHeight(!0),i=t.removeAttr("style").height(),n=this.document.height()-1;n>i?t.height(n):e>i&&t.height(e)},_handleWindowKeyUp:function(e){return this._isOpen&&e.keyCode===t.mobile.keyCode.ESCAPE?this._eatEventAndClose(e):void 0},_expectResizeEvent:function(){var t=s(this.window);if(this._resizeData){if(t.x===this._resizeData.windowCoordinates.x&&t.y===this._resizeData.windowCoordinates.y&&t.cx===this._resizeData.windowCoordinates.cx&&t.cy===this._resizeData.windowCoordinates.cy)return!1;clearTimeout(this._resizeData.timeoutId)}return this._resizeData={timeoutId:this._delay("_resizeTimeout",200),windowCoordinates:t},!0},_resizeTimeout:function(){this._isOpen?this._expectResizeEvent()||(this._ui.container.hasClass("ui-popup-hidden")&&(this._ui.container.removeClass("ui-popup-hidden ui-popup-truncate"),this.reposition({positionTo:"window"}),this._ignoreResizeEvents()),this._resizeScreen(),this._resizeData=null,this._orientationchangeInProgress=!1):(this._resizeData=null,this._orientationchangeInProgress=!1)},_stopIgnoringResizeEvents:function(){this._ignoreResizeTo=0},_ignoreResizeEvents:function(){this._ignoreResizeTo&&clearTimeout(this._ignoreResizeTo),this._ignoreResizeTo=this._delay("_stopIgnoringResizeEvents",1e3)},_handleWindowResize:function(){this._isOpen&&0===this._ignoreResizeTo&&(!this._expectResizeEvent()&&!this._orientationchangeInProgress||this._ui.container.hasClass("ui-popup-hidden")||this._ui.container.addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style"))},_handleWindowOrientationchange:function(){!this._orientationchangeInProgress&&this._isOpen&&0===this._ignoreResizeTo&&(this._expectResizeEvent(),this._orientationchangeInProgress=!0)},_handleDocumentFocusIn:function(e){var i,n=e.target,s=this._ui;if(this._isOpen){if(n!==s.container[0]){if(i=t(n),!t.contains(s.container[0],n))return t(this.document[0].activeElement).one("focus",t.proxy(function(){this._safelyBlur(n)},this)),s.focusElement.focus(),e.preventDefault(),e.stopImmediatePropagation(),!1;s.focusElement[0]===s.container[0]&&(s.focusElement=i)}this._ignoreResizeEvents()}},_themeClassFromOption:function(t,e){return e?"none"===e?"":t+e:t+"inherit"},_applyTransition:function(e){return e&&(this._ui.container.removeClass(this._fallbackTransition),"none"!==e&&(this._fallbackTransition=t.mobile._maybeDegradeTransition(e),"none"===this._fallbackTransition&&(this._fallbackTransition=""),this._ui.container.addClass(this._fallbackTransition))),this},_setOptions:function(t){var e=this.options,n=this.element,s=this._ui.screen;return t.wrapperClass!==i&&this._ui.container.removeClass(e.wrapperClass).addClass(t.wrapperClass),t.theme!==i&&n.removeClass(this._themeClassFromOption("ui-body-",e.theme)).addClass(this._themeClassFromOption("ui-body-",t.theme)),t.overlayTheme!==i&&(s.removeClass(this._themeClassFromOption("ui-overlay-",e.overlayTheme)).addClass(this._themeClassFromOption("ui-overlay-",t.overlayTheme)),this._isOpen&&s.addClass("in")),t.shadow!==i&&n.toggleClass("ui-overlay-shadow",t.shadow),t.corners!==i&&n.toggleClass("ui-corner-all",t.corners),t.transition!==i&&(this._currentTransition||this._applyTransition(t.transition)),t.tolerance!==i&&this._setTolerance(t.tolerance),t.disabled!==i&&t.disabled&&this.close(),this._super(t)},_setTolerance:function(e){var n,s={t:30,r:15,b:30,l:15};if(e!==i)switch(n=String(e).split(","),t.each(n,function(t,e){n[t]=parseInt(e,10)}),n.length){case 1:isNaN(n[0])||(s.t=s.r=s.b=s.l=n[0]);break;case 2:isNaN(n[0])||(s.t=s.b=n[0]),isNaN(n[1])||(s.l=s.r=n[1]);break;case 4:isNaN(n[0])||(s.t=n[0]),isNaN(n[1])||(s.r=n[1]),isNaN(n[2])||(s.b=n[2]),isNaN(n[3])||(s.l=n[3])}return this._tolerance=s,this},_clampPopupWidth:function(t){var e,i=s(this.window),n={x:this._tolerance.l,y:i.y+this._tolerance.t,cx:i.cx-this._tolerance.l-this._tolerance.r,cy:i.cy-this._tolerance.t-this._tolerance.b};return t||this._ui.container.css("max-width",n.cx),e={cx:this._ui.container.outerWidth(!0),cy:this._ui.container.outerHeight(!0)},{rc:n,menuSize:e}},_calculateFinalLocation:function(t,e){var i,s=e.rc,o=e.menuSize;return i={left:n(s.cx,o.cx,s.x,t.x),top:n(s.cy,o.cy,s.y,t.y)},i.top=Math.max(0,i.top),i.top-=Math.min(i.top,Math.max(0,i.top+o.cy-this.document.height())),i},_placementCoords:function(t){return this._calculateFinalLocation(t,this._clampPopupWidth())},_createPrerequisites:function(e,i,n){var s,o=this;(s={screen:t.Deferred(),container:t.Deferred()}).screen.then(function(){s===o._prerequisites&&e()}),s.container.then(function(){s===o._prerequisites&&i()}),t.when(s.screen,s.container).done(function(){s===o._prerequisites&&(o._prerequisites=null,n())}),o._prerequisites=s},_animate:function(e){return this._ui.screen.removeClass(e.classToRemove).addClass(e.screenClassToAdd),e.prerequisites.screen.resolve(),e.transition&&"none"!==e.transition&&(e.applyTransition&&this._applyTransition(e.transition),this._fallbackTransition)?void this._ui.container.addClass(e.containerClassToAdd).removeClass(e.classToRemove).animationComplete(t.proxy(e.prerequisites.container,"resolve")):(this._ui.container.removeClass(e.classToRemove),void e.prerequisites.container.resolve())},_desiredCoords:function(e){var i,n=null,o=s(this.window),r=e.x,a=e.y,l=e.positionTo;if(l&&"origin"!==l)if("window"===l)r=o.cx/2+o.x,a=o.cy/2+o.y;else{try{n=t(l)}catch(t){n=null}n&&(n.filter(":visible"),0===n.length&&(n=null))}return n&&(i=n.offset(),r=i.left+n.outerWidth()/2,a=i.top+n.outerHeight()/2),("number"!==t.type(r)||isNaN(r))&&(r=o.cx/2+o.x),("number"!==t.type(a)||isNaN(a))&&(a=o.cy/2+o.y),{x:r,y:a}},_reposition:function(t){t={x:t.x,y:t.y,positionTo:t.positionTo},this._trigger("beforeposition",i,t),this._ui.container.offset(this._placementCoords(this._desiredCoords(t)))},reposition:function(t){this._isOpen&&this._reposition(t)},_safelyBlur:function(e){e!==this.window[0]&&"body"!==e.nodeName.toLowerCase()&&t(e).blur()},_openPrerequisitesComplete:function(){var e=this.element.attr("id"),i=this._ui.container.find(":focusable").first();this._ui.container.addClass("ui-popup-active"),this._isOpen=!0,this._resizeScreen(),t.contains(this._ui.container[0],this.document[0].activeElement)||this._safelyBlur(this.document[0].activeElement),i.length>0&&(this._ui.focusElement=i),this._ignoreResizeEvents(),e&&this.document.find("[aria-haspopup='true'][aria-owns='"+e+"']").attr("aria-expanded",!0),this._trigger("afteropen")},_open:function(e){var i=t.extend({},this.options,e),n=function(){var t=navigator.userAgent,e=t.match(/AppleWebKit\/([0-9\.]+)/),i=!!e&&e[1],n=t.match(/Android (\d+(?:\.\d+))/),s=!!n&&n[1],o=t.indexOf("Chrome")>-1;return!(!(null!==n&&"4.0"===s&&i&&i>534.13)||o)}();this._createPrerequisites(t.noop,t.noop,t.proxy(this,"_openPrerequisitesComplete")),this._currentTransition=i.transition,this._applyTransition(i.transition),this._ui.screen.removeClass("ui-screen-hidden"),this._ui.container.removeClass("ui-popup-truncate"),this._reposition(i),this._ui.container.removeClass("ui-popup-hidden"),this.options.overlayTheme&&n&&this.element.closest(".ui-page").addClass("ui-popup-open"),this._animate({additionalCondition:!0,transition:i.transition,classToRemove:"",screenClassToAdd:"in",containerClassToAdd:"in",applyTransition:!1,prerequisites:this._prerequisites})},_closePrerequisiteScreen:function(){this._ui.screen.removeClass("out").addClass("ui-screen-hidden")},_closePrerequisiteContainer:function(){this._ui.container.removeClass("reverse out").addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style")},_closePrerequisitesDone:function(){var e=this._ui.container,n=this.element.attr("id");t.mobile.popup.active=i,t(":focus",e[0]).add(e[0]).blur(),n&&this.document.find("[aria-haspopup='true'][aria-owns='"+n+"']").attr("aria-expanded",!1),this._trigger("afterclose")},_close:function(e){this._ui.container.removeClass("ui-popup-active"),this._page.removeClass("ui-popup-open"),this._isOpen=!1,this._createPrerequisites(t.proxy(this,"_closePrerequisiteScreen"),t.proxy(this,"_closePrerequisiteContainer"),t.proxy(this,"_closePrerequisitesDone")),this._animate({additionalCondition:this._ui.screen.hasClass("in"),transition:e?"none":this._currentTransition,classToRemove:"in",screenClassToAdd:"out",containerClassToAdd:"reverse out",applyTransition:!0,prerequisites:this._prerequisites})},_unenhance:function(){this.options.enhanced||(this._setOptions({theme:t.mobile.popup.prototype.options.theme}),this.element.detach().insertAfter(this._ui.placeholder).removeClass("ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit"),this._ui.screen.remove(),this._ui.container.remove(),this._ui.placeholder.remove())},_destroy:function(){return t.mobile.popup.active===this?(this.element.one("popupafterclose",t.proxy(this,"_unenhance")),this.close()):this._unenhance(),this},_closePopup:function(i,n){var s,o,r=this.options,a=!1;i&&i.isDefaultPrevented()||t.mobile.popup.active!==this||(e.scrollTo(0,this._scrollTop),i&&"pagebeforechange"===i.type&&n&&(s="string"==typeof n.toPage?n.toPage:n.toPage.jqmData("url"),s=t.mobile.path.parseUrl(s),o=s.pathname+s.search+s.hash,this._myUrl!==t.mobile.path.makeUrlAbsolute(o)?a=!0:i.preventDefault()),this.window.off(r.closeEvents),this.element.undelegate(r.closeLinkSelector,r.closeLinkEvents),this._close(a))},_bindContainerClose:function(){this.window.on(this.options.closeEvents,t.proxy(this,"_closePopup"))},widget:function(){return this._ui.container},open:function(e){var i,n,s,o,r,a=this,l=this.options;return t.mobile.popup.active||l.disabled?this:(t.mobile.popup.active=this,this._scrollTop=this.window.scrollTop(),l.history?(r=t.mobile.navigate.history,n=t.mobile.dialogHashKey,s=t.mobile.activePage,o=!!s&&s.hasClass("ui-dialog"),this._myUrl=i=r.getActive().url,i.indexOf(n)>-1&&!o&&r.activeIndex>0?(a._open(e),a._bindContainerClose(),this):(-1!==i.indexOf(n)||o?i=t.mobile.path.parseLocation().hash+n:i+=i.indexOf("#")>-1?n:"#"+n,this.window.one("beforenavigate",function(t){t.preventDefault(),a._open(e),a._bindContainerClose()}),this.urlAltered=!0,t.mobile.navigate(i,{role:"dialog"}),this)):(a._open(e),a._bindContainerClose(),a.element.delegate(l.closeLinkSelector,l.closeLinkEvents,function(t){a.close(),t.preventDefault()}),this))},close:function(){return t.mobile.popup.active!==this?this:(this._scrollTop=this.window.scrollTop(),this.options.history&&this.urlAltered?(t.mobile.back(),this.urlAltered=!1):this._closePopup(),this)}}),t.mobile.popup.handleLink=function(e){var i,n=t.mobile.path,s=t(n.hashToSelector(n.parseUrl(e.attr("href")).hash)).first();s.length>0&&s.data("mobile-popup")&&(i=e.offset(),s.popup("open",{x:i.left+e.outerWidth()/2,y:i.top+e.outerHeight()/2,transition:e.jqmData("transition"),positionTo:e.jqmData("position-to")})),setTimeout(function(){e.removeClass(t.mobile.activeBtnClass)},300)},t.mobile.document.on("pagebeforechange",function(e,i){"popup"===i.options.role&&(t.mobile.popup.handleLink(i.options.link),e.preventDefault())})}(t),function(t,e){var n=".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')",s=function(t,e,i){var s=t[i+"All"]().not(n).first();s.length&&(e.blur().attr("tabindex","-1"),s.find("a").first().focus())};t.widget("mobile.selectmenu",t.mobile.selectmenu,{_create:function(){var t=this.options;return t.nativeMenu=t.nativeMenu||this.element.parents(":jqmData(role='popup'),:mobile-popup").length>0,this._super()},_handleSelectFocus:function(){this.element.blur(),this.button.focus()},_handleKeydown:function(t){this._super(t),this._handleButtonVclickKeydown(t)},_handleButtonVclickKeydown:function(e){this.options.disabled||this.isOpen||this.options.nativeMenu||("vclick"===e.type||e.keyCode&&(e.keyCode===t.mobile.keyCode.ENTER||e.keyCode===t.mobile.keyCode.SPACE))&&(this._decideFormat(),"overlay"===this.menuType?this.button.attr("href","#"+this.popupId).attr("data-"+(t.mobile.ns||"")+"rel","popup"):this.button.attr("href","#"+this.dialogId).attr("data-"+(t.mobile.ns||"")+"rel","dialog"),this.isOpen=!0)},_handleListFocus:function(e){var i="focusin"===e.type?{tabindex:"0",event:"vmouseover"}:{tabindex:"-1",event:"vmouseout"};t(e.target).attr("tabindex",i.tabindex).trigger(i.event)},_handleListKeydown:function(e){var i=t(e.target),n=i.closest("li");switch(e.keyCode){case 38:return s(n,i,"prev"),!1;case 40:return s(n,i,"next"),!1;case 13:case 32:return i.trigger("click"),!1}},_handleMenuPageHide:function(){this._delayedTrigger(),this.thisPage.page("bindRemove")},_handleHeaderCloseClick:function(){return"overlay"===this.menuType?(this.close(),!1):void 0},_handleListItemClick:function(e){var i=t(e.target).closest("li"),n=this.select[0].selectedIndex,s=t.mobile.getAttribute(i,"option-index"),o=this._selectOptions().eq(s)[0];o.selected=!this.isMultiple||!o.selected,this.isMultiple&&i.find("a").toggleClass("ui-checkbox-on",o.selected).toggleClass("ui-checkbox-off",!o.selected),this.isMultiple||n===s||(this._triggerChange=!0),this.isMultiple?(this.select.trigger("change"),this.list.find("li:not(.ui-li-divider)").eq(s).find("a").first().focus()):this.close(),e.preventDefault()},build:function(){var i,n,s,o,r,a,l,h,c,u,d,f,p,g,m,v,b,_=this.options;return _.nativeMenu?this._super():(i=this.selectId,n=i+"-listbox",s=i+"-dialog",o=this.label,r=this.element.closest(".ui-page"),a=this.element[0].multiple,l=i+"-menu",h=_.theme?" data-"+t.mobile.ns+"theme='"+_.theme+"'":"",c=_.overlayTheme||_.theme||null,u=c?" data-"+t.mobile.ns+"overlay-theme='"+c+"'":"",d=_.dividerTheme&&a?" data-"+t.mobile.ns+"divider-theme='"+_.dividerTheme+"'":"",f=t("<div data-"+t.mobile.ns+"role='dialog' class='ui-selectmenu' id='"+s+"'"+h+u+"><div data-"+t.mobile.ns+"role='header'><div class='ui-title'></div></div><div data-"+t.mobile.ns+"role='content'></div></div>"),p=t("<div"+h+u+" id='"+n+"' class='ui-selectmenu'></div>").insertAfter(this.select).popup(),g=t("<ul class='ui-selectmenu-list' id='"+l+"' role='listbox' aria-labelledby='"+this.buttonId+"'"+h+d+"></ul>").appendTo(p),m=t("<div class='ui-header ui-bar-"+(_.theme?_.theme:"inherit")+"'></div>").prependTo(p),v=t("<h1 class='ui-title'></h1>").appendTo(m),this.isMultiple&&(b=t("<a>",{role:"button",text:_.closeText,href:"#",class:"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"}).appendTo(m)),t.extend(this,{selectId:i,menuId:l,popupId:n,dialogId:s,thisPage:r,menuPage:f,label:o,isMultiple:a,theme:_.theme,listbox:p,list:g,header:m,headerTitle:v,headerClose:b,menuPageContent:void 0,menuPageClose:void 0,placeholder:""}),this.refresh(),this._origTabIndex===e&&(this._origTabIndex=null!==this.select[0].getAttribute("tabindex")&&this.select.attr("tabindex")),this.select.attr("tabindex","-1"),this._on(this.select,{focus:"_handleSelectFocus"}),this._on(this.button,{vclick:"_handleButtonVclickKeydown"}),this.list.attr("role","listbox"),this._on(this.list,{focusin:"_handleListFocus",focusout:"_handleListFocus",keydown:"_handleListKeydown","click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)":"_handleListItemClick"}),this._on(this.menuPage,{pagehide:"_handleMenuPageHide"}),this._on(this.listbox,{popupafterclose:"_popupClosed"}),this.isMultiple&&this._on(this.headerClose,{click:"_handleHeaderCloseClick"}),this)},_popupClosed:function(){this.close(),this._delayedTrigger()},_delayedTrigger:function(){this._triggerChange&&this.element.trigger("change"),this._triggerChange=!1},_isRebuildRequired:function(){var t=this.list.find("li");return this._selectOptions().not(".ui-screen-hidden").text()!==t.text()},selected:function(){return this._selectOptions().filter(":selected:not( :jqmData(placeholder='true') )")},refresh:function(e){var i,n;return this.options.nativeMenu?this._super(e):(i=this,(e||this._isRebuildRequired())&&i._buildList(),n=this.selectedIndices(),i.setButtonText(),i.setButtonCount(),void i.list.find("li:not(.ui-li-divider)").find("a").removeClass(t.mobile.activeBtnClass).end().attr("aria-selected",!1).each(function(e){var s=t(this);t.inArray(e,n)>-1?(s.attr("aria-selected",!0),i.isMultiple?s.find("a").removeClass("ui-checkbox-off").addClass("ui-checkbox-on"):s.hasClass("ui-screen-hidden")?s.next().find("a").addClass(t.mobile.activeBtnClass):s.find("a").addClass(t.mobile.activeBtnClass)):i.isMultiple&&s.find("a").removeClass("ui-checkbox-on").addClass("ui-checkbox-off")}))},close:function(){if(!this.options.disabled&&this.isOpen){var t=this;"page"===t.menuType?(t.menuPage.dialog("close"),t.list.appendTo(t.listbox)):t.listbox.popup("close"),t._focusButton(),t.isOpen=!1}},open:function(){this.button.click()},_focusMenuItem:function(){var e=this.list.find("a."+t.mobile.activeBtnClass);0===e.length&&(e=this.list.find("li:not("+n+") a.ui-btn")),e.first().focus()},_decideFormat:function(){var e=this,i=this.window,n=e.list.parent().outerHeight(),s=i.scrollTop(),o=e.button.offset().top,r=i.height();n>r-80||!t.support.scrollTop?(e.menuPage.appendTo(t.mobile.pageContainer).page(),e.menuPageContent=e.menuPage.find(".ui-content"),e.menuPageClose=e.menuPage.find(".ui-header a"),e.thisPage.unbind("pagehide.remove"),0===s&&o>r&&e.thisPage.one("pagehide",function(){t(this).jqmData("lastScroll",o)}),e.menuPage.one({pageshow:t.proxy(this,"_focusMenuItem"),pagehide:t.proxy(this,"close")}),e.menuType="page",e.menuPageContent.append(e.list),e.menuPage.find("div .ui-title").text(e.label.getEncodedText()||e.placeholder)):(e.menuType="overlay",e.listbox.one({popupafteropen:t.proxy(this,"_focusMenuItem")}))},_buildList:function(){var e,n,s,o,r,a,l,h,c,u,d,f,p,g,m=this,v=this.options,b=this.placeholder,_=!0,y="data-"+t.mobile.ns,C=y+"option-index",x=y+"icon",w=y+"role",T=y+"placeholder",S=i.createDocumentFragment(),O=!1;for(m.list.empty().filter(".ui-listview").listview("destroy"),n=(e=this._selectOptions()).length,s=this.select[0],r=0;n>r;r++,O=!1)a=e[r],(l=t(a)).hasClass("ui-screen-hidden")||(h=a.parentNode,d=[],c=l.text(),(u=i.createElement("a")).setAttribute("href","#"),u.appendChild(i.createTextNode(c)),h!==s&&"optgroup"===h.nodeName.toLowerCase()&&(f=h.getAttribute("label"))!==o&&((p=i.createElement("li")).setAttribute(w,"list-divider"),p.setAttribute("role","option"),p.setAttribute("tabindex","-1"),p.appendChild(i.createTextNode(f)),S.appendChild(p),o=f),!_||a.getAttribute("value")&&0!==c.length&&!l.jqmData("placeholder")||(_=!1,O=!0,null===a.getAttribute(T)&&(this._removePlaceholderAttr=!0),a.setAttribute(T,!0),v.hidePlaceholderMenuItems&&d.push("ui-screen-hidden"),b!==c&&(b=m.placeholder=c)),g=i.createElement("li"),a.disabled&&(d.push("ui-state-disabled"),g.setAttribute("aria-disabled",!0)),g.setAttribute(C,r),g.setAttribute(x,"false"),O&&g.setAttribute(T,!0),g.className=d.join(" "),g.setAttribute("role","option"),u.setAttribute("tabindex","-1"),this.isMultiple&&t(u).addClass("ui-btn ui-checkbox-off ui-btn-icon-right"),g.appendChild(u),S.appendChild(g));m.list[0].appendChild(S),this.isMultiple||b.length?this.headerTitle.text(this.placeholder):this.header.addClass("ui-screen-hidden"),m.list.listview()},_button:function(){return this.options.nativeMenu?this._super():t("<a>",{href:"#",role:"button",id:this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId})},_destroy:function(){this.options.nativeMenu||(this.close(),this._origTabIndex!==e&&(!1!==this._origTabIndex?this.select.attr("tabindex",this._origTabIndex):this.select.removeAttr("tabindex")),this._removePlaceholderAttr&&this._selectOptions().removeAttr("data-"+t.mobile.ns+"placeholder"),this.listbox.remove(),this.menuPage.remove()),this._super()}})}(t),function(t,e){function i(t,e){var i=e||[];return i.push("ui-btn"),t.theme&&i.push("ui-btn-"+t.theme),t.icon&&(i=i.concat(["ui-icon-"+t.icon,"ui-btn-icon-"+t.iconpos]),t.iconshadow&&i.push("ui-shadow-icon")),t.inline&&i.push("ui-btn-inline"),t.shadow&&i.push("ui-shadow"),t.corners&&i.push("ui-corner-all"),t.mini&&i.push("ui-mini"),i}function n(t){var i,n,s,r=!1,a=!0,l={icon:"",inline:!1,shadow:!1,corners:!1,iconshadow:!1,mini:!1},h=[];for(t=t.split(" "),i=0;i<t.length;i++)s=!0,n=o[t[i]],n!==e?(s=!1,l[n]=!0):0===t[i].indexOf("ui-btn-icon-")?(s=!1,a=!1,l.iconpos=t[i].substring(12)):0===t[i].indexOf("ui-icon-")?(s=!1,l.icon=t[i].substring(8)):0===t[i].indexOf("ui-btn-")&&8===t[i].length?(s=!1,l.theme=t[i].substring(7)):"ui-btn"===t[i]&&(s=!1,r=!0),s&&h.push(t[i]);return a&&(l.icon=""),{options:l,unknownClasses:h,alreadyEnhanced:r}}function s(t){return"-"+t.toLowerCase()}var o={"ui-shadow":"shadow","ui-corner-all":"corners","ui-btn-inline":"inline","ui-shadow-icon":"iconshadow","ui-mini":"mini"},r=function(){var i=t.mobile.getAttribute.apply(this,arguments);return null==i?e:i},a=/[A-Z]/g;t.fn.buttonMarkup=function(o,l){var h,c,u,d,f,p=t.fn.buttonMarkup.defaults;for(h=0;h<this.length;h++){if(u=this[h],c=l?{alreadyEnhanced:!1,unknownClasses:[]}:n(u.className),d=t.extend({},c.alreadyEnhanced?c.options:{},o),!c.alreadyEnhanced)for(f in p)d[f]===e&&(d[f]=r(u,f.replace(a,s)));u.className=i(t.extend({},p,d),c.unknownClasses).join(" "),"button"!==u.tagName.toLowerCase()&&u.setAttribute("role","button")}return this},t.fn.buttonMarkup.defaults={icon:"",iconpos:"left",theme:null,inline:!1,shadow:!0,corners:!0,iconshadow:!1,mini:!1},t.extend(t.fn.buttonMarkup,{initSelector:"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)"})}(t),function(t,e){t.widget("mobile.controlgroup",t.extend({options:{enhanced:!1,theme:null,shadow:!1,corners:!0,excludeInvisible:!0,type:"vertical",mini:!1},_create:function(){var e=this.element,i=this.options,n=t.mobile.page.prototype.keepNativeSelector();t.fn.buttonMarkup&&this.element.find(t.fn.buttonMarkup.initSelector).not(n).buttonMarkup(),t.each(this._childWidgets,t.proxy(function(e,i){t.mobile[i]&&this.element.find(t.mobile[i].initSelector).not(n)[i]()},this)),t.extend(this,{_ui:null,_initialRefresh:!0}),this._ui=i.enhanced?{groupLegend:e.children(".ui-controlgroup-label").children(),childWrapper:e.children(".ui-controlgroup-controls")}:this._enhance()},_childWidgets:["checkboxradio","selectmenu","button"],_themeClassFromOption:function(t){return t?"none"===t?"":"ui-group-theme-"+t:""},_enhance:function(){var e=this.element,i=this.options,n={groupLegend:e.children("legend"),childWrapper:e.addClass("ui-controlgroup ui-controlgroup-"+("horizontal"===i.type?"horizontal":"vertical")+" "+this._themeClassFromOption(i.theme)+" "+(i.corners?"ui-corner-all ":"")+(i.mini?"ui-mini ":"")).wrapInner("<div class='ui-controlgroup-controls "+(!0===i.shadow?"ui-shadow":"")+"'></div>").children()};return n.groupLegend.length>0&&t("<div role='heading' class='ui-controlgroup-label'></div>").append(n.groupLegend).prependTo(e),n},_init:function(){this.refresh()},_setOptions:function(t){var i,n,s=this.element;return t.type!==e&&(s.removeClass("ui-controlgroup-horizontal ui-controlgroup-vertical").addClass("ui-controlgroup-"+("horizontal"===t.type?"horizontal":"vertical")),i=!0),t.theme!==e&&s.removeClass(this._themeClassFromOption(this.options.theme)).addClass(this._themeClassFromOption(t.theme)),t.corners!==e&&s.toggleClass("ui-corner-all",t.corners),t.mini!==e&&s.toggleClass("ui-mini",t.mini),t.shadow!==e&&this._ui.childWrapper.toggleClass("ui-shadow",t.shadow),t.excludeInvisible!==e&&(this.options.excludeInvisible=t.excludeInvisible,i=!0),n=this._super(t),i&&this.refresh(),n},container:function(){return this._ui.childWrapper},refresh:function(){var e=this.container(),i=e.find(".ui-btn").not(".ui-slider-handle"),n=this._initialRefresh;t.mobile.checkboxradio&&e.find(":mobile-checkboxradio").checkboxradio("refresh"),this._addFirstLastClasses(i,this.options.excludeInvisible?this._getVisibles(i,n):i,n),this._initialRefresh=!1},_destroy:function(){var t,e,i=this.options;return i.enhanced?this:(t=this._ui,e=this.element.removeClass("ui-controlgroup ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini "+this._themeClassFromOption(i.theme)).find(".ui-btn").not(".ui-slider-handle"),this._removeFirstLastClasses(e),t.groupLegend.unwrap(),void t.childWrapper.children().unwrap())}},t.mobile.behaviors.addFirstLastClasses))}(t),function(t,e){t.widget("mobile.toolbar",{initSelector:":jqmData(role='footer'), :jqmData(role='header')",options:{theme:null,addBackBtn:!1,backBtnTheme:null,backBtnText:"Back"},_create:function(){var e=this.element.is(":jqmData(role='header')")?"header":"footer",i=this.element.closest(".ui-page");0===i.length&&(i=!1,this._on(this.document,{pageshow:"refresh"})),t.extend(this,{role:e,page:i,leftbtn:void 0,rightbtn:void 0}),this.element.attr("role","header"===e?"banner":"contentinfo").addClass("ui-"+e),this.refresh(),this._setOptions(this.options)},_setOptions:function(t){if(t.addBackBtn!==e&&this._updateBackButton(),null!=t.backBtnTheme&&this.element.find(".ui-toolbar-back-btn").addClass("ui-btn ui-btn-"+t.backBtnTheme),t.backBtnText!==e&&this.element.find(".ui-toolbar-back-btn .ui-btn-text").text(t.backBtnText),t.theme!==e){var i=this.options.theme?this.options.theme:"inherit",n=t.theme?t.theme:"inherit";this.element.removeClass("ui-bar-"+i).addClass("ui-bar-"+n)}this._super(t)},refresh:function(){"header"===this.role&&this._addHeaderButtonClasses(),this.page||(this._setRelative(),"footer"===this.role?this.element.appendTo("body"):"header"===this.role&&this._updateBackButton()),this._addHeadingClasses(),this._btnMarkup()},_setRelative:function(){t("[data-"+t.mobile.ns+"role='page']").css({position:"relative"})},_btnMarkup:function(){this.element.children("a").filter(":not([data-"+t.mobile.ns+"role='none'])").attr("data-"+t.mobile.ns+"role","button"),this.element.trigger("create")},_addHeaderButtonClasses:function(){var t=this.element.children("a, button");this.leftbtn=t.hasClass("ui-btn-left")&&!t.hasClass("ui-toolbar-back-btn"),this.rightbtn=t.hasClass("ui-btn-right"),this.leftbtn=this.leftbtn||t.eq(0).not(".ui-btn-right,.ui-toolbar-back-btn").addClass("ui-btn-left").length,this.rightbtn=this.rightbtn||t.eq(1).addClass("ui-btn-right").length},_updateBackButton:function(){var e,i=this.options,n=i.backBtnTheme||i.theme;e=this._backButton=this._backButton||{},this.options.addBackBtn&&"header"===this.role&&t(".ui-page").length>1&&(this.page?this.page[0].getAttribute("data-"+t.mobile.ns+"url")!==t.mobile.path.stripHash(location.hash):t.mobile.navigate&&t.mobile.navigate.history&&t.mobile.navigate.history.activeIndex>0)&&!this.leftbtn?e.attached||(this.backButton=e.element=(e.element||t("<a role='button' href='javascript:void(0);' class='ui-btn ui-corner-all ui-shadow ui-btn-left "+(n?"ui-btn-"+n+" ":"")+"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' data-"+t.mobile.ns+"rel='back'>"+i.backBtnText+"</a>")).prependTo(this.element),e.attached=!0):e.element&&(e.element.detach(),e.attached=!1)},_addHeadingClasses:function(){this.element.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({role:"heading","aria-level":"1"})},_destroy:function(){var t;this.element.children("h1, h2, h3, h4, h5, h6").removeClass("ui-title").removeAttr("role").removeAttr("aria-level"),"header"===this.role&&(this.element.children("a, button").removeClass("ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all"),this.backButton&&this.backButton.remove()),t=this.options.theme?this.options.theme:"inherit",this.element.removeClass("ui-bar-"+t),this.element.removeClass("ui-"+this.role).removeAttr("role")}})}(t),function(t,e){t.widget("mobile.toolbar",t.mobile.toolbar,{options:{position:null,visibleOnPageShow:!0,disablePageZoom:!0,transition:"slide",fullscreen:!1,tapToggle:!0,tapToggleBlacklist:"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",hideDuringFocus:"input, textarea, select",updatePagePadding:!0,trackPersistentToolbars:!0,supportBlacklist:function(){return!t.support.fixedPosition}},_create:function(){this._super(),this.pagecontainer=t(":mobile-pagecontainer"),"fixed"!==this.options.position||this.options.supportBlacklist()||this._makeFixed()},_makeFixed:function(){this.element.addClass("ui-"+this.role+"-fixed"),this.updatePagePadding(),this._addTransitionClass(),this._bindPageEvents(),this._bindToggleHandlers()},_setOptions:function(i){if("fixed"===i.position&&"fixed"!==this.options.position&&this._makeFixed(),"fixed"===this.options.position&&!this.options.supportBlacklist()){var n=this.page?this.page:t(".ui-page-active").length>0?t(".ui-page-active"):t(".ui-page").eq(0);i.fullscreen!==e&&(i.fullscreen?(this.element.addClass("ui-"+this.role+"-fullscreen"),n.addClass("ui-page-"+this.role+"-fullscreen")):(this.element.removeClass("ui-"+this.role+"-fullscreen"),n.removeClass("ui-page-"+this.role+"-fullscreen").addClass("ui-page-"+this.role+"-fixed")))}this._super(i)},_addTransitionClass:function(){var t=this.options.transition;t&&"none"!==t&&("slide"===t&&(t=this.element.hasClass("ui-header")?"slidedown":"slideup"),this.element.addClass(t))},_bindPageEvents:function(){var t=this.page?this.element.closest(".ui-page"):this.document;this._on(t,{pagebeforeshow:"_handlePageBeforeShow",webkitAnimationStart:"_handleAnimationStart",animationstart:"_handleAnimationStart",updatelayout:"_handleAnimationStart",pageshow:"_handlePageShow",pagebeforehide:"_handlePageBeforeHide"})},_handlePageBeforeShow:function(){var e=this.options;e.disablePageZoom&&t.mobile.zoom.disable(!0),e.visibleOnPageShow||this.hide(!0)},_handleAnimationStart:function(){this.options.updatePagePadding&&this.updatePagePadding(this.page?this.page:".ui-page-active")},_handlePageShow:function(){this.updatePagePadding(this.page?this.page:".ui-page-active"),this.options.updatePagePadding&&this._on(this.window,{throttledresize:"updatePagePadding"})},_handlePageBeforeHide:function(e,i){var n,s,o,r,a=this.options;a.disablePageZoom&&t.mobile.zoom.enable(!0),a.updatePagePadding&&this._off(this.window,"throttledresize"),a.trackPersistentToolbars&&(n=t(".ui-footer-fixed:jqmData(id)",this.page),s=t(".ui-header-fixed:jqmData(id)",this.page),o=n.length&&i.nextPage&&t(".ui-footer-fixed:jqmData(id='"+n.jqmData("id")+"')",i.nextPage)||t(),r=s.length&&i.nextPage&&t(".ui-header-fixed:jqmData(id='"+s.jqmData("id")+"')",i.nextPage)||t(),(o.length||r.length)&&(o.add(r).appendTo(t.mobile.pageContainer),i.nextPage.one("pageshow",function(){r.prependTo(this),o.appendTo(this)})))},_visible:!0,updatePagePadding:function(i){var n=this.element,s="header"===this.role,o=parseFloat(n.css(s?"top":"bottom"));this.options.fullscreen||(i=i&&i.type===e&&i||this.page||n.closest(".ui-page"),i=this.page?this.page:".ui-page-active",t(i).css("padding-"+(s?"top":"bottom"),n.outerHeight()+o))},_useTransition:function(e){var i=this.window,n=this.element,s=i.scrollTop(),o=n.height(),r=this.page?n.closest(".ui-page").height():t(".ui-page-active").height(),a=t.mobile.getScreenHeight();return!e&&(this.options.transition&&"none"!==this.options.transition&&("header"===this.role&&!this.options.fullscreen&&s>o||"footer"===this.role&&!this.options.fullscreen&&r-o>s+a)||this.options.fullscreen)},show:function(t){var e="ui-fixed-hidden",i=this.element;this._useTransition(t)?i.removeClass("out "+e).addClass("in").animationComplete(function(){i.removeClass("in")}):i.removeClass(e),this._visible=!0},hide:function(t){var e="ui-fixed-hidden",i=this.element,n="out"+("slide"===this.options.transition?" reverse":"");this._useTransition(t)?i.addClass(n).removeClass("in").animationComplete(function(){i.addClass(e).removeClass(n)}):i.addClass(e).removeClass(n),this._visible=!1},toggle:function(){this[this._visible?"hide":"show"]()},_bindToggleHandlers:function(){var e,i,n=this,s=n.options,o=!0;(this.page?this.page:t(".ui-page")).bind("vclick",function(e){s.tapToggle&&!t(e.target).closest(s.tapToggleBlacklist).length&&n.toggle()}).bind("focusin focusout",function(r){screen.width<1025&&t(r.target).is(s.hideDuringFocus)&&!t(r.target).closest(".ui-header-fixed, .ui-footer-fixed").length&&("focusout"!==r.type||o?"focusin"===r.type&&o&&(clearTimeout(e),o=!1,i=setTimeout(function(){n.hide()},0)):(o=!0,clearTimeout(i),e=setTimeout(function(){n.show()},0)))})},_setRelative:function(){"fixed"!==this.options.position&&t("[data-"+t.mobile.ns+"role='page']").css({position:"relative"})},_destroy:function(){var e,i,n,s,o,r=this.pagecontainer.pagecontainer("getActivePage");this._super(),"fixed"===this.options.position&&(n=t("body>.ui-"+this.role+"-fixed").add(r.find(".ui-"+this.options.role+"-fixed")).not(this.element).length>0,o=t("body>.ui-"+this.role+"-fixed").add(r.find(".ui-"+this.options.role+"-fullscreen")).not(this.element).length>0,i="ui-header-fixed ui-footer-fixed ui-header-fullscreen in out ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden",this.element.removeClass(i),o||(e="ui-page-"+this.role+"-fullscreen"),n||(s="header"===this.role,e+=" ui-page-"+this.role+"-fixed",r.css("padding-"+(s?"top":"bottom"),"")),r.removeClass(e))}})}(t),function(t){t.widget("mobile.toolbar",t.mobile.toolbar,{_makeFixed:function(){this._super(),this._workarounds()},_workarounds:function(){var t=navigator.userAgent,e=navigator.platform,i=t.match(/AppleWebKit\/([0-9]+)/),n=!!i&&i[1],s=null,o=this;if(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1||e.indexOf("iPod")>-1)s="ios";else{if(!(t.indexOf("Android")>-1))return;s="android"}if("ios"===s)o._bindScrollWorkaround();else{if(!("android"===s&&n&&534>n))return;o._bindScrollWorkaround(),o._bindListThumbWorkaround()}},_viewportOffset:function(){var t=this.element,e=t.hasClass("ui-header"),i=Math.abs(t.offset().top-this.window.scrollTop());return e||(i=Math.round(i-this.window.height()+t.outerHeight())-60),i},_bindScrollWorkaround:function(){var t=this;this._on(this.window,{scrollstop:function(){t._viewportOffset()>2&&t._visible&&t._triggerRedraw()}})},_bindListThumbWorkaround:function(){this.element.closest(".ui-page").addClass("ui-android-2x-fixed")},_triggerRedraw:function(){var e=parseFloat(t(".ui-page-active").css("padding-bottom"));t(".ui-page-active").css("padding-bottom",e+1+"px"),setTimeout(function(){t(".ui-page-active").css("padding-bottom",e+"px")},0)},destroy:function(){this._super(),this.element.closest(".ui-page-active").removeClass("ui-android-2x-fix")}})}(t),function(t,e){function i(){var t=s.clone(),e=t.eq(0),i=t.eq(1),n=i.children();return{arEls:i.add(e),gd:e,ct:i,ar:n}}var n=t.mobile.browser.oldIE&&t.mobile.browser.oldIE<=8,s=t("<div class='ui-popup-arrow-guide'></div><div class='ui-popup-arrow-container"+(n?" ie":"")+"'><div class='ui-popup-arrow'></div></div>");t.widget("mobile.popup",t.mobile.popup,{options:{arrow:""},_create:function(){var t=this._super();return this.options.arrow&&(this._ui.arrow=this._addArrow()),t},_addArrow:function(){var t,e=this.options,n=i();return t=this._themeClassFromOption("ui-body-",e.theme),n.ar.addClass(t+(e.shadow?" ui-overlay-shadow":"")),n.arEls.hide().appendTo(this.element),n},_unenhance:function(){var t=this._ui.arrow;return t&&t.arEls.remove(),this._super()},_tryAnArrow:function(t,e,i,n,s){var o,r,a,l={},h={};return n.arFull[t.dimKey]>n.guideDims[t.dimKey]?s:(l[t.fst]=i[t.fst]+(n.arHalf[t.oDimKey]+n.menuHalf[t.oDimKey])*t.offsetFactor-n.contentBox[t.fst]+(n.clampInfo.menuSize[t.oDimKey]-n.contentBox[t.oDimKey])*t.arrowOffsetFactor,l[t.snd]=i[t.snd],o=n.result||this._calculateFinalLocation(l,n.clampInfo),r={x:o.left,y:o.top},h[t.fst]=r[t.fst]+n.contentBox[t.fst]+t.tipOffset,h[t.snd]=Math.max(o[t.prop]+n.guideOffset[t.prop]+n.arHalf[t.dimKey],Math.min(o[t.prop]+n.guideOffset[t.prop]+n.guideDims[t.dimKey]-n.arHalf[t.dimKey],i[t.snd])),a=Math.abs(i.x-h.x)+Math.abs(i.y-h.y),(!s||a<s.diff)&&(h[t.snd]-=n.arHalf[t.dimKey]+o[t.prop]+n.contentBox[t.snd],s={dir:e,diff:a,result:o,posProp:t.prop,posVal:h[t.snd]}),s)},_getPlacementState:function(t){var e,i,n=this._ui.arrow,s={clampInfo:this._clampPopupWidth(!t),arFull:{cx:n.ct.width(),cy:n.ct.height()},guideDims:{cx:n.gd.width(),cy:n.gd.height()},guideOffset:n.gd.offset()};return e=this.element.offset(),n.gd.css({left:0,top:0,right:0,bottom:0}),i=n.gd.offset(),s.contentBox={x:i.left-e.left,y:i.top-e.top,cx:n.gd.width(),cy:n.gd.height()},n.gd.removeAttr("style"),s.guideOffset={left:s.guideOffset.left-e.left,top:s.guideOffset.top-e.top},s.arHalf={cx:s.arFull.cx/2,cy:s.arFull.cy/2},s.menuHalf={cx:s.clampInfo.menuSize.cx/2,cy:s.clampInfo.menuSize.cy/2},s},_placementCoords:function(e){var i,s,o,r,a,l=this.options.arrow,h=this._ui.arrow;return h?(h.arEls.show(),a={},i=this._getPlacementState(!0),o={l:{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:1,tipOffset:-i.arHalf.cx,arrowOffsetFactor:0},r:{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:-1,tipOffset:i.arHalf.cx+i.contentBox.cx,arrowOffsetFactor:1},b:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:-1,tipOffset:i.arHalf.cy+i.contentBox.cy,arrowOffsetFactor:1},t:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:1,tipOffset:-i.arHalf.cy,arrowOffsetFactor:0}},t.each((!0===l?"l,t,r,b":l).split(","),t.proxy(function(t,n){s=this._tryAnArrow(o[n],n,e,i,s)},this)),s?(h.ct.removeClass("ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b").addClass("ui-popup-arrow-"+s.dir).removeAttr("style").css(s.posProp,s.posVal).show(),n||(r=this.element.offset(),a[o[s.dir].fst]=h.ct.offset(),a[o[s.dir].snd]={left:r.left+i.contentBox.x,top:r.top+i.contentBox.y}),s.result):(h.arEls.hide(),this._super(e))):this._super(e)},_setOptions:function(t){var i,n=this.options.theme,s=this._ui.arrow,o=this._super(t);if(t.arrow!==e){if(!s&&t.arrow)return void(this._ui.arrow=this._addArrow());s&&!t.arrow&&(s.arEls.remove(),this._ui.arrow=null)}return(s=this._ui.arrow)&&(t.theme!==e&&(n=this._themeClassFromOption("ui-body-",n),i=this._themeClassFromOption("ui-body-",t.theme),s.ar.removeClass(n).addClass(i)),t.shadow!==e&&s.ar.toggleClass("ui-overlay-shadow",t.shadow)),o},_destroy:function(){var t=this._ui.arrow;return t&&t.arEls.remove(),this._super()}})}(t),function(t,i){t.widget("mobile.panel",{options:{classes:{panel:"ui-panel",panelOpen:"ui-panel-open",panelClosed:"ui-panel-closed",panelFixed:"ui-panel-fixed",panelInner:"ui-panel-inner",modal:"ui-panel-dismiss",modalOpen:"ui-panel-dismiss-open",pageContainer:"ui-panel-page-container",pageWrapper:"ui-panel-wrapper",pageFixedToolbar:"ui-panel-fixed-toolbar",pageContentPrefix:"ui-panel-page-content",animate:"ui-panel-animate"},animate:!0,theme:null,position:"left",dismissible:!0,display:"reveal",swipeClose:!0,positionFixed:!1},_closeLink:null,_parentPage:null,_page:null,_modal:null,_panelInner:null,_wrapper:null,_fixedToolbars:null,_create:function(){var e=this.element,i=e.closest(".ui-page, :jqmData(role='page')");t.extend(this,{_closeLink:e.find(":jqmData(rel='close')"),_parentPage:i.length>0&&i,_openedPage:null,_page:this._getPage,_panelInner:this._getPanelInner(),_fixedToolbars:this._getFixedToolbars}),"overlay"!==this.options.display&&this._getWrapper(),this._addPanelClasses(),t.support.cssTransform3d&&this.options.animate&&this.element.addClass(this.options.classes.animate),this._bindUpdateLayout(),this._bindCloseEvents(),this._bindLinkListeners(),this._bindPageEvents(),this.options.dismissible&&this._createModal(),this._bindSwipeEvents()},_getPanelInner:function(){var t=this.element.find("."+this.options.classes.panelInner);return 0===t.length&&(t=this.element.children().wrapAll("<div class='"+this.options.classes.panelInner+"' />").parent()),t},_createModal:function(){var e=this,i=e._parentPage?e._parentPage.parent():e.element.parent();e._modal=t("<div class='"+e.options.classes.modal+"'></div>").on("mousedown",function(){e.close()}).appendTo(i)},_getPage:function(){return this._openedPage||this._parentPage||t("."+t.mobile.activePageClass)},_getWrapper:function(){var t=this._page().find("."+this.options.classes.pageWrapper);0===t.length&&(t=this._page().children(".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)").wrapAll("<div class='"+this.options.classes.pageWrapper+"'></div>").parent()),this._wrapper=t},_getFixedToolbars:function(){var e=t("body").children(".ui-header-fixed, .ui-footer-fixed"),i=this._page().find(".ui-header-fixed, .ui-footer-fixed");return e.add(i).addClass(this.options.classes.pageFixedToolbar)},_getPosDisplayClasses:function(t){return t+"-position-"+this.options.position+" "+t+"-display-"+this.options.display},_getPanelClasses:function(){var t=this.options.classes.panel+" "+this._getPosDisplayClasses(this.options.classes.panel)+" "+this.options.classes.panelClosed+" ui-body-"+(this.options.theme?this.options.theme:"inherit");return this.options.positionFixed&&(t+=" "+this.options.classes.panelFixed),t},_addPanelClasses:function(){this.element.addClass(this._getPanelClasses())},_handleCloseClick:function(t){t.isDefaultPrevented()||this.close()},_bindCloseEvents:function(){this._on(this._closeLink,{click:"_handleCloseClick"}),this._on({"click a:jqmData(ajax='false')":"_handleCloseClick"})},_positionPanel:function(e){var i=this,n=i._panelInner.outerHeight(),s=n>t.mobile.getScreenHeight();s||!i.options.positionFixed?(s&&(i._unfixPanel(),t.mobile.resetActivePageHeight(n)),e&&this.window[0].scrollTo(0,t.mobile.defaultHomeScroll)):i._fixPanel()},_bindFixListener:function(){this._on(t(e),{throttledresize:"_positionPanel"})},_unbindFixListener:function(){this._off(t(e),"throttledresize")},_unfixPanel:function(){this.options.positionFixed&&t.support.fixedPosition&&this.element.removeClass(this.options.classes.panelFixed)},_fixPanel:function(){this.options.positionFixed&&t.support.fixedPosition&&this.element.addClass(this.options.classes.panelFixed)},_bindUpdateLayout:function(){var t=this;t.element.on("updatelayout",function(){t._open&&t._positionPanel()})},_bindLinkListeners:function(){this._on("body",{"click a":"_handleClick"})},_handleClick:function(e){var i,n=this.element.attr("id");e.currentTarget.href.split("#")[1]===n&&void 0!==n&&(e.preventDefault(),(i=t(e.target)).hasClass("ui-btn")&&(i.addClass(t.mobile.activeBtnClass),this.element.one("panelopen panelclose",function(){i.removeClass(t.mobile.activeBtnClass)})),this.toggle())},_bindSwipeEvents:function(){var t=this,e=t._modal?t.element.add(t._modal):t.element;t.options.swipeClose&&("left"===t.options.position?e.on("swipeleft.panel",function(){t.close()}):e.on("swiperight.panel",function(){t.close()}))},_bindPageEvents:function(){var t=this;this.document.on("panelbeforeopen",function(e){t._open&&e.target!==t.element[0]&&t.close()}).on("keyup.panel",function(e){27===e.keyCode&&t._open&&t.close()}),this._parentPage||"overlay"===this.options.display||this._on(this.document,{pageshow:function(){this._openedPage=null,this._getWrapper()}}),t._parentPage?this.document.on("pagehide",":jqmData(role='page')",function(){t._open&&t.close(!0)}):this.document.on("pagebeforehide",function(){t._open&&t.close(!0)})},_open:!1,_pageContentOpenClasses:null,_modalOpenClasses:null,open:function(e){if(!this._open){var i=this,n=i.options,s=function(){i._off(i.document,"panelclose"),i._page().jqmData("panel","open"),t.support.cssTransform3d&&n.animate&&"overlay"!==n.display&&(i._wrapper.addClass(n.classes.animate),i._fixedToolbars().addClass(n.classes.animate)),!e&&t.support.cssTransform3d&&n.animate?(i._wrapper||i.element).animationComplete(o,"transition"):setTimeout(o,0),n.theme&&"overlay"!==n.display&&i._page().parent().addClass(n.classes.pageContainer+"-themed "+n.classes.pageContainer+"-"+n.theme),i.element.removeClass(n.classes.panelClosed).addClass(n.classes.panelOpen),i._positionPanel(!0),i._pageContentOpenClasses=i._getPosDisplayClasses(n.classes.pageContentPrefix),"overlay"!==n.display&&(i._page().parent().addClass(n.classes.pageContainer),i._wrapper.addClass(i._pageContentOpenClasses),i._fixedToolbars().addClass(i._pageContentOpenClasses)),i._modalOpenClasses=i._getPosDisplayClasses(n.classes.modal)+" "+n.classes.modalOpen,i._modal&&i._modal.addClass(i._modalOpenClasses).height(Math.max(i._modal.height(),i.document.height()))},o=function(){i._open&&("overlay"!==n.display&&(i._wrapper.addClass(n.classes.pageContentPrefix+"-open"),i._fixedToolbars().addClass(n.classes.pageContentPrefix+"-open")),i._bindFixListener(),i._trigger("open"),i._openedPage=i._page())};i._trigger("beforeopen"),"open"===i._page().jqmData("panel")?i._on(i.document,{panelclose:s}):s(),i._open=!0}},close:function(e){if(this._open){var i=this,n=this.options,s=function(){n.theme&&"overlay"!==n.display&&i._page().parent().removeClass(n.classes.pageContainer+"-themed "+n.classes.pageContainer+"-"+n.theme),i.element.addClass(n.classes.panelClosed),"overlay"!==n.display&&(i._page().parent().removeClass(n.classes.pageContainer),i._wrapper.removeClass(n.classes.pageContentPrefix+"-open"),i._fixedToolbars().removeClass(n.classes.pageContentPrefix+"-open")),t.support.cssTransform3d&&n.animate&&"overlay"!==n.display&&(i._wrapper.removeClass(n.classes.animate),i._fixedToolbars().removeClass(n.classes.animate)),i._fixPanel(),i._unbindFixListener(),t.mobile.resetActivePageHeight(),i._page().jqmRemoveData("panel"),i._trigger("close"),i._openedPage=null};i._trigger("beforeclose"),i.element.removeClass(n.classes.panelOpen),"overlay"!==n.display&&(i._wrapper.removeClass(i._pageContentOpenClasses),i._fixedToolbars().removeClass(i._pageContentOpenClasses)),!e&&t.support.cssTransform3d&&n.animate?(i._wrapper||i.element).animationComplete(s,"transition"):setTimeout(s,0),i._modal&&i._modal.removeClass(i._modalOpenClasses).height(""),i._open=!1}},toggle:function(){this[this._open?"close":"open"]()},_destroy:function(){var e=this.options,i=t("body > :mobile-panel").length+t.mobile.activePage.find(":mobile-panel").length>1;"overlay"!==e.display&&(0===t("body > :mobile-panel").add(t.mobile.activePage.find(":mobile-panel")).not(".ui-panel-display-overlay").not(this.element).length&&this._wrapper.children().unwrap(),this._open&&(this._fixedToolbars().removeClass(e.classes.pageContentPrefix+"-open"),t.support.cssTransform3d&&e.animate&&this._fixedToolbars().removeClass(e.classes.animate),this._page().parent().removeClass(e.classes.pageContainer),e.theme&&this._page().parent().removeClass(e.classes.pageContainer+"-themed "+e.classes.pageContainer+"-"+e.theme))),i||this.document.off("panelopen panelclose"),this._open&&this._page().jqmRemoveData("panel"),this._panelInner.children().unwrap(),this.element.removeClass([this._getPanelClasses(),e.classes.panelOpen,e.classes.animate].join(" ")).off("swipeleft.panel swiperight.panel").off("panelbeforeopen").off("panelhide").off("keyup.panel").off("updatelayout"),this._modal&&this._modal.remove()}})}(t),function(t,e){t.widget("mobile.table",{options:{classes:{table:"ui-table"},enhanced:!1},_create:function(){this.options.enhanced||this.element.addClass(this.options.classes.table),t.extend(this,{headers:e,allHeaders:e}),this._refresh(!0)},_setHeaders:function(){var t=this.element.find("thead tr");this.headers=this.element.find("tr:eq(0)").children(),this.allHeaders=this.headers.add(t.children())},refresh:function(){this._refresh()},rebuild:t.noop,_refresh:function(){var e=this.element,i=e.find("thead tr");this._setHeaders(),i.each(function(){var n=0;t(this).children().each(function(){var s,o=parseInt(this.getAttribute("colspan"),10),r=":nth-child("+(n+1)+")";if(this.setAttribute("data-"+t.mobile.ns+"colstart",n+1),o)for(s=0;o-1>s;s++)n++,r+=", :nth-child("+(n+1)+")";t(this).jqmData("cells",e.find("tr").not(i.eq(0)).not(this).children(r)),n++})})}})}(t),function(t){t.widget("mobile.table",t.mobile.table,{options:{mode:"columntoggle",columnBtnTheme:null,columnPopupTheme:null,columnBtnText:"Columns...",classes:t.extend(t.mobile.table.prototype.options.classes,{popup:"ui-table-columntoggle-popup",columnBtn:"ui-table-columntoggle-btn",priorityPrefix:"ui-table-priority-",columnToggleTable:"ui-table-columntoggle"})},_create:function(){this._super(),"columntoggle"===this.options.mode&&(t.extend(this,{_menu:null}),this.options.enhanced?(this._menu=t(this.document[0].getElementById(this._id()+"-popup")).children().first(),this._addToggles(this._menu,!0)):(this._menu=this._enhanceColToggle(),this.element.addClass(this.options.classes.columnToggleTable)),this._setupEvents(),this._setToggleState())},_id:function(){return this.element.attr("id")||this.widgetName+this.uuid},_setupEvents:function(){this._on(this.window,{throttledresize:"_setToggleState"}),this._on(this._menu,{"change input":"_menuInputChange"})},_addToggles:function(e,i){var n,s=0,o=this.options,r=e.controlgroup("container");i?n=e.find("input"):r.empty(),this.headers.not("td").each(function(){var e,a,l=t(this),h=t.mobile.getAttribute(this,"priority");h&&((a=l.add(l.jqmData("cells"))).addClass(o.classes.priorityPrefix+h),e=(i?n.eq(s++):t("<label><input type='checkbox' checked />"+(l.children("abbr").first().attr("title")||l.text())+"</label>").appendTo(r).children(0).checkboxradio({theme:o.columnPopupTheme})).jqmData("header",l).jqmData("cells",a),l.jqmData("input",e))}),i||e.controlgroup("refresh")},_menuInputChange:function(e){var i=t(e.target),n=i[0].checked;i.jqmData("cells").toggleClass("ui-table-cell-hidden",!n).toggleClass("ui-table-cell-visible",n)},_unlockCells:function(t){t.removeClass("ui-table-cell-hidden ui-table-cell-visible")},_enhanceColToggle:function(){var e,i,n,s,o=this.element,r=this.options,a=t.mobile.ns,l=this.document[0].createDocumentFragment();return e=this._id()+"-popup",i=t("<a href='#"+e+"' class='"+r.classes.columnBtn+" ui-btn ui-btn-"+(r.columnBtnTheme||"a")+" ui-corner-all ui-shadow ui-mini' data-"+a+"rel='popup'>"+r.columnBtnText+"</a>"),n=t("<div class='"+r.classes.popup+"' id='"+e+"'></div>"),s=t("<fieldset></fieldset>").controlgroup(),this._addToggles(s,!1),s.appendTo(n),l.appendChild(n[0]),l.appendChild(i[0]),o.before(l),n.popup(),s},rebuild:function(){this._super(),"columntoggle"===this.options.mode&&this._refresh(!1)},_refresh:function(e){var i,n,s;if(this._super(e),!e&&"columntoggle"===this.options.mode)for(i=this.headers,n=[],this._menu.find("input").each(function(){var e=t(this),s=e.jqmData("header"),o=i.index(s[0]);o>-1&&!e.prop("checked")&&n.push(o)}),this._unlockCells(this.element.find(".ui-table-cell-hidden, .ui-table-cell-visible")),this._addToggles(this._menu,e),s=n.length-1;s>-1;s--)i.eq(n[s]).jqmData("input").prop("checked",!1).checkboxradio("refresh").trigger("change")},_setToggleState:function(){this._menu.find("input").each(function(){var e=t(this);this.checked="table-cell"===e.jqmData("cells").eq(0).css("display"),e.checkboxradio("refresh")})},_destroy:function(){this._super()}})}(t),function(t){t.widget("mobile.table",t.mobile.table,{options:{mode:"reflow",classes:t.extend(t.mobile.table.prototype.options.classes,{reflowTable:"ui-table-reflow",cellLabels:"ui-table-cell-label"})},_create:function(){this._super(),"reflow"===this.options.mode&&(this.options.enhanced||(this.element.addClass(this.options.classes.reflowTable),this._updateReflow()))},rebuild:function(){this._super(),"reflow"===this.options.mode&&this._refresh(!1)},_refresh:function(t){this._super(t),t||"reflow"!==this.options.mode||this._updateReflow()},_updateReflow:function(){var e=this,i=this.options;t(e.allHeaders.get().reverse()).each(function(){var n,s,o=t(this).jqmData("cells"),r=t.mobile.getAttribute(this,"colstart"),a=o.not(this).filter("thead th").length&&" ui-table-cell-label-top",l=t(this).clone().contents();l.length>0&&(a?(n=parseInt(this.getAttribute("colspan"),10),s="",n&&(s="td:nth-child("+n+"n + "+r+")"),e._addLabels(o.filter(s),i.classes.cellLabels+a,l)):e._addLabels(o,i.classes.cellLabels,l))})},_addLabels:function(e,i,n){1===n.length&&"abbr"===n[0].nodeName.toLowerCase()&&(n=n.eq(0).attr("title")),e.not(":has(b."+i+")").prepend(t("<b class='"+i+"'></b>").append(n))}})}(t),function(t,i){var n=function(e,i){return-1===(""+(t.mobile.getAttribute(this,"filtertext")||t(this).text())).toLowerCase().indexOf(i)};t.widget("mobile.filterable",{initSelector:":jqmData(filter='true')",options:{filterReveal:!1,filterCallback:n,enhanced:!1,input:null,children:"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"},_create:function(){var e=this.options;t.extend(this,{_search:null,_timer:0}),this._setInput(e.input),e.enhanced||this._filterItems((this._search&&this._search.val()||"").toLowerCase())},_onKeyUp:function(){var i,n,s=this._search;if(s){if(i=s.val().toLowerCase(),(n=t.mobile.getAttribute(s[0],"lastval")+"")&&n===i)return;this._timer&&(e.clearTimeout(this._timer),this._timer=0),this._timer=this._delay(function(){return!1!==this._trigger("beforefilter",null,{input:s})&&(s[0].setAttribute("data-"+t.mobile.ns+"lastval",i),this._filterItems(i),void(this._timer=0))},250)}},_getFilterableItems:function(){var e=this.element,i=this.options.children,n=i?t.isFunction(i)?i():i.nodeName?t(i):i.jquery?i:this.element.find(i):{length:0};return 0===n.length&&(n=e.children()),n},_filterItems:function(e){var i,s,o,r=[],a=[],l=this.options,h=this._getFilterableItems();if(null!=e)for(s=l.filterCallback||n,o=h.length,i=0;o>i;i++)(s.call(h[i],i,e)?a:r).push(h[i]);0===a.length?h[l.filterReveal&&0===e.length?"addClass":"removeClass"]("ui-screen-hidden"):(t(a).addClass("ui-screen-hidden"),t(r).removeClass("ui-screen-hidden")),this._refreshChildWidget(),this._trigger("filter",null,{items:h})},_refreshChildWidget:function(){var e,i,n=["collapsibleset","selectmenu","controlgroup","listview"];for(i=n.length-1;i>-1;i--)e=n[i],t.mobile[e]&&(e=this.element.data("mobile-"+e))&&t.isFunction(e.refresh)&&e.refresh()},_setInput:function(i){var n=this._search;this._timer&&(e.clearTimeout(this._timer),this._timer=0),n&&(this._off(n,"keyup change input"),n=null),i&&(n=i.jquery?i:i.nodeName?t(i):this.document.find(i),this._on(n,{keydown:"_onKeyDown",keypress:"_onKeyPress",keyup:"_onKeyUp",change:"_onKeyUp",input:"_onKeyUp"})),this._search=n},_onKeyDown:function(e){e.keyCode===t.ui.keyCode.ENTER&&(e.preventDefault(),this._preventKeyPress=!0)},_onKeyPress:function(t){this._preventKeyPress&&(t.preventDefault(),this._preventKeyPress=!1)},_setOptions:function(t){var e=!(t.filterReveal===i&&t.filterCallback===i&&t.children===i);this._super(t),t.input!==i&&(this._setInput(t.input),e=!0),e&&this.refresh()},_destroy:function(){var t=this.options,e=this._getFilterableItems();t.enhanced?e.toggleClass("ui-screen-hidden",t.filterReveal):e.removeClass("ui-screen-hidden")},refresh:function(){this._timer&&(e.clearTimeout(this._timer),this._timer=0),this._filterItems((this._search&&this._search.val()||"").toLowerCase())}})}(t),function(t,e){var i=function(t,e){return function(i){e.call(this,i),t._syncTextInputOptions(i)}},n=/(^|\s)ui-li-divider(\s|$)/,s=t.mobile.filterable.prototype.options.filterCallback;t.mobile.filterable.prototype.options.filterCallback=function(t,e){return!this.className.match(n)&&s.call(this,t,e)},t.widget("mobile.filterable",t.mobile.filterable,{options:{filterPlaceholder:"Filter items...",filterTheme:null},_create:function(){var e,i,n=this.element,s=["collapsibleset","selectmenu","controlgroup","listview"],o={};for(this._super(),t.extend(this,{_widget:null}),e=s.length-1;e>-1;e--)if(i=s[e],t.mobile[i]){if(this._setWidget(n.data("mobile-"+i)))break;o[i+"create"]="_handleCreate"}this._widget||this._on(n,o)},_handleCreate:function(t){this._setWidget(this.element.data("mobile-"+t.type.substring(0,t.type.length-6)))},_trigger:function(t,e,i){return this._widget&&"mobile-listview"===this._widget.widgetFullName&&"beforefilter"===t&&this._widget._trigger("beforefilter",e,i),this._super(t,e,i)},_setWidget:function(t){return!this._widget&&t&&(this._widget=t,this._widget._setOptions=i(this,this._widget._setOptions)),this._widget&&(this._syncTextInputOptions(this._widget.options),"listview"===this._widget.widgetName&&(this._widget.options.hideDividers=!0,this._widget.element.listview("refresh"))),!!this._widget},_isSearchInternal:function(){return this._search&&this._search.jqmData("ui-filterable-"+this.uuid+"-internal")},_setInput:function(e){var i=this.options,n=!0,s={};if(!e){if(this._isSearchInternal())return;n=!1,e=t("<input data-"+t.mobile.ns+"type='search' placeholder='"+i.filterPlaceholder+"'></input>").jqmData("ui-filterable-"+this.uuid+"-internal",!0),t("<form class='ui-filterable'></form>").append(e).submit(function(t){t.preventDefault(),e.blur()}).insertBefore(this.element),t.mobile.textinput&&(null!=this.options.filterTheme&&(s.theme=i.filterTheme),e.textinput(s))}this._super(e),this._isSearchInternal()&&n&&this._search.attr("placeholder",this.options.filterPlaceholder)},_setOptions:function(i){var n=this._super(i);return i.filterPlaceholder!==e&&this._isSearchInternal()&&this._search.attr("placeholder",i.filterPlaceholder),i.filterTheme!==e&&this._search&&t.mobile.textinput&&this._search.textinput("option","theme",i.filterTheme),n},_refreshChildWidget:function(){this._refreshingChildWidget=!0,this._superApply(arguments),this._refreshingChildWidget=!1},refresh:function(){this._refreshingChildWidget||this._superApply(arguments)},_destroy:function(){this._isSearchInternal()&&this._search.remove(),this._super()},_syncTextInputOptions:function(i){var n,s={};if(this._isSearchInternal()&&t.mobile.textinput){for(n in t.mobile.textinput.prototype.options)i[n]!==e&&(s[n]="theme"===n&&null!=this.options.filterTheme?this.options.filterTheme:i[n]);this._search.textinput("option",s)}}}),t.widget("mobile.listview",t.mobile.listview,{options:{filter:!1},_create:function(){return!0!==this.options.filter||this.element.data("mobile-filterable")||this.element.filterable(),this._super()},refresh:function(){var t;this._superApply(arguments),!0===this.options.filter&&(t=this.element.data("mobile-filterable"))&&t.refresh()}})}(t),function(t,e){function i(){return++s}function n(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var s=0,o=/#.*$/;t.widget("ui.tabs",{version:"fadf2b312a05040436451c64bbfaf4814bc62c56",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each(function(i,s){return t(s).attr("aria-controls")===n?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!i&&0),!i&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:s=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),e.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){for(var n=this.tabs.length-1;-1!==t.inArray((e>n&&(e=0),0>e&&(e=n),e),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){return"active"===t?void this._activate(e):"disabled"===t?void this._setupDisabled(e):(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,s){var o,r,a,l=t(s).uniqueId().attr("id"),h=t(s).closest("li"),c=h.attr("aria-controls");n(s)?(o=s.hash,r=e.element.find(e._sanitizeSelector(o))):(a=e._tabId(h),o="#"+a,(r=e.element.find(o)).length||(r=e._createPanel(a)).insertAfter(e.panels[i-1]||e.tablist),r.attr("aria-live","polite")),r.length&&(e.panels=e.panels.add(r)),c&&h.data("ui-tabs-aria-controls",c),h.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)!0===e||-1!==t.inArray(n,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget).closest("li"),o=s[0]===n[0],r=o&&i.collapsible,a=r?t():this._getPanelForTab(s),l=n.length?this._getPanelForTab(n):t(),h={oldTab:n,oldPanel:l,newTab:r?t():s,newPanel:a};e.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",e,h)||(i.active=!r&&this.tabs.index(s),this.active=o?t():s,this.xhr&&this.xhr.abort(),l.length||a.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),e),this._toggle(e,h))},_toggle:function(e,i){function n(){o.running=!1,o._trigger("activate",e,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&o.options.show?o._show(r,o.options.show,n):(r.show(),n())}var o=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;!1!==n&&(i===e?n=!1:(i=this._getIndex(i),n=t.isArray(n)?t.map(n,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(!0!==n){if(i===e)n=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,n))return;n=t.isArray(n)?t.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(e,i){e=this._getIndex(e);var s=this,o=this.tabs.eq(e),r=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),l={tab:o,panel:a};n(r[0])||(this.xhr=t.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){a.html(t),s._trigger("load",i,l)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&s.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(e,i,n){var s=this;return{url:e.attr("href"),beforeSend:function(e,o){return s._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(t),function(t,e){function i(t){s=t.originalEvent,l=s.accelerationIncludingGravity,o=Math.abs(l.x),r=Math.abs(l.y),a=Math.abs(l.z),!e.orientation&&(o>7||(a>6&&8>r||8>a&&r>6)&&o>5)?n.enabled&&n.disable():n.enabled||n.enable()}t.mobile.iosorientationfixEnabled=!0;var n,s,o,r,a,l,h=navigator.userAgent;/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(h)&&h.indexOf("AppleWebKit")>-1?(n=t.mobile.zoom,t.mobile.document.on("mobileinit",function(){t.mobile.iosorientationfixEnabled&&t.mobile.window.bind("orientationchange.iosorientationfix",n.enable).bind("devicemotion.iosorientationfix",i)})):t.mobile.iosorientationfixEnabled=!1}(t,this),function(t,e,n){function s(){o.removeClass("ui-mobile-rendering")}var o=t("html"),r=t.mobile.window;t(e.document).trigger("mobileinit"),t.mobile.gradeA()&&(t.mobile.ajaxBlacklist&&(t.mobile.ajaxEnabled=!1),o.addClass("ui-mobile ui-mobile-rendering"),setTimeout(s,5e3),t.extend(t.mobile,{initializePage:function(){var e=t.mobile.path,n=t(":jqmData(role='page'), :jqmData(role='dialog')"),o=e.stripHash(e.stripQueryParams(e.parseLocation().hash)),a=t.mobile.path.parseLocation(),l=o?i.getElementById(o):void 0;n.length||(n=t("body").wrapInner("<div data-"+t.mobile.ns+"role='page'></div>").children(0)),n.each(function(){var i=t(this);i[0].getAttribute("data-"+t.mobile.ns+"url")||i.attr("data-"+t.mobile.ns+"url",i.attr("id")||e.convertUrlToDataUrl(a.pathname+a.search))}),t.mobile.firstPage=n.first(),t.mobile.pageContainer=t.mobile.firstPage.parent().addClass("ui-mobile-viewport").pagecontainer(),t.mobile.navreadyDeferred.resolve(),r.trigger("pagecontainercreate"),t.mobile.loading("show"),s(),t.mobile.hashListeningEnabled&&t.mobile.path.isHashValid(location.hash)&&(t(l).is(":jqmData(role='page')")||t.mobile.path.isPath(o)||o===t.mobile.dialogHashKey)?t.event.special.navigate.isPushStateEnabled()?(t.mobile.navigate.history.stack=[],t.mobile.navigate(t.mobile.path.isPath(location.hash)?location.hash:location.href)):r.trigger("hashchange",[!0]):(t.event.special.navigate.isPushStateEnabled()&&t.mobile.navigate.navigator.squash(e.parseLocation().href),t.mobile.changePage(t.mobile.firstPage,{transition:"none",reverse:!0,changeHash:!1,fromHashChange:!0}))}}),t(function(){t.support.inlineSVG(),t.mobile.hideUrlBar&&e.scrollTo(0,1),t.mobile.defaultHomeScroll=t.support.scrollTop&&1!==t.mobile.window.scrollTop()?1:0,t.mobile.autoInitializePage&&t.mobile.initializePage(),t.mobile.hideUrlBar&&r.load(t.mobile.silentScroll),t.support.cssPointerEvents||t.mobile.document.delegate(".ui-state-disabled,.ui-disabled","vclick",function(t){t.preventDefault(),t.stopImmediatePropagation()})}))}(t,this)}),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){var e=t.getBoundingClientRect(),i={};for(var n in e)i[n]=e[n];if(t.ownerDocument!==document){var o=t.ownerDocument.defaultView.frameElement;if(o){var r=s(o);i.top+=r.top,i.bottom+=r.top,i.left+=r.left,i.right+=r.left}}return i}function o(t){var e=(getComputedStyle(t)||{}).position,i=[];if("fixed"===e)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var s=void 0;try{s=getComputedStyle(n)}catch(t){}if(void 0===s||null===s)return i.push(n),i;var o=s,r=o.overflow,a=o.overflowX,l=o.overflowY;/(auto|scroll)/.test(r+l+a)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(s.position)>=0)&&i.push(n)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function r(){S&&document.body.removeChild(S),S=null}function a(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var i=e.documentElement,n=s(t),o=k();return n.top-=o.top,n.left-=o.left,void 0===n.width&&(n.width=document.body.scrollWidth-n.left-n.right),void 0===n.height&&(n.height=document.body.scrollHeight-n.top-n.bottom),n.top=n.top-i.clientTop,n.left=n.left-i.clientLeft,n.right=e.body.clientWidth-n.width-n.left,n.bottom=e.body.clientHeight-n.height-n.top,n}function l(t){return t.offsetParent||document.documentElement}function h(){if(D)return D;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");c(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;i===n&&(n=e.clientWidth),document.body.removeChild(e);var s=i-n;return D={width:s,height:s}}function c(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var i in e)({}).hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t}function u(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var i=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),n=p(t).replace(i," ");g(t,n)}}function d(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{u(t,e);var i=p(t)+" "+e;g(t,i)}}function f(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=p(t);return new RegExp("(^| )"+e+"( |$)","gi").test(i)}function p(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function g(t,e){t.setAttribute("class",e)}function m(t,e,i){i.forEach(function(i){-1===e.indexOf(i)&&f(t,i)&&u(t,i)}),e.forEach(function(e){f(t,e)||d(t,e)})}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function b(t,e){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+i>=e&&e>=t-i}function _(){return"undefined"!=typeof performance&&void 0!==performance.now?performance.now():+new Date}function y(){for(var t={top:0,left:0},e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach(function(e){var i=e.top,n=e.left;"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof n&&(n=parseFloat(n,10)),t.top+=i,t.left+=n}),t}function C(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function x(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),void 0!==e.nodeType&&function(){var t=e,i=a(e),n=i,s=getComputedStyle(e);if(e=[n.left,n.top,i.width+n.left,i.height+n.top],t.ownerDocument!==document){var o=t.ownerDocument.defaultView;e[0]+=o.pageXOffset,e[1]+=o.pageYOffset,e[2]+=o.pageXOffset,e[3]+=o.pageYOffset}$.forEach(function(t,i){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[i]+=parseFloat(s["border"+t+"Width"]):e[i]-=parseFloat(s["border"+t+"Width"])})}(),e}var w=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),T=void 0;void 0===T&&(T={modules:[]});var S=null,O=function(){var t=0;return function(){return++t}}(),E={},k=function(){var t=S;t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",O()),c(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),S=t);var e=t.getAttribute("data-tether-id");return void 0===E[e]&&(E[e]=s(t),I(function(){delete E[e]})),E[e]},D=null,A=[],I=function(t){A.push(t)},P=function(){for(var t=void 0;t=A.pop();)t()},j=function(){function t(){n(this,t)}return w(t,[{key:"on",value:function(t,e,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:n})}},{key:"once",value:function(t,e,i){this.on(t,e,i,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var i=0;i<this.bindings[t].length;)this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):++i}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(;e<this.bindings[t].length;){var o=this.bindings[t][e],r=o.handler,a=o.ctx,l=o.once,h=a;void 0===h&&(h=this),r.apply(h,n),l?this.bindings[t].splice(e,1):++e}}}}]),t}();T.Utils={getActualBoundingClientRect:s,getScrollParents:o,getBounds:a,getOffsetParent:l,extend:c,addClass:d,removeClass:u,hasClass:f,updateClasses:m,defer:I,flush:P,uniqueId:O,Evented:j,getScrollBarSize:h,removeUtilElements:r};var L=function(){function t(t,e){var i=[],n=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),M=function(t,e,i){for(var n=!0;n;){var s=t,o=e,r=i;n=!1,null===s&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(r)}var h=Object.getPrototypeOf(s);if(null===h)return;t=h,e=o,i=r,n=!0,a=h=void 0}};if(void 0===T)throw new Error("You must include the utils.js file before tether.js");var N=T.Utils,o=N.getScrollParents,a=N.getBounds,l=N.getOffsetParent,c=N.extend,d=N.addClass,u=N.removeClass,m=N.updateClasses,I=N.defer,P=N.flush,h=N.getScrollBarSize,r=N.removeUtilElements,B=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<e.length;++i){var n=e[i];if(void 0!==t.style[n])return n}}(),F=[],R=function(){F.forEach(function(t){t.position(!1)}),P()};!function(){var t=null,e=null,i=null,n=function n(){if(void 0!==e&&e>16)return e=Math.min(e-16,250),void(i=setTimeout(n,250));void 0!==t&&_()-t<10||(null!=i&&(clearTimeout(i),i=null),t=_(),R(),e=_()-t)};"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,n)})}();var H={center:"center",left:"right",right:"left"},W={middle:"middle",top:"bottom",bottom:"top"},z={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},U=function(t,e){var i=t.left,n=t.top;return"auto"===i&&(i=H[e.left]),"auto"===n&&(n=W[e.top]),{left:i,top:n}},q=function(t){var e=t.left,i=t.top;return void 0!==z[t.left]&&(e=z[t.left]),void 0!==z[t.top]&&(i=z[t.top]),{left:e,top:i}},V=function(t){var e=t.split(" "),i=L(e,2);return{top:i[0],left:i[1]}},X=V,G=function(t){function e(t){var i=this;n(this,e),M(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),F.push(this),this.history=[],this.setOptions(t,!1),T.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(i)}),this.position()}return v(e,t),w(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1],n={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=c(n,t);var s=this.options,r=s.element,a=s.target,l=s.targetModifier;if(this.element=r,this.target=a,this.targetModifier=l,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),d(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&d(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=X(this.options.targetAttachment),this.attachment=X(this.options.attachment),this.offset=V(this.options.offset),this.targetOffset=V(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=o(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return a(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((o={height:(t=a(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(o.height,t.height-(pageYOffset-t.top)),o.height=Math.min(o.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),o.height=Math.min(innerHeight,o.height),o.height-=2,o.width=Math.min(o.width,t.width-(pageXOffset-t.left)),o.width=Math.min(o.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),o.width=Math.min(innerWidth,o.width),o.width-=2,o.top<pageYOffset&&(o.top=pageYOffset),o.left<pageXOffset&&(o.left=pageXOffset),o);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=a(e);var i=getComputedStyle(e),n=0;(e.scrollWidth>e.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body)&&(n=15);var s=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-n,o={width:15,height:.975*s*(s/e.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},r=0;s<408&&this.target===document.body&&(r=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(o.height=Math.max(o.height,24));var l=this.target.scrollTop/(e.scrollHeight-s);return o.top=l*(s-o.height-r)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(o.height=Math.max(o.height,24)),o}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;u(this.target,this.getClass("enabled")),u(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),F.forEach(function(e,i){e===t&&F.splice(i,1)}),0===F.length&&r()}},{key:"updateAttachClasses",value:function(t,e){var i=this;t=t||this.attachment,e=e||this.targetAttachment;var n=["left","top","bottom","right","middle","center"];void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var s=this._addAttachClasses;t.top&&s.push(this.getClass("element-attached")+"-"+t.top),t.left&&s.push(this.getClass("element-attached")+"-"+t.left),e.top&&s.push(this.getClass("target-attached")+"-"+e.top),e.left&&s.push(this.getClass("target-attached")+"-"+e.left);var o=[];n.forEach(function(t){o.push(i.getClass("element-attached")+"-"+t),o.push(i.getClass("target-attached")+"-"+t)}),I(function(){void 0!==i._addAttachClasses&&(m(i.element,i._addAttachClasses,o),!1!==i.options.addTargetClasses&&m(i.target,i._addAttachClasses,o),delete i._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var i=U(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);var n=this.cache("element-bounds",function(){return a(t.element)}),s=n.width,o=n.height;if(0===s&&0===o&&void 0!==this.lastSize){var r=this.lastSize;s=r.width,o=r.height}else this.lastSize={width:s,height:o};var c=this.cache("target-bounds",function(){return t.getTargetBounds()}),u=c,d=C(q(this.attachment),{width:s,height:o}),f=C(q(i),u),p=C(this.offset,{width:s,height:o}),g=C(this.targetOffset,u);d=y(d,p),f=y(f,g);for(var m=c.left+f.left-d.left,v=c.top+f.top-d.top,b=0;b<T.modules.length;++b){var _=T.modules[b].position.call(this,{left:m,top:v,targetAttachment:i,targetPos:c,elementPos:n,offset:d,targetOffset:f,manualOffset:p,manualTargetOffset:g,scrollbarSize:O,attachment:this.attachment});if(!1===_)return!1;void 0!==_&&"object"==typeof _&&(v=_.top,m=_.left)}var x={page:{top:v,left:m},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-o+innerHeight,left:m-pageXOffset,right:pageXOffset-m-s+innerWidth}},w=this.target.ownerDocument,S=w.defaultView,O=void 0;return S.innerHeight>w.documentElement.clientHeight&&(O=this.cache("scrollbar-size",h),x.viewport.bottom-=O.height),S.innerWidth>w.documentElement.clientWidth&&(O=this.cache("scrollbar-size",h),x.viewport.right-=O.width),-1!==["","static"].indexOf(w.body.style.position)&&-1!==["","static"].indexOf(w.body.parentElement.style.position)||(x.page.bottom=w.body.scrollHeight-v-o,x.page.right=w.body.scrollWidth-m-s),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=t.cache("target-offsetparent",function(){return l(t.target)}),i=t.cache("target-offsetparent-bounds",function(){return a(e)}),n=getComputedStyle(e),s=i,o={};if(["Top","Left","Bottom","Right"].forEach(function(t){o[t.toLowerCase()]=parseFloat(n["border"+t+"Width"])}),i.right=w.body.scrollWidth-i.left-s.width+o.right,i.bottom=w.body.scrollHeight-i.top-s.height+o.bottom,x.page.top>=i.top+o.top&&x.page.bottom>=i.bottom&&x.page.left>=i.left+o.left&&x.page.right>=i.right){var r=e.scrollTop,h=e.scrollLeft;x.offset={top:x.page.top-i.top+r-o.top,left:x.page.left-i.left+h-o.left}}}(),this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),e&&P(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var i={};for(var n in t){i[n]={};for(var s in t[n]){for(var o=!1,r=0;r<this.history.length;++r){var a=this.history[r];if(void 0!==a[n]&&!b(a[n][s],t[n][s])){o=!0;break}}o||(i[n][s]=!0)}}var h={top:"",left:"",right:"",bottom:""},u=function(t,i){if(!1!==(void 0!==e.options.optimizations?e.options.optimizations.gpu:null)){var n=void 0,s=void 0;t.top?(h.top=0,n=i.top):(h.bottom=0,n=-i.bottom),t.left?(h.left=0,s=i.left):(h.right=0,s=-i.right),window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches||(s=Math.round(s),n=Math.round(n))),h[B]="translateX("+s+"px) translateY("+n+"px)","msTransform"!==B&&(h[B]+=" translateZ(0)")}else t.top?h.top=i.top+"px":h.bottom=i.bottom+"px",t.left?h.left=i.left+"px":h.right=i.right+"px"},d=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(h.position="absolute",u(i.page,t.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(h.position="fixed",u(i.viewport,t.viewport)):void 0!==i.offset&&i.offset.top&&i.offset.left?function(){h.position="absolute";var n=e.cache("target-offsetparent",function(){return l(e.target)});l(e.element)!==n&&I(function(){e.element.parentNode.removeChild(e.element),n.appendChild(e.element)}),u(i.offset,t.offset),d=!0}():(h.position="absolute",u({top:!0,left:!0},t.page)),!d)if(this.options.bodyElement)this.options.bodyElement.appendChild(this.element);else{for(var f=!0,p=this.element.parentNode;p&&1===p.nodeType&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){f=!1;break}p=p.parentNode}f||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var g={},m=!1;for(var s in h){var v=h[s];this.element.style[s]!==v&&(m=!0,g[s]=v)}m&&I(function(){c(e.element.style,g),e.trigger("repositioned")})}}}]),e}(j);G.modules=[],T.position=R;var Y=c(G,T),L=function(){function t(t,e){var i=[],n=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=(N=T.Utils).getBounds,c=N.extend,m=N.updateClasses,I=N.defer,$=["left","top","right","bottom"];T.modules.push({position:function(t){var e=this,i=t.top,n=t.left,s=t.targetAttachment;if(!this.options.constraints)return!0;var o=this.cache("element-bounds",function(){return a(e.element)}),r=o.height,l=o.width;if(0===l&&0===r&&void 0!==this.lastSize){var h=this.lastSize;l=h.width,r=h.height}var u=this.cache("target-bounds",function(){return e.getTargetBounds()}),d=u.height,f=u.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,i=t.pinnedClass;e&&p.push(e),i&&p.push(i)}),p.forEach(function(t){["left","top","right","bottom"].forEach(function(e){p.push(t+"-"+e)})});var g=[],v=c({},s),b=c({},this.attachment);return this.options.constraints.forEach(function(t){var o=t.to,a=t.attachment,h=t.pin;void 0===a&&(a="");var c=void 0,u=void 0;if(a.indexOf(" ")>=0){var p=a.split(" "),m=L(p,2);u=m[0],c=m[1]}else c=u=a;var _=x(e,o);"target"!==u&&"both"!==u||(i<_[1]&&"top"===v.top&&(i+=d,v.top="bottom"),i+r>_[3]&&"bottom"===v.top&&(i-=d,v.top="top")),"together"===u&&("top"===v.top&&("bottom"===b.top&&i<_[1]?(i+=d,v.top="bottom",i+=r,b.top="top"):"top"===b.top&&i+r>_[3]&&i-(r-d)>=_[1]&&(i-=r-d,v.top="bottom",b.top="bottom")),"bottom"===v.top&&("top"===b.top&&i+r>_[3]?(i-=d,v.top="top",i-=r,b.top="bottom"):"bottom"===b.top&&i<_[1]&&i+(2*r-d)<=_[3]&&(i+=r-d,v.top="top",b.top="top")),"middle"===v.top&&(i+r>_[3]&&"top"===b.top?(i-=r,b.top="bottom"):i<_[1]&&"bottom"===b.top&&(i+=r,b.top="top"))),"target"!==c&&"both"!==c||(n<_[0]&&"left"===v.left&&(n+=f,v.left="right"),n+l>_[2]&&"right"===v.left&&(n-=f,v.left="left")),"together"===c&&(n<_[0]&&"left"===v.left?"right"===b.left?(n+=f,v.left="right",n+=l,b.left="left"):"left"===b.left&&(n+=f,v.left="right",n-=l,b.left="right"):n+l>_[2]&&"right"===v.left?"left"===b.left?(n-=f,v.left="left",n-=l,b.left="right"):"right"===b.left&&(n-=f,v.left="left",n+=l,b.left="left"):"center"===v.left&&(n+l>_[2]&&"left"===b.left?(n-=l,b.left="right"):n<_[0]&&"right"===b.left&&(n+=l,b.left="left"))),"element"!==u&&"both"!==u||(i<_[1]&&"bottom"===b.top&&(i+=r,b.top="top"),i+r>_[3]&&"top"===b.top&&(i-=r,b.top="bottom")),"element"!==c&&"both"!==c||(n<_[0]&&("right"===b.left?(n+=l,b.left="left"):"center"===b.left&&(n+=l/2,b.left="left")),n+l>_[2]&&("left"===b.left?(n-=l,b.left="right"):"center"===b.left&&(n-=l/2,b.left="right"))),"string"==typeof h?h=h.split(",").map(function(t){return t.trim()}):!0===h&&(h=["top","left","right","bottom"]),h=h||[];var y=[],C=[];i<_[1]&&(h.indexOf("top")>=0?(i=_[1],y.push("top")):C.push("top")),i+r>_[3]&&(h.indexOf("bottom")>=0?(i=_[3]-r,y.push("bottom")):C.push("bottom")),n<_[0]&&(h.indexOf("left")>=0?(n=_[0],y.push("left")):C.push("left")),n+l>_[2]&&(h.indexOf("right")>=0?(n=_[2]-l,y.push("right")):C.push("right")),y.length&&function(){var t=void 0;t=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(t),y.forEach(function(e){g.push(t+"-"+e)})}(),C.length&&function(){var t=void 0;t=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(t),C.forEach(function(e){g.push(t+"-"+e)})}(),(y.indexOf("left")>=0||y.indexOf("right")>=0)&&(b.left=v.left=!1),(y.indexOf("top")>=0||y.indexOf("bottom")>=0)&&(b.top=v.top=!1),v.top===s.top&&v.left===s.left&&b.top===e.attachment.top&&b.left===e.attachment.left||(e.updateAttachClasses(b,v),e.trigger("update",{attachment:b,targetAttachment:v}))}),I(function(){!1!==e.options.addTargetClasses&&m(e.target,g,p),m(e.element,g,p)}),{top:i,left:n}}});var a=(N=T.Utils).getBounds,m=N.updateClasses,I=N.defer;T.modules.push({position:function(t){var e=this,i=t.top,n=t.left,s=this.cache("element-bounds",function(){return a(e.element)}),o=s.height,r=s.width,l=this.getTargetBounds(),h=i+o,c=n+r,u=[];i<=l.bottom&&h>=l.top&&["left","right"].forEach(function(t){var e=l[t];e!==n&&e!==c||u.push(t)}),n<=l.right&&c>=l.left&&["top","bottom"].forEach(function(t){var e=l[t];e!==i&&e!==h||u.push(t)});var d=[],f=[],p=["left","top","right","bottom"];return d.push(this.getClass("abutted")),p.forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),u.length&&f.push(this.getClass("abutted")),u.forEach(function(t){f.push(e.getClass("abutted")+"-"+t)}),I(function(){!1!==e.options.addTargetClasses&&m(e.target,f,d),m(e.element,f,d)}),!0}});L=function(){function t(t,e){var i=[],n=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return T.modules.push({position:function(t){var e=t.top,i=t.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:e,left:i}));var s=void 0,o=void 0;if("string"==typeof n){(n=n.split(" "))[1]=n[1]||n[0];var r=L(n,2);s=r[0],o=r[1],s=parseFloat(s,10),o=parseFloat(o,10)}else s=n.top,o=n.left;return e+=s,i+=o,{top:e,left:i}}}}),Y}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(jQuery),function(){function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function i(t){return(t[0]||t).nodeType}function n(){return{bindType:r.end,delegateType:r.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}function s(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in a)if(void 0!==t.style[e])return{end:a[e]};return!1}function o(e){var i=this,n=!1;return t(this).one(l.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||l.triggerTransitionEnd(i)},e),this}var r=!1,a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},l={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(r.end)},supportsTransitionEnd:function(){return Boolean(r)},typeCheckConfig:function(t,n,s){for(var o in s)if(s.hasOwnProperty(o)){var r=s[o],a=n[o],l=a&&i(a)?"element":e(a);if(!new RegExp(r).test(l))throw new Error(t.toUpperCase()+': Option "'+o+'" provided type "'+l+'" but expected type "'+r+'".')}}};return r=s(),t.fn.emulateTransitionEnd=o,l.supportsTransitionEnd()&&(t.event.special[l.TRANSITION_END]=n()),l}(jQuery),r=(function(t){var e="alert",n=t.fn[e],r={DISMISS:'[data-dismiss="alert"]'},a={CLOSE:"close.bs.alert",CLOSED:"closed.bs.alert",CLICK_DATA_API:"click.bs.alert.data-api"},l={ALERT:"alert",FADE:"fade",SHOW:"show"},h=function(){function e(t){i(this,e),this._element=t}return e.prototype.close=function(t){t=t||this._element;var e=this._getRootElement(t);this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},e.prototype.dispose=function(){t.removeData(this._element,"bs.alert"),this._element=null},e.prototype._getRootElement=function(e){var i=o.getSelectorFromElement(e),n=!1;return i&&(n=t(i)[0]),n||(n=t(e).closest("."+l.ALERT)[0]),n},e.prototype._triggerCloseEvent=function(e){var i=t.Event(a.CLOSE);return t(e).trigger(i),i},e.prototype._removeElement=function(e){var i=this;t(e).removeClass(l.SHOW),o.supportsTransitionEnd()&&t(e).hasClass(l.FADE)?t(e).one(o.TRANSITION_END,function(t){return i._destroyElement(e,t)}).emulateTransitionEnd(150):this._destroyElement(e)},e.prototype._destroyElement=function(e){t(e).detach().trigger(a.CLOSED).remove()},e._jQueryInterface=function(i){return this.each(function(){var n=t(this),s=n.data("bs.alert");s||(s=new e(this),n.data("bs.alert",s)),"close"===i&&s[i](this)})},e._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},s(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(a.CLICK_DATA_API,r.DISMISS,h._handleDismiss(new h)),t.fn[e]=h._jQueryInterface,t.fn[e].Constructor=h,t.fn[e].noConflict=function(){return t.fn[e]=n,h._jQueryInterface}}(jQuery),function(t){var e="button",n=t.fn[e],o={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},r={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},a={CLICK_DATA_API:"click.bs.button.data-api",FOCUS_BLUR_DATA_API:"focus.bs.button.data-api blur.bs.button.data-api"},l=function(){function e(t){i(this,e),this._element=t}return e.prototype.toggle=function(){var e=!0,i=t(this._element).closest(r.DATA_TOGGLE)[0];if(i){var n=t(this._element).find(r.INPUT)[0];if(n){if("radio"===n.type)if(n.checked&&t(this._element).hasClass(o.ACTIVE))e=!1;else{var s=t(i).find(r.ACTIVE)[0];s&&t(s).removeClass(o.ACTIVE)}e&&(n.checked=!t(this._element).hasClass(o.ACTIVE),t(n).trigger("change")),n.focus()}}this._element.setAttribute("aria-pressed",!t(this._element).hasClass(o.ACTIVE)),e&&t(this._element).toggleClass(o.ACTIVE)},e.prototype.dispose=function(){t.removeData(this._element,"bs.button"),this._element=null},e._jQueryInterface=function(i){return this.each(function(){var n=t(this).data("bs.button");n||(n=new e(this),t(this).data("bs.button",n)),"toggle"===i&&n[i]()})},s(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(a.CLICK_DATA_API,r.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var i=e.target;t(i).hasClass(o.BUTTON)||(i=t(i).closest(r.BUTTON)),l._jQueryInterface.call(t(i),"toggle")}).on(a.FOCUS_BLUR_DATA_API,r.DATA_TOGGLE_CARROT,function(e){var i=t(e.target).closest(r.BUTTON)[0];t(i).toggleClass(o.FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=l._jQueryInterface,t.fn[e].Constructor=l,t.fn[e].noConflict=function(){return t.fn[e]=n,l._jQueryInterface}}(jQuery),function(t){var e="carousel",r="bs.carousel",a="."+r,l=t.fn[e],h={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},c={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},u={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},d={SLIDE:"slide"+a,SLID:"slid"+a,KEYDOWN:"keydown"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a,LOAD_DATA_API:"load.bs.carousel.data-api",CLICK_DATA_API:"click.bs.carousel.data-api"},f={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},p={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},g=function(){function l(e,n){i(this,l),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(n),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(p.INDICATORS)[0],this._addEventListeners()}return l.prototype.next=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(u.NEXT)},l.prototype.nextWhenVisible=function(){document.hidden||this.next()},l.prototype.prev=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(u.PREVIOUS)},l.prototype.pause=function(e){e||(this._isPaused=!0),t(this._element).find(p.NEXT_PREV)[0]&&o.supportsTransitionEnd()&&(o.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},l.prototype.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},l.prototype.to=function(e){var i=this;this._activeElement=t(this._element).find(p.ACTIVE_ITEM)[0];var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)t(this._element).one(d.SLID,function(){return i.to(e)});else{if(n===e)return this.pause(),void this.cycle();var s=e>n?u.NEXT:u.PREVIOUS;this._slide(s,this._items[e])}},l.prototype.dispose=function(){t(this._element).off(a),t.removeData(this._element,r),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},l.prototype._getConfig=function(i){return i=t.extend({},h,i),o.typeCheckConfig(e,i,c),i},l.prototype._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on(d.KEYDOWN,function(t){return e._keydown(t)}),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||t(this._element).on(d.MOUSEENTER,function(t){return e.pause(t)}).on(d.MOUSELEAVE,function(t){return e.cycle(t)})},l.prototype._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next();break;default:return}},l.prototype._getItemIndex=function(e){return this._items=t.makeArray(t(e).parent().find(p.ITEM)),this._items.indexOf(e)},l.prototype._getItemByDirection=function(t,e){var i=t===u.NEXT,n=t===u.PREVIOUS,s=this._getItemIndex(e),o=this._items.length-1;if((n&&0===s||i&&s===o)&&!this._config.wrap)return e;var r=(s+(t===u.PREVIOUS?-1:1))%this._items.length;return-1===r?this._items[this._items.length-1]:this._items[r]},l.prototype._triggerSlideEvent=function(e,i){var n=t.Event(d.SLIDE,{relatedTarget:e,direction:i});return t(this._element).trigger(n),n},l.prototype._setActiveIndicatorElement=function(e){if(this._indicatorsElement){t(this._indicatorsElement).find(p.ACTIVE).removeClass(f.ACTIVE);var i=this._indicatorsElement.children[this._getItemIndex(e)];i&&t(i).addClass(f.ACTIVE)}},l.prototype._slide=function(e,i){var n=this,s=t(this._element).find(p.ACTIVE_ITEM)[0],r=i||s&&this._getItemByDirection(e,s),a=Boolean(this._interval),l=void 0,h=void 0,c=void 0;if(e===u.NEXT?(l=f.LEFT,h=f.NEXT,c=u.LEFT):(l=f.RIGHT,h=f.PREV,c=u.RIGHT),r&&t(r).hasClass(f.ACTIVE))this._isSliding=!1;else if(!this._triggerSlideEvent(r,c).isDefaultPrevented()&&s&&r){this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(r);var g=t.Event(d.SLID,{relatedTarget:r,direction:c});o.supportsTransitionEnd()&&t(this._element).hasClass(f.SLIDE)?(t(r).addClass(h),o.reflow(r),t(s).addClass(l),t(r).addClass(l),t(s).one(o.TRANSITION_END,function(){t(r).removeClass(l+" "+h).addClass(f.ACTIVE),t(s).removeClass(f.ACTIVE+" "+h+" "+l),n._isSliding=!1,setTimeout(function(){return t(n._element).trigger(g)},0)}).emulateTransitionEnd(600)):(t(s).removeClass(f.ACTIVE),t(r).addClass(f.ACTIVE),this._isSliding=!1,t(this._element).trigger(g)),a&&this.cycle()}},l._jQueryInterface=function(e){return this.each(function(){var i=t(this).data(r),s=t.extend({},h,t(this).data());"object"===(void 0===e?"undefined":n(e))&&t.extend(s,e);var o="string"==typeof e?e:s.slide;if(i||(i=new l(this,s),t(this).data(r,i)),"number"==typeof e)i.to(e);else if("string"==typeof o){if(void 0===i[o])throw new Error('No method named "'+o+'"');i[o]()}else s.interval&&(i.pause(),i.cycle())})},l._dataApiClickHandler=function(e){var i=o.getSelectorFromElement(this);if(i){var n=t(i)[0];if(n&&t(n).hasClass(f.CAROUSEL)){var s=t.extend({},t(n).data(),t(this).data()),a=this.getAttribute("data-slide-to");a&&(s.interval=!1),l._jQueryInterface.call(t(n),s),a&&t(n).data(r).to(a),e.preventDefault()}}},s(l,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return h}}]),l}();t(document).on(d.CLICK_DATA_API,p.DATA_SLIDE,g._dataApiClickHandler),t(window).on(d.LOAD_DATA_API,function(){t(p.DATA_RIDE).each(function(){var e=t(this);g._jQueryInterface.call(e,e.data())})}),t.fn[e]=g._jQueryInterface,t.fn[e].Constructor=g,t.fn[e].noConflict=function(){return t.fn[e]=l,g._jQueryInterface}}(jQuery),function(t){var e="collapse",r="bs.collapse",a=t.fn[e],l={toggle:!0,parent:""},h={toggle:"boolean",parent:"string"},c={SHOW:"show.bs.collapse",SHOWN:"shown.bs.collapse",HIDE:"hide.bs.collapse",HIDDEN:"hidden.bs.collapse",CLICK_DATA_API:"click.bs.collapse.data-api"},u={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},d={WIDTH:"width",HEIGHT:"height"},f={ACTIVES:".card > .show, .card > .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},p=function(){function a(e,n){i(this,a),this._isTransitioning=!1,this._element=e,this._config=this._getConfig(n),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]')),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return a.prototype.toggle=function(){t(this._element).hasClass(u.SHOW)?this.hide():this.show()},a.prototype.show=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(!t(this._element).hasClass(u.SHOW)){var i=void 0,n=void 0;if(this._parent&&((i=t.makeArray(t(this._parent).find(f.ACTIVES))).length||(i=null)),!(i&&(n=t(i).data(r))&&n._isTransitioning)){var s=t.Event(c.SHOW);if(t(this._element).trigger(s),!s.isDefaultPrevented()){i&&(a._jQueryInterface.call(t(i),"hide"),n||t(i).data(r,null));var l=this._getDimension();t(this._element).removeClass(u.COLLAPSE).addClass(u.COLLAPSING),this._element.style[l]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&t(this._triggerArray).removeClass(u.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){t(e._element).removeClass(u.COLLAPSING).addClass(u.COLLAPSE).addClass(u.SHOW),e._element.style[l]="",e.setTransitioning(!1),t(e._element).trigger(c.SHOWN)};if(o.supportsTransitionEnd()){var d="scroll"+(l[0].toUpperCase()+l.slice(1));t(this._element).one(o.TRANSITION_END,h).emulateTransitionEnd(600),this._element.style[l]=this._element[d]+"px"}else h()}}}},a.prototype.hide=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(t(this._element).hasClass(u.SHOW)){var i=t.Event(c.HIDE);if(t(this._element).trigger(i),!i.isDefaultPrevented()){var n=this._getDimension(),s=n===d.WIDTH?"offsetWidth":"offsetHeight";this._element.style[n]=this._element[s]+"px",o.reflow(this._element),t(this._element).addClass(u.COLLAPSING).removeClass(u.COLLAPSE).removeClass(u.SHOW),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&t(this._triggerArray).addClass(u.COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0);var r=function(){e.setTransitioning(!1),t(e._element).removeClass(u.COLLAPSING).addClass(u.COLLAPSE).trigger(c.HIDDEN)};this._element.style[n]="",o.supportsTransitionEnd()?t(this._element).one(o.TRANSITION_END,r).emulateTransitionEnd(600):r()}}},a.prototype.setTransitioning=function(t){this._isTransitioning=t},a.prototype.dispose=function(){t.removeData(this._element,r),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},a.prototype._getConfig=function(i){return i=t.extend({},l,i),i.toggle=Boolean(i.toggle),o.typeCheckConfig(e,i,h),i},a.prototype._getDimension=function(){return t(this._element).hasClass(d.WIDTH)?d.WIDTH:d.HEIGHT},a.prototype._getParent=function(){var e=this,i=t(this._config.parent)[0],n='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(i).find(n).each(function(t,i){e._addAriaAndCollapsedClass(a._getTargetFromElement(i),[i])}),i},a.prototype._addAriaAndCollapsedClass=function(e,i){if(e){var n=t(e).hasClass(u.SHOW);e.setAttribute("aria-expanded",n),i.length&&t(i).toggleClass(u.COLLAPSED,!n).attr("aria-expanded",n)}},a._getTargetFromElement=function(e){var i=o.getSelectorFromElement(e);return i?t(i)[0]:null},a._jQueryInterface=function(e){return this.each(function(){var i=t(this),s=i.data(r),o=t.extend({},l,i.data(),"object"===(void 0===e?"undefined":n(e))&&e);if(!s&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),s||(s=new a(this,o),i.data(r,s)),"string"==typeof e){if(void 0===s[e])throw new Error('No method named "'+e+'"');s[e]()}})},s(a,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return l}}]),a}();t(document).on(c.CLICK_DATA_API,f.DATA_TOGGLE,function(e){e.preventDefault();var i=p._getTargetFromElement(this),n=t(i).data(r)?"toggle":t(this).data();p._jQueryInterface.call(t(i),n)}),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=a,p._jQueryInterface}}(jQuery),function(t){var e="dropdown",n=".bs.dropdown",r=t.fn[e],a={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,CLICK:"click"+n,CLICK_DATA_API:"click.bs.dropdown.data-api",FOCUSIN_DATA_API:"focusin.bs.dropdown.data-api",KEYDOWN_DATA_API:"keydown.bs.dropdown.data-api"},l={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",SHOW:"show"},h={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},c=function(){function e(t){i(this,e),this._element=t,this._addEventListeners()}return e.prototype.toggle=function(){if(this.disabled||t(this).hasClass(l.DISABLED))return!1;var i=e._getParentFromElement(this),n=t(i).hasClass(l.SHOW);if(e._clearMenus(),n)return!1;if("ontouchstart"in document.documentElement&&!t(i).closest(h.NAVBAR_NAV).length){var s=document.createElement("div");s.className=l.BACKDROP,t(s).insertBefore(this),t(s).on("click",e._clearMenus)}var o={relatedTarget:this},r=t.Event(a.SHOW,o);return t(i).trigger(r),!r.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded",!0),t(i).toggleClass(l.SHOW),t(i).trigger(t.Event(a.SHOWN,o)),!1)},e.prototype.dispose=function(){t.removeData(this._element,"bs.dropdown"),t(this._element).off(n),this._element=null},e.prototype._addEventListeners=function(){t(this._element).on(a.CLICK,this.toggle)},e._jQueryInterface=function(i){return this.each(function(){var n=t(this).data("bs.dropdown");if(n||(n=new e(this),t(this).data("bs.dropdown",n)),"string"==typeof i){if(void 0===n[i])throw new Error('No method named "'+i+'"');n[i].call(this)}})},e._clearMenus=function(i){if(!i||3!==i.which){var n=t(h.BACKDROP)[0];n&&n.parentNode.removeChild(n);for(var s=t.makeArray(t(h.DATA_TOGGLE)),o=0;o<s.length;o++){var r=e._getParentFromElement(s[o]),c={relatedTarget:s[o]};if(t(r).hasClass(l.SHOW)&&!(i&&("click"===i.type&&/input|textarea/i.test(i.target.tagName)||"focusin"===i.type)&&t.contains(r,i.target))){var u=t.Event(a.HIDE,c);t(r).trigger(u),u.isDefaultPrevented()||(s[o].setAttribute("aria-expanded","false"),t(r).removeClass(l.SHOW).trigger(t.Event(a.HIDDEN,c)))}}}},e._getParentFromElement=function(e){var i=void 0,n=o.getSelectorFromElement(e);return n&&(i=t(n)[0]),i||e.parentNode},e._dataApiKeydownHandler=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)&&(i.preventDefault(),i.stopPropagation(),!this.disabled&&!t(this).hasClass(l.DISABLED))){var n=e._getParentFromElement(this),s=t(n).hasClass(l.SHOW);if(!s&&27!==i.which||s&&27===i.which){if(27===i.which){var o=t(n).find(h.DATA_TOGGLE)[0];t(o).trigger("focus")}t(this).trigger("click")}else{var r=t(n).find(h.VISIBLE_ITEMS).get();if(r.length){var a=r.indexOf(i.target);38===i.which&&a>0&&a--,40===i.which&&a<r.length-1&&a++,a<0&&(a=0),r[a].focus()}}}},s(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(a.KEYDOWN_DATA_API,h.DATA_TOGGLE,c._dataApiKeydownHandler).on(a.KEYDOWN_DATA_API,h.ROLE_MENU,c._dataApiKeydownHandler).on(a.KEYDOWN_DATA_API,h.ROLE_LISTBOX,c._dataApiKeydownHandler).on(a.CLICK_DATA_API+" "+a.FOCUSIN_DATA_API,c._clearMenus).on(a.CLICK_DATA_API,h.DATA_TOGGLE,c.prototype.toggle).on(a.CLICK_DATA_API,h.FORM_CHILD,function(t){t.stopPropagation()}),t.fn[e]=c._jQueryInterface,t.fn[e].Constructor=c,t.fn[e].noConflict=function(){return t.fn[e]=r,c._jQueryInterface}}(jQuery),function(t){var e="modal",r=".bs.modal",a=t.fn[e],l={backdrop:!0,keyboard:!0,focus:!0,show:!0},h={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},c={HIDE:"hide.bs.modal",HIDDEN:"hidden.bs.modal",SHOW:"show.bs.modal",SHOWN:"shown.bs.modal",FOCUSIN:"focusin.bs.modal",RESIZE:"resize.bs.modal",CLICK_DISMISS:"click.dismiss.bs.modal",KEYDOWN_DISMISS:"keydown.dismiss.bs.modal",MOUSEUP_DISMISS:"mouseup.dismiss.bs.modal",MOUSEDOWN_DISMISS:"mousedown.dismiss.bs.modal",CLICK_DATA_API:"click.bs.modal.data-api"},u={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},d={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top"},f=function(){function a(e,n){i(this,a),this._config=this._getConfig(n),this._element=e,this._dialog=t(e).find(d.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return a.prototype.toggle=function(t){return this._isShown?this.hide():this.show(t)},a.prototype.show=function(e){var i=this;if(this._isTransitioning)throw new Error("Modal is transitioning");o.supportsTransitionEnd()&&t(this._element).hasClass(u.FADE)&&(this._isTransitioning=!0);var n=t.Event(c.SHOW,{relatedTarget:e});t(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),t(document.body).addClass(u.OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(c.CLICK_DISMISS,d.DATA_DISMISS,function(t){return i.hide(t)}),t(this._dialog).on(c.MOUSEDOWN_DISMISS,function(){t(i._element).one(c.MOUSEUP_DISMISS,function(e){t(e.target).is(i._element)&&(i._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return i._showElement(e)}))},a.prototype.hide=function(e){var i=this;if(e&&e.preventDefault(),this._isTransitioning)throw new Error("Modal is transitioning");var n=o.supportsTransitionEnd()&&t(this._element).hasClass(u.FADE);n&&(this._isTransitioning=!0);var s=t.Event(c.HIDE);t(this._element).trigger(s),this._isShown&&!s.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),t(document).off(c.FOCUSIN),t(this._element).removeClass(u.SHOW),t(this._element).off(c.CLICK_DISMISS),t(this._dialog).off(c.MOUSEDOWN_DISMISS),n?t(this._element).one(o.TRANSITION_END,function(t){return i._hideModal(t)}).emulateTransitionEnd(300):this._hideModal())},a.prototype.dispose=function(){t.removeData(this._element,"bs.modal"),t(window,document,this._element,this._backdrop).off(r),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null},a.prototype._getConfig=function(i){return i=t.extend({},l,i),o.typeCheckConfig(e,i,h),i},a.prototype._showElement=function(e){var i=this,n=o.supportsTransitionEnd()&&t(this._element).hasClass(u.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,n&&o.reflow(this._element),t(this._element).addClass(u.SHOW),this._config.focus&&this._enforceFocus();var s=t.Event(c.SHOWN,{relatedTarget:e}),r=function(){i._config.focus&&i._element.focus(),i._isTransitioning=!1,t(i._element).trigger(s)};n?t(this._dialog).one(o.TRANSITION_END,r).emulateTransitionEnd(300):r()},a.prototype._enforceFocus=function(){var e=this;t(document).off(c.FOCUSIN).on(c.FOCUSIN,function(i){document===i.target||e._element===i.target||t(e._element).has(i.target).length||e._element.focus()})},a.prototype._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(c.KEYDOWN_DISMISS,function(t){27===t.which&&e.hide()}):this._isShown||t(this._element).off(c.KEYDOWN_DISMISS)},a.prototype._setResizeEvent=function(){var e=this;this._isShown?t(window).on(c.RESIZE,function(t){return e._handleUpdate(t)}):t(window).off(c.RESIZE)},a.prototype._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(u.OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(c.HIDDEN)})},a.prototype._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},a.prototype._showBackdrop=function(e){var i=this,n=t(this._element).hasClass(u.FADE)?u.FADE:"";if(this._isShown&&this._config.backdrop){var s=o.supportsTransitionEnd()&&n;if(this._backdrop=document.createElement("div"),this._backdrop.className=u.BACKDROP,n&&t(this._backdrop).addClass(n),t(this._backdrop).appendTo(document.body),t(this._element).on(c.CLICK_DISMISS,function(t){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===i._config.backdrop?i._element.focus():i.hide())}),s&&o.reflow(this._backdrop),t(this._backdrop).addClass(u.SHOW),!e)return;if(!s)return void e();t(this._backdrop).one(o.TRANSITION_END,e).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(u.SHOW);var r=function(){i._removeBackdrop(),e&&e()};o.supportsTransitionEnd()&&t(this._element).hasClass(u.FADE)?t(this._backdrop).one(o.TRANSITION_END,r).emulateTransitionEnd(150):r()}else e&&e()},a.prototype._handleUpdate=function(){this._adjustDialog()},a.prototype._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},a.prototype._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},a.prototype._checkScrollbar=function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},a.prototype._setScrollbar=function(){var e=parseInt(t(d.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=e+this._scrollbarWidth+"px")},a.prototype._resetScrollbar=function(){document.body.style.paddingRight=this._originalBodyPadding},a.prototype._getScrollbarWidth=function(){var t=document.createElement("div");t.className=u.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},a._jQueryInterface=function(e,i){return this.each(function(){var s=t(this).data("bs.modal"),o=t.extend({},a.Default,t(this).data(),"object"===(void 0===e?"undefined":n(e))&&e);if(s||(s=new a(this,o),t(this).data("bs.modal",s)),"string"==typeof e){if(void 0===s[e])throw new Error('No method named "'+e+'"');s[e](i)}else o.show&&s.show(i)})},s(a,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return l}}]),a}();t(document).on(c.CLICK_DATA_API,d.DATA_TOGGLE,function(e){var i=this,n=void 0,s=o.getSelectorFromElement(this);s&&(n=t(s)[0]);var r=t(n).data("bs.modal")?"toggle":t.extend({},t(n).data(),t(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var a=t(n).one(c.SHOW,function(e){e.isDefaultPrevented()||a.one(c.HIDDEN,function(){t(i).is(":visible")&&i.focus()})});f._jQueryInterface.call(t(n),r,this)}),t.fn[e]=f._jQueryInterface,t.fn[e].Constructor=f,t.fn[e].noConflict=function(){return t.fn[e]=a,f._jQueryInterface}}(jQuery),function(t){var e="scrollspy",r=t.fn[e],a={offset:10,method:"auto",target:""},l={offset:"number",method:"string",target:"(string|element)"},h={ACTIVATE:"activate.bs.scrollspy",SCROLL:"scroll.bs.scrollspy",LOAD_DATA_API:"load.bs.scrollspy.data-api"},c={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",NAV_LINK:"nav-link",NAV:"nav",ACTIVE:"active"},u={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",LIST_ITEM:".list-item",LI:"li",LI_DROPDOWN:"li.dropdown",NAV_LINKS:".nav-link",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},d={OFFSET:"offset",POSITION:"position"},f=function(){function r(e,n){var s=this;i(this,r),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(n),this._selector=this._config.target+" "+u.NAV_LINKS+","+this._config.target+" "+u.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(h.SCROLL,function(t){return s._process(t)}),this.refresh(),this._process()}return r.prototype.refresh=function(){var e=this,i=this._scrollElement!==this._scrollElement.window?d.POSITION:d.OFFSET,n="auto"===this._config.method?i:this._config.method,s=n===d.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),t.makeArray(t(this._selector)).map(function(e){var i=void 0,r=o.getSelectorFromElement(e);return r&&(i=t(r)[0]),i&&(i.offsetWidth||i.offsetHeight)?[t(i)[n]().top+s,r]:null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},r.prototype.dispose=function(){t.removeData(this._element,"bs.scrollspy"),t(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},r.prototype._getConfig=function(i){if("string"!=typeof(i=t.extend({},a,i)).target){var n=t(i.target).attr("id");n||(n=o.getUID(e),t(i.target).attr("id",n)),i.target="#"+n}return o.typeCheckConfig(e,i,l),i},r.prototype._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},r.prototype._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},r.prototype._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.offsetHeight},r.prototype._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var s=this._offsets.length;s--;)this._activeTarget!==this._targets[s]&&t>=this._offsets[s]&&(void 0===this._offsets[s+1]||t<this._offsets[s+1])&&this._activate(this._targets[s])}},r.prototype._activate=function(e){this._activeTarget=e,this._clear();var i=this._selector.split(",");i=i.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var n=t(i.join(","));n.hasClass(c.DROPDOWN_ITEM)?(n.closest(u.DROPDOWN).find(u.DROPDOWN_TOGGLE).addClass(c.ACTIVE),n.addClass(c.ACTIVE)):n.parents(u.LI).find("> "+u.NAV_LINKS).addClass(c.ACTIVE),t(this._scrollElement).trigger(h.ACTIVATE,{relatedTarget:e})},r.prototype._clear=function(){t(this._selector).filter(u.ACTIVE).removeClass(c.ACTIVE)},r._jQueryInterface=function(e){return this.each(function(){var i=t(this).data("bs.scrollspy"),s="object"===(void 0===e?"undefined":n(e))&&e;if(i||(i=new r(this,s),t(this).data("bs.scrollspy",i)),"string"==typeof e){if(void 0===i[e])throw new Error('No method named "'+e+'"');i[e]()}})},s(r,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return a}}]),r}();t(window).on(h.LOAD_DATA_API,function(){for(var e=t.makeArray(t(u.DATA_SPY)),i=e.length;i--;){var n=t(e[i]);f._jQueryInterface.call(n,n.data())}}),t.fn[e]=f._jQueryInterface,t.fn[e].Constructor=f,t.fn[e].noConflict=function(){return t.fn[e]=r,f._jQueryInterface}}(jQuery),function(t){var e=t.fn.tab,n={HIDE:"hide.bs.tab",HIDDEN:"hidden.bs.tab",SHOW:"show.bs.tab",SHOWN:"shown.bs.tab",CLICK_DATA_API:"click.bs.tab.data-api"},r={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},a={A:"a",LI:"li",DROPDOWN:".dropdown",LIST:"ul:not(.dropdown-menu), ol:not(.dropdown-menu), nav:not(.dropdown-menu)",FADE_CHILD:"> .nav-item .fade, > .fade",ACTIVE:".active",ACTIVE_CHILD:"> .nav-item > .active, > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},l=function(){function e(t){i(this,e),this._element=t}return e.prototype.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(r.ACTIVE)||t(this._element).hasClass(r.DISABLED))){var i=void 0,s=void 0,l=t(this._element).closest(a.LIST)[0],h=o.getSelectorFromElement(this._element);l&&(s=t.makeArray(t(l).find(a.ACTIVE)),s=s[s.length-1]);var c=t.Event(n.HIDE,{relatedTarget:this._element}),u=t.Event(n.SHOW,{relatedTarget:s});if(s&&t(s).trigger(c),t(this._element).trigger(u),!u.isDefaultPrevented()&&!c.isDefaultPrevented()){h&&(i=t(h)[0]),this._activate(this._element,l);var d=function(){var i=t.Event(n.HIDDEN,{relatedTarget:e._element}),o=t.Event(n.SHOWN,{relatedTarget:s});t(s).trigger(i),t(e._element).trigger(o)};i?this._activate(i,i.parentNode,d):d()}}},e.prototype.dispose=function(){t.removeClass(this._element,"bs.tab"),this._element=null},e.prototype._activate=function(e,i,n){var s=this,l=t(i).find(a.ACTIVE_CHILD)[0],h=n&&o.supportsTransitionEnd()&&(l&&t(l).hasClass(r.FADE)||Boolean(t(i).find(a.FADE_CHILD)[0])),c=function(){return s._transitionComplete(e,l,h,n)};l&&h?t(l).one(o.TRANSITION_END,c).emulateTransitionEnd(150):c(),l&&t(l).removeClass(r.SHOW)},e.prototype._transitionComplete=function(e,i,n,s){if(i){t(i).removeClass(r.ACTIVE);var l=t(i.parentNode).find(a.DROPDOWN_ACTIVE_CHILD)[0];l&&t(l).removeClass(r.ACTIVE),i.setAttribute("aria-expanded",!1)}if(t(e).addClass(r.ACTIVE),e.setAttribute("aria-expanded",!0),n?(o.reflow(e),t(e).addClass(r.SHOW)):t(e).removeClass(r.FADE),e.parentNode&&t(e.parentNode).hasClass(r.DROPDOWN_MENU)){var h=t(e).closest(a.DROPDOWN)[0];h&&t(h).find(a.DROPDOWN_TOGGLE).addClass(r.ACTIVE),e.setAttribute("aria-expanded",!0)}s&&s()},e._jQueryInterface=function(i){return this.each(function(){var n=t(this),s=n.data("bs.tab");if(s||(s=new e(this),n.data("bs.tab",s)),"string"==typeof i){if(void 0===s[i])throw new Error('No method named "'+i+'"');s[i]()}})},s(e,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}}]),e}();t(document).on(n.CLICK_DATA_API,a.DATA_TOGGLE,function(e){e.preventDefault(),l._jQueryInterface.call(t(this),"show")}),t.fn.tab=l._jQueryInterface,t.fn.tab.Constructor=l,t.fn.tab.noConflict=function(){return t.fn.tab=e,l._jQueryInterface}}(jQuery),function(t){if("undefined"==typeof Tether)throw new Error("Bootstrap tooltips require Tether (http://tether.io/)");var e="tooltip",r=".bs.tooltip",a=t.fn[e],l={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[],container:!1},h={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array",container:"(string|element|boolean)"},c={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},u={SHOW:"show",OUT:"out"},d={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,INSERTED:"inserted"+r,CLICK:"click"+r,FOCUSIN:"focusin"+r,FOCUSOUT:"focusout"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r},f={FADE:"fade",SHOW:"show"},p={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},g={element:!1,enabled:!1},m={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},v=function(){function a(t,e){i(this,a),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._isTransitioning=!1,this._tether=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return a.prototype.enable=function(){this._isEnabled=!0},a.prototype.disable=function(){this._isEnabled=!1},a.prototype.toggleEnabled=function(){this._isEnabled=!this._isEnabled},a.prototype.toggle=function(e){if(e){var i=this.constructor.DATA_KEY,n=t(e.currentTarget).data(i);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(t(this.getTipElement()).hasClass(f.SHOW))return void this._leave(null,this);this._enter(null,this)}},a.prototype.dispose=function(){clearTimeout(this._timeout),this.cleanupTether(),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null},a.prototype.show=function(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var i=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){if(this._isTransitioning)throw new Error("Tooltip is transitioning");t(this.element).trigger(i);var n=t.contains(this.element.ownerDocument.documentElement,this.element);if(i.isDefaultPrevented()||!n)return;var s=this.getTipElement(),r=o.getUID(this.constructor.NAME);s.setAttribute("id",r),this.element.setAttribute("aria-describedby",r),this.setContent(),this.config.animation&&t(s).addClass(f.FADE);var l="function"==typeof this.config.placement?this.config.placement.call(this,s,this.element):this.config.placement,h=this._getAttachment(l),c=!1===this.config.container?document.body:t(this.config.container);t(s).data(this.constructor.DATA_KEY,this).appendTo(c),t(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:h,element:s,target:this.element,classes:g,classPrefix:"bs-tether",offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),o.reflow(s),this._tether.position(),t(s).addClass(f.SHOW);var d=function(){var i=e._hoverState;e._hoverState=null,e._isTransitioning=!1,t(e.element).trigger(e.constructor.Event.SHOWN),i===u.OUT&&e._leave(null,e)};if(o.supportsTransitionEnd()&&t(this.tip).hasClass(f.FADE))return this._isTransitioning=!0,void t(this.tip).one(o.TRANSITION_END,d).emulateTransitionEnd(a._TRANSITION_DURATION);d()}},a.prototype.hide=function(e){var i=this,n=this.getTipElement(),s=t.Event(this.constructor.Event.HIDE);if(this._isTransitioning)throw new Error("Tooltip is transitioning");var r=function(){i._hoverState!==u.SHOW&&n.parentNode&&n.parentNode.removeChild(n),i.element.removeAttribute("aria-describedby"),t(i.element).trigger(i.constructor.Event.HIDDEN),i._isTransitioning=!1,i.cleanupTether(),e&&e()};t(this.element).trigger(s),s.isDefaultPrevented()||(t(n).removeClass(f.SHOW),this._activeTrigger[m.CLICK]=!1,this._activeTrigger[m.FOCUS]=!1,this._activeTrigger[m.HOVER]=!1,o.supportsTransitionEnd()&&t(this.tip).hasClass(f.FADE)?(this._isTransitioning=!0,t(n).one(o.TRANSITION_END,r).emulateTransitionEnd(150)):r(),this._hoverState="")},a.prototype.isWithContent=function(){return Boolean(this.getTitle())},a.prototype.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0]},a.prototype.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(p.TOOLTIP_INNER),this.getTitle()),e.removeClass(f.FADE+" "+f.SHOW),this.cleanupTether()},a.prototype.setElementContent=function(e,i){var s=this.config.html;"object"===(void 0===i?"undefined":n(i))&&(i.nodeType||i.jquery)?s?t(i).parent().is(e)||e.empty().append(i):e.text(t(i).text()):e[s?"html":"text"](i)},a.prototype.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},a.prototype.cleanupTether=function(){this._tether&&this._tether.destroy()},a.prototype._getAttachment=function(t){return c[t.toUpperCase()]},a.prototype._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach(function(i){if("click"===i)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(i!==m.MANUAL){var n=i===m.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,s=i===m.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(n,e.config.selector,function(t){return e._enter(t)}).on(s,e.config.selector,function(t){return e._leave(t)})}t(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=t.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},a.prototype._fixTitle=function(){var t=n(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},a.prototype._enter=function(e,i){var n=this.constructor.DATA_KEY;(i=i||t(e.currentTarget).data(n))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),e&&(i._activeTrigger["focusin"===e.type?m.FOCUS:m.HOVER]=!0),t(i.getTipElement()).hasClass(f.SHOW)||i._hoverState===u.SHOW?i._hoverState=u.SHOW:(clearTimeout(i._timeout),i._hoverState=u.SHOW,i.config.delay&&i.config.delay.show?i._timeout=setTimeout(function(){i._hoverState===u.SHOW&&i.show()},i.config.delay.show):i.show())},a.prototype._leave=function(e,i){var n=this.constructor.DATA_KEY;(i=i||t(e.currentTarget).data(n))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),e&&(i._activeTrigger["focusout"===e.type?m.FOCUS:m.HOVER]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState=u.OUT,i.config.delay&&i.config.delay.hide?i._timeout=setTimeout(function(){i._hoverState===u.OUT&&i.hide()},i.config.delay.hide):i.hide())},a.prototype._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},a.prototype._getConfig=function(i){return(i=t.extend({},this.constructor.Default,t(this.element).data(),i)).delay&&"number"==typeof i.delay&&(i.delay={show:i.delay,hide:i.delay}),o.typeCheckConfig(e,i,this.constructor.DefaultType),i},a.prototype._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},a._jQueryInterface=function(e){return this.each(function(){var i=t(this).data("bs.tooltip"),s="object"===(void 0===e?"undefined":n(e))&&e;if((i||!/dispose|hide/.test(e))&&(i||(i=new a(this,s),t(this).data("bs.tooltip",i)),"string"==typeof e)){if(void 0===i[e])throw new Error('No method named "'+e+'"');i[e]()}})},s(a,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return l}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return d}},{key:"EVENT_KEY",get:function(){return r}},{key:"DefaultType",get:function(){return h}}]),a}();return t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=a,v._jQueryInterface},v}(jQuery));!function(o){var a="popover",l=".bs.popover",h=o.fn[a],c=o.extend({},r.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),u=o.extend({},r.DefaultType,{content:"(string|element|function)"}),d={FADE:"fade",SHOW:"show"},f={TITLE:".popover-title",CONTENT:".popover-content"},p={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,INSERTED:"inserted"+l,CLICK:"click"+l,FOCUSIN:"focusin"+l,FOCUSOUT:"focusout"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l},g=function(r){function h(){return i(this,h),t(this,r.apply(this,arguments))}return e(h,r),h.prototype.isWithContent=function(){return this.getTitle()||this._getContent()},h.prototype.getTipElement=function(){return this.tip=this.tip||o(this.config.template)[0]},h.prototype.setContent=function(){var t=o(this.getTipElement());this.setElementContent(t.find(f.TITLE),this.getTitle()),this.setElementContent(t.find(f.CONTENT),this._getContent()),t.removeClass(d.FADE+" "+d.SHOW),this.cleanupTether()},h.prototype._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},h._jQueryInterface=function(t){return this.each(function(){var e=o(this).data("bs.popover"),i="object"===(void 0===t?"undefined":n(t))?t:null;if((e||!/destroy|hide/.test(t))&&(e||(e=new h(this,i),o(this).data("bs.popover",e)),"string"==typeof t)){if(void 0===e[t])throw new Error('No method named "'+t+'"');e[t]()}})},s(h,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return c}},{key:"NAME",get:function(){return a}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return l}},{key:"DefaultType",get:function(){return u}}]),h}(r);o.fn[a]=g._jQueryInterface,o.fn[a].Constructor=g,o.fn[a].noConflict=function(){return o.fn[a]=h,g._jQueryInterface}}(jQuery)}();var fabric=fabric||{version:"1.7.13"};if("undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E")),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:fabric.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}}function n(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,s=i.length;n<s;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return!1!==t}),this}}}fabric.Observable={observe:e,stopObserving:i,fire:n,on:e,off:i,trigger:n}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=!1,n=0,s=arguments.length;n<s;n++)-1!==(t=e.indexOf(arguments[n]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=0,s=i.length;n<s;n++)t.call(e,i[n],n,i);return this},getObjects:function(t){return void 0===t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof fabric.Pattern?i&&i():this.set(e,new fabric.Pattern(t,i))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=fabric.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,i=Math.atan2,n=Math.pow,s=Math.abs,o=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*o},radiansToDegrees:function(t){return t/o},rotatePoint:function(t,e,i){t.subtractEquals(e);var n=fabric.util.rotateVector(t,i);return new fabric.Point(n.x,n.y).addEquals(e)},rotateVector:function(t,e){var i=Math.sin(e),n=Math.cos(e);return{x:t.x*n-t.y*i,y:t.x*i+t.y*n}},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],i=fabric.util.array.min(e),n=fabric.util.array.max(e),s=Math.abs(i-n),o=[t[0].y,t[1].y,t[2].y,t[3].y],r=fabric.util.array.min(o),a=fabric.util.array.max(o);return{left:i,top:r,width:s,height:Math.abs(r-a)}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],n=fabric.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),n=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*fabric.DPI/25.4;case"cm":return n*fabric.DPI/2.54;case"in":return n*fabric.DPI;case"pt":return n*fabric.DPI/72;case"pc":return n*fabric.DPI/72*12;case"em":return n*e;default:return n}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;var i,n=e.split("."),s=n.length,o=t||fabric.window;for(i=0;i<s;++i)o=o[n[i]];return o},loadImage:function(t,e,i,n){if(t){var s=fabric.util.createImage();s.onload=function(){e&&e.call(i,s),s=s.onload=s.onerror=null},s.onerror=function(){fabric.log("Error loading "+s.src),e&&e.call(i,null,!0),s=s.onload=s.onerror=null},0!==t.indexOf("data")&&n&&(s.crossOrigin=n),s.src=t}else e&&e.call(i,t)},enlivenObjects:function(t,e,i,n){function s(){++r===a&&e&&e(o)}var o=[],r=0,a=(t=t||[]).length;a?t.forEach(function(t,e){t&&t.type?fabric.util.getKlass(t.type,i).fromObject(t,function(i,r){r||(o[e]=i),n&&n(t,i,r),s()},!0):s()}):e&&e(o)},enlivenPatterns:function(t,e){function i(){++s===o&&e&&e(n)}var n=[],s=0,o=(t=t||[]).length;o?t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){n[e]=t,i()}):(n[e]=t,i())}):e&&e(n)},groupSVGElements:function(t,e,i){var n;return n=new fabric.PathGroup(t,e),void 0!==i&&(n.sourcePath=i),n},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,s=i.length;n<s;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,n,s,o,r,a){var l=o-n,h=r-s,c=e(l*l+h*h),u=i(h,l),d=a.length,f=0,p=!0;for(t.save(),t.translate(n,s),t.moveTo(0,0),t.rotate(u),n=0;c>n;)(n+=a[f++%d])>c&&(n=c),t[p?"lineTo":"moveTo"](n,0),p=!p;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){var e,i,n,s,o,r=t.prototype;for(e=r.stateProperties.length;e--;)s="set"+(n=(i=r.stateProperties[e]).charAt(0).toUpperCase()+i.slice(1)),r[o="get"+n]||(r[o]=function(t){return new Function('return this.get("'+t+'")')}(i)),r[s]||(r[s]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(i))},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var s=i(t[1],t[0]),r=n(t[0],2)+n(t[1],2),a=e(r),l=(t[0]*t[3]-t[2]*t[1])/a,h=i(t[0]*t[2]+t[1]*t[3],r);return{angle:s/o,scaleX:a,scaleY:l,skewX:h/o,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var n=[1,0,s(Math.tan(i*o)),1],r=[s(t),0,0,s(e)];return fabric.util.multiplyTransformMatrices(r,n,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);var s,o,r=!0,a=t.getImageData(e,i,2*n||1,2*n||1),l=a.data.length;for(s=3;s<l&&(o=a.data[s],!1!==(r=o<=0));s+=4);return a=null,r},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n="Mid",s="Mid",o=t.split(" ");return o&&o.length&&("meet"!==(i=o.pop())&&"slice"!==i?(e=i,i="meet"):o.length&&(e=o.pop())),n="none"!==e?e.slice(1,4):"none",s="none"!==e?e.slice(5,8):"none",{meetOrSlice:i,alignX:n,alignY:s}},clearFabricFontCache:function(t){t?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}}}}("undefined"!=typeof exports?exports:this),function(){function t(t,n,o,r,l,h,c){var u=a.call(arguments);if(s[u])return s[u];var d=Math.PI,f=c*d/180,p=Math.sin(f),g=Math.cos(f),m=0,v=0,b=-g*t*.5-p*n*.5,_=-g*n*.5+p*t*.5,y=(o=Math.abs(o))*o,C=(r=Math.abs(r))*r,x=_*_,w=b*b,T=y*C-y*x-C*w,S=0;if(T<0){var O=Math.sqrt(1-T/(y*C));o*=O,r*=O}else S=(l===h?-1:1)*Math.sqrt(T/(y*x+C*w));var E=S*o*_/r,k=-S*r*b/o,D=g*E-p*k+.5*t,A=p*E+g*k+.5*n,I=i(1,0,(b-E)/o,(_-k)/r),P=i((b-E)/o,(_-k)/r,(-b-E)/o,(-_-k)/r);0===h&&P>0?P-=2*d:1===h&&P<0&&(P+=2*d);for(var j=Math.ceil(Math.abs(P/d*2)),L=[],M=P/j,N=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2),B=I+M,F=0;F<j;F++)L[F]=e(I,B,g,p,o,r,D,A,N,m,v),m=L[F][4],v=L[F][5],I=B,B+=M;return s[u]=L,L}function e(t,e,i,n,s,r,l,h,c,u,d){var f=a.call(arguments);if(o[f])return o[f];var p=Math.cos(t),g=Math.sin(t),m=Math.cos(e),v=Math.sin(e),b=i*s*m-n*r*v+l,_=n*s*m+i*r*v+h,y=u+c*(-i*s*g-n*r*p),C=d+c*(-n*s*g+i*r*p),x=b+c*(i*s*v+n*r*m),w=_+c*(n*s*v-i*r*m);return o[f]=[y,C,x,w,b,_],o[f]}function i(t,e,i,n){var s=Math.atan2(e,t),o=Math.atan2(n,i);return o>=s?o-s:2*Math.PI-(s-o)}function n(t,e,i,n,s,o,l,h){var c=a.call(arguments);if(r[c])return r[c];var u,d,f,p,g,m,v,b,_=Math.sqrt,y=Math.min,C=Math.max,x=Math.abs,w=[],T=[[],[]];d=6*t-12*i+6*s,u=-3*t+9*i-9*s+3*l,f=3*i-3*t;for(var S=0;S<2;++S)if(S>0&&(d=6*e-12*n+6*o,u=-3*e+9*n-9*o+3*h,f=3*n-3*e),x(u)<1e-12){if(x(d)<1e-12)continue;0<(p=-f/d)&&p<1&&w.push(p)}else(v=d*d-4*f*u)<0||(0<(g=(-d+(b=_(v)))/(2*u))&&g<1&&w.push(g),0<(m=(-d-b)/(2*u))&&m<1&&w.push(m));for(var O,E,k,D=w.length,A=D;D--;)O=(k=1-(p=w[D]))*k*k*t+3*k*k*p*i+3*k*p*p*s+p*p*p*l,T[0][D]=O,E=k*k*k*e+3*k*k*p*n+3*k*p*p*o+p*p*p*h,T[1][D]=E;T[0][A]=t,T[1][A]=e,T[0][A+1]=l,T[1][A+1]=h;var I=[{x:y.apply(null,T[0]),y:y.apply(null,T[1])},{x:C.apply(null,T[0]),y:C.apply(null,T[1])}];return r[c]=I,I}var s={},o={},r={},a=Array.prototype.join;fabric.util.drawArc=function(e,i,n,s){for(var o=s[0],r=s[1],a=s[2],l=s[3],h=s[4],c=[[],[],[],[]],u=t(s[5]-i,s[6]-n,o,r,l,h,a),d=0,f=u.length;d<f;d++)c[d][0]=u[d][0]+i,c[d][1]=u[d][1]+n,c[d][2]=u[d][2]+i,c[d][3]=u[d][3]+n,c[d][4]=u[d][4]+i,c[d][5]=u[d][5]+n,e.bezierCurveTo.apply(e,c[d])},fabric.util.getBoundsOfArc=function(e,i,s,o,r,a,l,h,c){for(var u,d=0,f=0,p=[],g=t(h-e,c-i,s,o,a,l,r),m=0,v=g.length;m<v;m++)u=n(d,f,g[m][0],g[m][1],g[m][2],g[m][3],g[m][4],g[m][5]),p.push({x:u[0].x+e,y:u[0].y+i}),p.push({x:u[1].x+e,y:u[1].y+i}),d=g[m][4],f=g[m][5];return p},fabric.util.getBoundsOfCurve=n}(),function(){function t(t,e,i){if(t&&0!==t.length){var n=t.length-1,s=e?t[n][e]:t[n];if(e)for(;n--;)i(t[n][e],s)&&(s=t[n][e]);else for(;n--;)i(t[n],s)&&(s=t[n]);return s}}var e=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&((n=Number(arguments[1]))!==n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var s=n>=0?n:Math.max(i-Math.abs(n),0);s<i;s++)if(s in e&&e[s]===t)return s;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,s=this.length>>>0;n<s;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],s=0,o=this.length>>>0;s<o;s++)s in this&&(i=this[s],t.call(e,i,s,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(arguments.length>1)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={fill:function(t,e){for(var i=t.length;i--;)t[i]=e;return t},invoke:function(t,i){for(var n=e.call(arguments,2),s=[],o=0,r=t.length;o<r;o++)s[o]=n.length?t[o][i].apply(t[o],n):t[o][i].call(t[o]);return s},min:function(e,i){return t(e,i,function(t,e){return t<e})},max:function(e,i){return t(e,i,function(t,e){return t>=e})}}}(),function(){function t(e,i,n){if(n)if(!fabric.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var s=0,o=i.length;s<o;s++)e[s]=t({},i[s],n)}else if(i&&"object"==typeof i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=t({},i[r],n));else e=i;else for(var r in i)e[r]=i[r];return e}fabric.util.object={extend:t,clone:function(e,i){return t({},e,i)}}}(),function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(n){var s,o=this,r=t.call(arguments,1);return s=r.length?function(){return e.call(o,this instanceof i?this:n,r.concat(t.call(arguments)))}:function(){return e.call(o,this instanceof i?this:n,arguments)},i.prototype=this.prototype,s.prototype=new i,s})}(),function(){function t(){}function e(t){for(var e=null,n=this;n.constructor.superclass;){var s=n.constructor.superclass.prototype[t];if(n[t]!==s){e=s;break}n=n.constructor.superclass.prototype}return e?arguments.length>1?e.apply(this,i.call(arguments,1)):e.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}var i=Array.prototype.slice,n=function(){},s=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),o=function(t,e,i){for(var n in e)n in t.prototype&&"function"==typeof t.prototype[n]&&(e[n]+"").indexOf("callSuper")>-1?t.prototype[n]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var s=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return s}}(n):t.prototype[n]=e[n],s&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=function(){function s(){this.initialize.apply(this,arguments)}var r=null,a=i.call(arguments,0);"function"==typeof a[0]&&(r=a.shift()),s.superclass=r,s.subclasses=[],r&&(t.prototype=r.prototype,s.prototype=new t,r.subclasses.push(s));for(var l=0,h=a.length;l<h;l++)o(s,a[l],r);return s.prototype.initialize||(s.prototype.initialize=n),s.prototype.constructor=s,s.prototype.callSuper=e,s}}(),function(){function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),s=n.length;for(i=0;i<s;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(o(t),i||fabric.window.event)}}function n(t,e){return function(i){if(p[t]&&p[t][e])for(var n=p[t][e],s=0,o=n.length;s<o;s++)n[s].call(this,i||fabric.window.event)}}function s(t,e,i){var n="touchend"===t.type?"changedTouches":"touches";return t[n]&&t[n][0]?t[n][0][e]-(t[n][0][e]-t[n][0][i])||t[i]:t[i]}var o,r,a="unknown",l=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};o=function(e){return t[e]},r=function(e,i){t[e]=i}}();var h,c,u=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),d=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),f={},p={};u?(h=function(t,e,i,n){t.addEventListener(e,i,!d&&n)},c=function(t,e,i,n){t.removeEventListener(e,i,!d&&n)}):d?(h=function(t,i,n){var s=l(t);r(s,t),f[s]||(f[s]={}),f[s][i]||(f[s][i]=[]);var o=e(s,n);f[s][i].push(o),t.attachEvent("on"+i,o.wrappedHandler)},c=function(t,e,i){var n,s=l(t);if(f[s]&&f[s][e])for(var o=0,r=f[s][e].length;o<r;o++)(n=f[s][e][o])&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),f[s][e][o]=null)}):(h=function(t,e,i){var s=l(t);if(p[s]||(p[s]={}),!p[s][e]){p[s][e]=[];var o=t["on"+e];o&&p[s][e].push(o),t["on"+e]=n(s,e)}p[s][e].push(i)},c=function(t,e,i){var n=l(t);if(p[n]&&p[n][e])for(var s=p[n][e],o=0,r=s.length;o<r;o++)s[o]===i&&s.splice(o,1)}),fabric.util.addListener=h,fabric.util.removeListener=c;var g=function(t){return typeof t.clientX!==a?t.clientX:0},m=function(t){return typeof t.clientY!==a?t.clientY:0};fabric.isTouchSupported&&(g=function(t){return s(t,"pageX","clientX")},m=function(t){return s(t,"pageY","clientY")}),fabric.util.getPointer=function(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==a?t.srcElement:null),i=fabric.util.getScrollLeftTop(e);return{x:g(t)+i.left,y:m(t)+i.top}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){var t=fabric.document.createElement("div"),e="string"==typeof t.style.opacity,i="string"==typeof t.style.filter,n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(t){return t};e?s=function(t,e){return t.style.opacity=e,t}:i&&(s=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),n.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(n,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=function(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?s(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)"opacity"===n?s(t,e[n]):i["float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n]=e[n];return t}}(),function(){function t(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function e(t){for(var e=0,i=0,n=fabric.document.documentElement,s=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&(t=t.parentNode||t.host,t===fabric.document?(e=s.scrollLeft||n.scrollLeft||0,i=s.scrollTop||n.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:i}}var i,n=Array.prototype.slice,s=function(t){return n.call(t,0)};try{i=s(fabric.document.childNodes)instanceof Array}catch(t){}i||(s=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var o;o=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){var t=fabric.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),e?t.style[e]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}}(),function(){fabric.util.getScript=function(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),s=!0;n.onload=n.onreadystatechange=function(t){if(s){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;s=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)}}(),fabric.util.getById=function(t){return"string"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=s,fabric.util.makeElement=t,fabric.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},fabric.util.wrapElement=function(e,i,n){return"string"==typeof i&&(i=t(i,n)),e.parentNode&&e.parentNode.replaceChild(i,e),i.appendChild(e),i},fabric.util.getScrollLeftTop=e,fabric.util.getElementOffset=function(t){var i,n,s=t&&t.ownerDocument,r={left:0,top:0},a={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!s)return a;for(var h in l)a[l[h]]+=parseInt(o(t,h),10)||0;return i=s.documentElement,void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),n=e(t),{left:r.left+n.left-(i.clientLeft||0)+a.left,top:r.top+n.top-(i.clientTop||0)+a.top}},fabric.util.getElementStyle=o}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}var i=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();fabric.util.request=function(n,s){s||(s={});var o=s.method?s.method.toUpperCase():"GET",r=s.onComplete||function(){},a=i(),l=s.body||s.parameters;return a.onreadystatechange=function(){4===a.readyState&&(r(a),a.onreadystatechange=e)},"GET"===o&&(l=null,"string"==typeof s.parameters&&(n=t(n,s.parameters))),a.open(o,n,!0),"POST"!==o&&"PUT"!==o||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(l),a}}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(){return e.apply(fabric.window,arguments)}var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=function(e){t(function(i){e||(e={});var n,s=i||+new Date,o=e.duration||500,r=s+o,a=e.onChange||function(){},l=e.abort||function(){return!1},h=e.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},c="startValue"in e?e.startValue:0,u="endValue"in e?e.endValue:100,d=e.byValue||u-c;e.onStart&&e.onStart(),function i(u){var f=(n=u||+new Date)>r?o:n-s;l()?e.onComplete&&e.onComplete():(a(h(f,c,d,o)),n>r?e.onComplete&&e.onComplete():t(i))}(s)})},fabric.util.requestAnimFrame=t}(),function(){function t(t,e,i){var n="rgba("+parseInt(t[0]+i*(e[0]-t[0]),10)+","+parseInt(t[1]+i*(e[1]-t[1]),10)+","+parseInt(t[2]+i*(e[2]-t[2]),10);return n+=","+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1),n+=")"}fabric.util.animateColor=function(e,i,n,s){var o=new fabric.Color(e).getSource(),r=new fabric.Color(i).getSource();s=s||{},fabric.util.animate(fabric.util.object.extend(s,{duration:n||500,startValue:o,endValue:r,byValue:r,easing:function(e,i,n,o){return t(i,n,s.colorEasing?s.colorEasing(e,o):1-Math.cos(e/o*(Math.PI/2)))}}))}}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,s){return i-n(s-t,0,i,s)+e}function n(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,t<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e)},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return t/=n/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(i,n,s,o){var r=0,a=s;return 0===i?n:1==(i/=o)?n+s:(r||(r=.3*o),-e(t(a,s,r,1.70158),i,o)+n)},easeOutElastic:function(e,i,n,s){var o=0,r=n;if(0===e)return i;if(1==(e/=s))return i+n;o||(o=.3*s);var a=t(r,n,o,1.70158);return a.a*Math.pow(2,-10*e)*Math.sin((e*s-a.s)*(2*Math.PI)/a.p)+a.c+i},easeInOutElastic:function(i,n,s,o){var r=0,a=s;if(0===i)return n;if(2==(i/=o/2))return n+s;r||(r=o*(.3*1.5));var l=t(a,s,r,1.70158);return i<1?-.5*e(l,i,o)+n:l.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-l.s)*(2*Math.PI)/l.p)*.5+l.c+n},easeInBack:function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,i,n,s){return void 0===s&&(s=1.70158),t/=n/2,t<1?i/2*(t*t*((1+(s*=1.525))*t-s))+e:i/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},easeInBounce:i,easeOutBounce:n,easeInOutBounce:function(t,e,s,o){return t<o/2?.5*i(2*t,0,s,o)+e:.5*n(2*t-o,0,s,o)+.5*s+e}}}(),function(t){"use strict";function e(t){return t in S?S[t]:t}function i(t,e,i,n){var s,o="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e="none"===e?null:e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?y(i.transformMatrix,g.parseTransformAttribute(e)):g.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,i&&!1===i.visible&&(e=!1)):"opacity"===t?(e=parseFloat(e),i&&void 0!==i.opacity&&(e*=i.opacity)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":s=o?e.map(_):_(e,n):e="",!o&&isNaN(s)?e:s}function n(t){for(var e in O)if(void 0!==t[O[e]]&&""!==t[e]){if(void 0===t[e]){if(!g.Object.prototype[e])continue;t[e]=g.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var i=new g.Color(t[e]);t[e]=i.setAlpha(b(i.getAlpha()*t[O[e]],2)).toRgba()}}return t}function s(t,e){for(var i,n,s=[],o=0;o<e.length;o++)i=e[o],n=t.getElementsByTagName(i),s=s.concat(Array.prototype.slice.call(n));return s}function o(t,e){var i,n;t.replace(/;\s*$/,"").split(";").forEach(function(t){var s=t.split(":");i=s[0].trim().toLowerCase(),n=s[1].trim(),e[i]=n})}function r(t,e){var i,n;for(var s in t)void 0!==t[s]&&(i=s.toLowerCase(),n=t[s],e[i]=n)}function a(t,e){var i={};for(var n in g.cssRules[e])if(l(t,n.split(" ")))for(var s in g.cssRules[e][n])i[s]=g.cssRules[e][n][s];return i}function l(t,e){var i,n=!0;return(i=c(t,e.pop()))&&e.length&&(n=h(t,e)),i&&n&&0===e.length}function h(t,e){for(var i,n=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)n&&(i=e.pop()),n=c(t=t.parentNode,i);return 0===e.length}function c(t,e){var i,n=t.nodeName,s=t.getAttribute("class"),o=t.getAttribute("id");if(i=new RegExp("^"+n,"i"),e=e.replace(i,""),o&&e.length&&(i=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),s&&e.length)for(var r=(s=s.split(" ")).length;r--;)i=new RegExp("\\."+s[r]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"");return 0===e.length}function u(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,s,o=t.getElementsByTagName("*");for(s=0;s<o.length;s++)if(n=o[s],e===n.getAttribute("id"))return n}function d(t){for(var e=s(t,["use","svg:use"]),i=0;e.length&&i<e.length;){var n,o,r,a,l=e[i],h=l.getAttribute("xlink:href").substr(1),c=l.getAttribute("x")||0,d=l.getAttribute("y")||0,p=u(t,h).cloneNode(!0),g=(p.getAttribute("transform")||"")+" translate("+c+", "+d+")",m=e.length;if(f(p),/^svg$/i.test(p.nodeName)){var v=p.ownerDocument.createElement("g");for(o=0,a=(r=p.attributes).length;o<a;o++)n=r.item(o),v.setAttribute(n.nodeName,n.nodeValue);for(;p.firstChild;)v.appendChild(p.firstChild);p=v}for(o=0,a=(r=l.attributes).length;o<a;o++)"x"!==(n=r.item(o)).nodeName&&"y"!==n.nodeName&&"xlink:href"!==n.nodeName&&("transform"===n.nodeName?g=n.nodeValue+" "+g:p.setAttribute(n.nodeName,n.nodeValue));p.setAttribute("transform",g),p.setAttribute("instantiated_by_use","1"),p.removeAttribute("id"),l.parentNode.replaceChild(p,l),e.length===m&&i++}}function f(t){var e,i,n,s,o=t.getAttribute("viewBox"),r=1,a=1,l=0,h=0,c=t.getAttribute("width"),u=t.getAttribute("height"),d=t.getAttribute("x")||0,f=t.getAttribute("y")||0,p=t.getAttribute("preserveAspectRatio")||"",m=!o||!x.test(t.nodeName)||!(o=o.match(E)),v=!c||!u||"100%"===c||"100%"===u,b=m&&v,y={},C="";if(y.width=0,y.height=0,y.toBeParsed=b,b)return y;if(m)return y.width=_(c),y.height=_(u),y;if(l=-parseFloat(o[1]),h=-parseFloat(o[2]),e=parseFloat(o[3]),i=parseFloat(o[4]),v?(y.width=e,y.height=i):(y.width=_(c),y.height=_(u),r=y.width/e,a=y.height/i),"none"!==(p=g.util.parsePreserveAspectRatioAttribute(p)).alignX&&(a=r=r>a?a:r),1===r&&1===a&&0===l&&0===h&&0===d&&0===f)return y;if((d||f)&&(C=" translate("+_(d)+" "+_(f)+") "),n=C+" matrix("+r+" 0 0 "+a+" "+l*r+" "+h*a+") ","svg"===t.nodeName){for(s=t.ownerDocument.createElement("g");t.firstChild;)s.appendChild(t.firstChild);t.appendChild(s)}else n=(s=t).getAttribute("transform")+n;return s.setAttribute("transform",n),y}function p(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var g=t.fabric||(t.fabric={}),m=g.util.object.extend,v=g.util.object.clone,b=g.util.toFixed,_=g.util.parseUnit,y=g.util.multiplyTransformMatrices,C=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,x=/^(symbol|image|marker|pattern|view|svg)$/i,w=/^(?:pattern|defs|symbol|metadata|clipPath|mask)$/i,T=/^(symbol|g|a|svg)$/i,S={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX",opacity:"opacity"},O={stroke:"strokeOpacity",fill:"fillOpacity"};g.cssRules={},g.gradientDefs={},g.parseTransformAttribute=function(){function t(t,e){var i=Math.cos(e[0]),n=Math.sin(e[0]),s=0,o=0;3===e.length&&(s=e[1],o=e[2]),t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=s-(i*s-n*o),t[5]=o-(n*s+i*o)}function e(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function i(t,e,i){t[i]=Math.tan(g.util.degreesToRadians(e[0]))}function n(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var s=[1,0,0,1,0,0],o=g.reNum,r="(?:\\s+,?\\s*|,\\s*)",a="(?:"+("(?:(matrix)\\s*\\(\\s*("+o+")"+r+"("+o+")"+r+"("+o+")"+r+"("+o+")"+r+"("+o+")"+r+"("+o+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+o+")(?:"+r+"("+o+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+o+")(?:"+r+"("+o+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+o+")(?:"+r+"("+o+")"+r+"("+o+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+o+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+o+")\\s*\\))")+")",l="^\\s*(?:"+("(?:"+a+"(?:"+r+"*"+a+")*)")+"?)\\s*$",h=new RegExp(l),c=new RegExp(a,"g");return function(o){var r=s.concat(),l=[];if(!o||o&&!h.test(o))return r;o.replace(c,function(o){var h=new RegExp(a).exec(o).filter(function(t){return!!t}),c=h[1],u=h.slice(2).map(parseFloat);switch(c){case"translate":n(r,u);break;case"rotate":u[0]=g.util.degreesToRadians(u[0]),t(r,u);break;case"scale":e(r,u);break;case"skewX":i(r,u,2);break;case"skewY":i(r,u,1);break;case"matrix":r=u}l.push(r.concat()),r=s.concat()});for(var u=l[0];l.length>1;)l.shift(),u=g.util.multiplyTransformMatrices(u,l[0]);return u}}();var E=new RegExp("^\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*$");g.parseSVGDocument=function(t,e,i,n){if(t){d(t);var s=g.Object.__uid++,o=f(t),r=g.util.toArray(t.getElementsByTagName("*"));if(o.crossOrigin=n&&n.crossOrigin,o.svgUid=s,0===r.length&&g.isLikelyNode){for(var a=[],l=0,h=(r=t.selectNodes('//*[name(.)!="svg"]')).length;l<h;l++)a[l]=r[l];r=a}var c=r.filter(function(t){return f(t),C.test(t.nodeName.replace("svg:",""))&&!p(t,w)});!c||c&&!c.length?e&&e([],{}):(g.gradientDefs[s]=g.getGradientDefs(t),g.cssRules[s]=g.getCSSRules(t),g.parseElements(c,function(t){e&&e(t,o)},v(o),i,n))}};var k=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+g.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+g.reNum+"))?\\s+(.*)");m(g,{parseFontDeclaration:function(t,e){var i=t.match(k);if(i){var n=i[1],s=i[3],o=i[4],r=i[5],a=i[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),o&&(e.fontSize=_(o)),a&&(e.fontFamily=a),r&&(e.lineHeight="normal"===r?1:r)}},getGradientDefs:function(t){var e,i,n,o=s(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),r=0,a={},l={};for(r=o.length;r--;)n=(e=o[r]).getAttribute("xlink:href"),i=e.getAttribute("id"),n&&(l[i]=n.substr(1)),a[i]=e;for(i in l){var h=a[l[i]].cloneNode(!0);for(e=a[i];h.firstChild;)e.appendChild(h.firstChild)}return a},parseAttributes:function(t,s,o){if(t){var r,l,h={};void 0===o&&(o=t.getAttribute("svgUid")),t.parentNode&&T.test(t.parentNode.nodeName)&&(h=g.parseAttributes(t.parentNode,s,o)),l=h&&h.fontSize||t.getAttribute("font-size")||g.Text.DEFAULT_SVG_FONT_SIZE;var c=s.reduce(function(e,i){return(r=t.getAttribute(i))&&(e[i]=r),e},{});c=m(c,m(a(t,o),g.parseStyleAttribute(t)));var u,d,f={};for(var p in c)d=i(u=e(p),c[p],h,l),f[u]=d;f&&f.font&&g.parseFontDeclaration(f.font,f);var v=m(h,f);return T.test(t.nodeName)?v:n(v)}},parseElements:function(t,e,i,n,s){new g.ElementsParser(t,e,i,n,s).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?o(i,e):r(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,i,n=[];for(e=0,i=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<i;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){for(var e=t.getElementsByTagName("style"),i={},n=0,s=e.length;n<s;n++){var o=e[n].textContent||e[n].text;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return t.trim()}).forEach(function(t){for(var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),n={},s=e[2].trim().replace(/;$/,"").split(/\s*;\s*/),o=0,r=s.length;o<r;o++){var a=s[o].split(/\s*:\s*/),l=a[0],h=a[1];n[l]=h}(t=e[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(i[t]?g.util.object.extend(i[t],n):i[t]=g.util.object.clone(n))})})}return i},loadSVGFromURL:function(t,e,i,n){t=t.replace(/^\n\s*/,"").trim(),new g.util.request(t,{method:"get",onComplete:function(t){var s=t.responseXML;s&&!s.documentElement&&g.window.ActiveXObject&&t.responseText&&((s=new ActiveXObject("Microsoft.XMLDOM")).async="false",s.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),s&&s.documentElement||e&&e(null),g.parseSVGDocument(s.documentElement,function(t,i){e&&e(t,i)},i,n)}})},loadSVGFromString:function(t,e,i,n){t=t.trim();var s;if("undefined"!=typeof DOMParser){var o=new DOMParser;o&&o.parseFromString&&(s=o.parseFromString(t,"text/xml"))}else g.window.ActiveXObject&&((s=new ActiveXObject("Microsoft.XMLDOM")).async="false",s.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));g.parseSVGDocument(s.documentElement,function(t,i){e(t,i)},i,n)}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,n,s){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=s},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var n=t.fromElement(e,this.options);this.resolveGradient(n,"fill"),this.resolveGradient(n,"stroke"),this.reviver&&this.reviver(e,n),this.instances[i]=n,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(n){i.resolveGradient(n,"fill"),i.resolveGradient(n,"stroke"),i.reviver&&i.reviver(e,n),i.instances[t]=n,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][n]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][n],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});i.Point?i.warn("fabric.Point is already defined"):(i.Point=e,e.prototype={type:"point",constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return void 0===i&&(i=.5),i=Math.max(Math.min(1,i),0),new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new e(this.x,this.y)}})}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});i.Intersection?i.warn("fabric.Intersection is already defined"):(i.Intersection=e,i.Intersection.prototype={constructor:e,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},i.Intersection.intersectLineLine=function(t,n,s,o){var r,a=(o.x-s.x)*(t.y-s.y)-(o.y-s.y)*(t.x-s.x),l=(n.x-t.x)*(t.y-s.y)-(n.y-t.y)*(t.x-s.x),h=(o.y-s.y)*(n.x-t.x)-(o.x-s.x)*(n.y-t.y);if(0!==h){var c=a/h,u=l/h;0<=c&&c<=1&&0<=u&&u<=1?(r=new e("Intersection")).appendPoint(new i.Point(t.x+c*(n.x-t.x),t.y+c*(n.y-t.y))):r=new e}else r=new e(0===a||0===l?"Coincident":"Parallel");return r},i.Intersection.intersectLinePolygon=function(t,i,n){for(var s,o,r,a=new e,l=n.length,h=0;h<l;h++)s=n[h],o=n[(h+1)%l],r=e.intersectLineLine(t,i,s,o),a.appendPoints(r.points);return a.points.length>0&&(a.status="Intersection"),a},i.Intersection.intersectPolygonPolygon=function(t,i){for(var n=new e,s=t.length,o=0;o<s;o++){var r=t[o],a=t[(o+1)%s],l=e.intersectLinePolygon(r,a,i);n.appendPoints(l.points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonRectangle=function(t,n,s){var o=n.min(s),r=n.max(s),a=new i.Point(r.x,o.y),l=new i.Point(o.x,r.y),h=e.intersectLinePolygon(o,a,t),c=e.intersectLinePolygon(a,r,t),u=e.intersectLinePolygon(r,l,t),d=e.intersectLinePolygon(l,o,t),f=new e;return f.appendPoints(h.points),f.appendPoints(c.points),f.appendPoints(u.points),f.appendPoints(d.points),f.points.length>0&&(f.status="Intersection"),f})}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var n=t.fabric||(t.fabric={});n.Color?n.warn("fabric.Color is already defined."):(n.Color=e,n.Color.prototype={_tryParsingColor:function(t){var i;t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t&&(i=[255,255,255,0]),i||(i=e.sourceFromHex(t)),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),i||(i=[0,0,0,1]),i&&this.setSource(i)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var s,o,r,a=n.util.array.max([t,e,i]),l=n.util.array.min([t,e,i]);if(r=(a+l)/2,a===l)s=o=0;else{var h=a-l;switch(o=r>.5?h/(2-a-l):h/(a+l),a){case t:s=(e-i)/h+(e<i?6:0);break;case e:s=(i-t)/h+2;break;case i:s=(t-e)/h+4}s/=6}return[Math.round(360*s),Math.round(100*o),Math.round(100*r)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=n[0].toString(16),t=1===t.length?"0"+t:t,e=n[1].toString(16),e=1===e.length?"0"+e:e,i=n[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t;return t=255*this.getSource()[3],t=t.toString(16),t=1===t.length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],n=this.getAlpha(),s=this.getSource(),o=t.getSource(),r=0;r<3;r++)i.push(Math.round(.5*s[r]+.5*o[r]));return i[3]=n,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},n.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var n=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),s=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),o=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(n,10),parseInt(s,10),parseInt(o,10),i[4]?parseFloat(i[4]):1]}},n.Color.fromRgba=e.fromRgb,n.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var n=t.match(e.reHSLa);if(n){var s,o,r,a=(parseFloat(n[1])%360+360)%360/360,l=parseFloat(n[2])/(/%$/.test(n[2])?100:1),h=parseFloat(n[3])/(/%$/.test(n[3])?100:1);if(0===l)s=o=r=h;else{var c=h<=.5?h*(l+1):h+l-h*l,u=2*h-c;s=i(u,c,a+1/3),o=i(u,c,a),r=i(u,c,a-1/3)}return[Math.round(255*s),Math.round(255*o),Math.round(255*r),n[4]?parseFloat(n[4]):1]}},n.Color.fromHsla=e.fromHsl,n.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),n=3===i.length||4===i.length,s=8===i.length||4===i.length,o=n?i.charAt(0)+i.charAt(0):i.substring(0,2),r=n?i.charAt(1)+i.charAt(1):i.substring(2,4),a=n?i.charAt(2)+i.charAt(2):i.substring(4,6),l=s?n?i.charAt(3)+i.charAt(3):i.substring(6,8):"FF";return[parseInt(o,16),parseInt(r,16),parseInt(a,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},n.Color.fromSource=function(t){var i=new e;return i.setSource(t),i})}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,i,n,s=t.getAttribute("style"),o=t.getAttribute("offset")||0;if(o=parseFloat(o)/(/%$/.test(o)?100:1),o=o<0?0:o>1?1:o,s){var r=s.split(/\s*;\s*/);""===r[r.length-1]&&r.pop();for(var a=r.length;a--;){var l=r[a].split(/\s*:\s*/),h=l[0].trim(),c=l[1].trim();"stop-color"===h?e=c:"stop-opacity"===h&&(n=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=i,{offset:o,color:e.toRgb(),opacity:n}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function n(t,e,i){var n,s=0,o=1,r="";for(var a in e)"Infinity"===e[a]?e[a]=1:"-Infinity"===e[a]&&(e[a]=0),n=parseFloat(e[a],10),o="string"==typeof e[a]&&/^\d+%$/.test(e[a])?.01:1,"x1"===a||"x2"===a||"r2"===a?(o*="objectBoundingBox"===i?t.width:1,s="objectBoundingBox"===i?t.left||0:0):"y1"!==a&&"y2"!==a||(o*="objectBoundingBox"===i?t.height:1,s="objectBoundingBox"===i?t.top||0:0),e[a]=n*o+s;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var l=t.ry/t.rx;r=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return r}var s=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e,i,n=s(this.coords,!0),o=s(this.colorStops,!0),r=n.r1>n.r2;if(o.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var a in n)"x1"===a||"x2"===a?n[a]+=this.offsetX-t.width/2:"y1"!==a&&"y2"!==a||(n[a]+=this.offsetY-t.height/2);if(i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',r?n.x1:n.x2,'" cy="',r?n.y1:n.y2,'" r="',r?n.r1:n.r2,'" fx="',r?n.x2:n.x1,'" fy="',r?n.y2:n.y1,'">\n']),"radial"===this.type){if(r){(o=o.concat()).reverse();for(c=0;c<o.length;c++)o[c].offset=1-o[c].offset}var l=Math.min(n.r1,n.r2);if(l>0)for(var h=l/Math.max(n.r1,n.r2),c=0;c<o.length;c++)o[c].offset+=h*(1-o[c].offset)}for(c=0;c<o.length;c++){var u=o[c];e.push("<stop ",'offset="',100*u.offset+"%",'" style="stop-color:',u.color,null!==u.opacity?";stop-opacity: "+u.opacity:";",'"/>\n')}return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,n,s=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(n in s)"x1"===n||"x2"===n?s[n]+=-this.offsetX+e.width/2:"y1"!==n&&"y2"!==n||(s[n]+=-this.offsetY+e.height/2);"linear"===this.type?i=t.createLinearGradient(s.x1,s.y1,s.x2,s.y2):"radial"===this.type&&(i=t.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2));for(var o=0,r=this.colorStops.length;o<r;o++){var a=this.colorStops[o].color,l=this.colorStops[o].opacity,h=this.colorStops[o].offset;void 0!==l&&(a=new fabric.Color(a).setAlpha(l).toRgba()),i.addColorStop(h,a)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(s,o){var r,a,l,h=s.getElementsByTagName("stop"),c=s.getAttribute("gradientUnits")||"objectBoundingBox",u=s.getAttribute("gradientTransform"),d=[];"linear"===(r="linearGradient"===s.nodeName||"LINEARGRADIENT"===s.nodeName?"linear":"radial")?a=e(s):"radial"===r&&(a=i(s));for(var f=h.length;f--;)d.push(t(h[f]));l=n(o,a,c);var p=new fabric.Gradient({type:r,coords:a,colorStops:d,offsetX:-o.left,offsetY:-o.top});return(u||""!==l)&&(p.gradientTransform=fabric.parseTransformAttribute((u||"")+l)),p},forObject:function(t,e){return e||(e={}),n(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),function(){"use strict";var t=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t,e){if(t||(t={}),this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source)),e&&e(this);else{var i=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){i.source=t,e&&e(i)})}},toObject:function(e){var i,n,s=fabric.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?i=String(this.source):"string"==typeof this.source.src?i=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(i=this.source.toDataURL()),n={type:"pattern",source:i,repeat:this.repeat,offsetX:t(this.offsetX,s),offsetY:t(this.offsetY,s)},fabric.util.populateWithProperties(this,n,e),n},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.width,n=e.height/t.height,s=this.offsetX/t.width,o=this.offsetY/t.height,r="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?r=e.src:e.toDataURL&&(r=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+r+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var n=40,s=40,o=e.Object.NUM_FRACTION_DIGITS,r=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle));return t.width&&t.height&&(n=100*i((Math.abs(r.x)+this.blur)/t.width,o)+20,s=100*i((Math.abs(r.y)+this.blur)/t.height,o)+20),t.flipX&&(r.x*=-1),t.flipY&&(r.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(r.x,o)+'" dy="'+i(r.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(e){this[e]!==i[e]&&(t[e]=this[e])},this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,n=fabric.util.toFixed,s=fabric.util.transformPoint,o=fabric.util.invertTransform,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e||(e={}),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!1,_initStatic:function(t,e){var i=fabric.StaticCanvas.prototype.renderAll.bind(this);this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,n){return"string"==typeof e?fabric.util.loadImage(e,function(e){e&&(this[t]=new fabric.Image(e,n)),i&&i(e)},this,n&&n.crossOrigin):(n&&e.setOptions(n),this[t]=e,i&&i(e)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(t){var e=fabric.util.createCanvasElement(t);if(e.style||(e.style={}),!e)throw r;if(void 0===e.getContext)throw r;return e},_initOptions:function(t){this._setOptions(t),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(t),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var n in t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px"),e.backstoreOnly||this._setCssDimension(n,i);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i=this._activeGroup;this.viewportTransform=t;for(var n=0,s=this._objects.length;n<s;n++)(e=this._objects[n]).group||e.setCoords(!1,!0);return i&&i.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderAll(),this},zoomToPoint:function(t,e){var i=t,n=this.viewportTransform.slice(0);t=s(t,o(this.viewportTransform)),n[0]=e,n[3]=e;var r=s(t,n);return n[4]+=i.x-r.x,n[5]+=i.y-r.y,this.setViewportTransform(n)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},calcViewportBoundaries:function(){var t={},e=this.getWidth(),i=this.getHeight(),n=o(this.viewportTransform);return t.tl=s({x:0,y:0},n),t.br=s({x:e,y:i},n),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t,t},renderCanvas:function(t,e){this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform.apply(t,this.viewportTransform),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render")},_renderObjects:function(t,e){for(var i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"];i&&(t.fillStyle=i.toLive?i.toLive(t,this):i,t.fillRect(i.offsetX||0,i.offsetY||0,this.width,this.height)),(i=this[e+"Image"])&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),i.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=o(this.viewportTransform);return s({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var n={objects:this._toObjects(e,i)};return t(n,this.__serializeBgOverlay(e,i)),fabric.util.populateWithProperties(this,n,i),n},_toObjects:function(t,e){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var s=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),s},__serializeBgOverlay:function(t,e){var i={};return this.backgroundColor&&(i.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(i.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),this.backgroundImage&&(i.backgroundImage=this._toObject(this.backgroundImage,t,e)),this.overlayImage&&(i.overlayImage=this._toObject(this.overlayImage,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,s=e.width||this.width,o=e.height||this.height,r='viewBox="0 0 '+this.width+" "+this.height+'" ',a=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?r='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,r='viewBox="'+n(-i[4]/i[0],a)+" "+n(-i[5]/i[3],a)+" "+n(this.width/i[0],a)+" "+n(this.height/i[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',o,'" ',r,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var t=this;return["backgroundColor","overlayColor"].map(function(e){var i=t[e];if(i&&i.toLive)return i.toSVG(t,!1)}).join("")},createSVGFontFacesMarkup:function(){for(var t,e,i,n,s,o,r="",a={},l=fabric.fontPaths,h=this.getObjects(),c=0,u=h.length;c<u;c++)if(t=h[c],e=t.fontFamily,-1!==t.type.indexOf("text")&&!a[e]&&l[e]&&(a[e]=!0,t.styles)){i=t.styles;for(s in i){n=i[s];for(o in n)!a[e=n[o].fontFamily]&&l[e]&&(a[e]=!0)}}for(var d in a)r+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",l[d],"');\n","\t\t}\n"].join("");return r&&(r=['\t<style type="text/css">',"<![CDATA[\n",r,"]]>","</style>\n"].join("")),r},_setSVGObjects:function(t,e){for(var i,n=0,s=this.getObjects(),o=s.length;n<o;n++)(i=s[n]).excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e];if(i)if(i.toLive){var n=i.repeat;t.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',i.offsetX-this.width/2,'" y="',i.offsetY-this.height/2,'" ','width="',"repeat-y"===n||"no-repeat"===n?i.source.width:this.width,'" height="',"repeat-x"===n||"no-repeat"===n?i.source.height:this.height,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,s,o=this._activeGroup;if(t===o)for(e=(s=o._objects).length;e--;)n=s[e],i(this._objects,n),this._objects.unshift(n);else i(this._objects,t),this._objects.unshift(t);return this.renderAll&&this.renderAll()},bringToFront:function(t){if(!t)return this;var e,n,s,o=this._activeGroup;if(t===o)for(s=o._objects,e=0;e<s.length;e++)n=s[e],i(this._objects,n),this._objects.push(n);else i(this._objects,t),this._objects.push(t);return this.renderAll&&this.renderAll()},sendBackwards:function(t,e){if(!t)return this;var n,s,o,r,a,l=this._activeGroup;if(t===l)for(a=l._objects,n=0;n<a.length;n++)s=a[n],0!==(o=this._objects.indexOf(s))&&(r=o-1,i(this._objects,s),this._objects.splice(r,0,s));else 0!==(o=this._objects.indexOf(t))&&(r=this._findNewLowerIndex(t,o,e),i(this._objects,t),this._objects.splice(r,0,t));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(t,e,i){var n;if(i){n=e;for(var s=e-1;s>=0;--s)if(t.intersectsWithObject(this._objects[s])||t.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(t)){n=s;break}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var n,s,o,r,a,l=this._activeGroup;if(t===l)for(n=(a=l._objects).length;n--;)s=a[n],(o=this._objects.indexOf(s))!==this._objects.length-1&&(r=o+1,i(this._objects,s),this._objects.splice(r,0,s));else(o=this._objects.indexOf(t))!==this._objects.length-1&&(r=this._findNewUpperIndex(t,o,e),i(this._objects,t),this._objects.splice(r,0,t));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(t,e,i){var n;if(i){n=e;for(var s=e+1;s<this._objects.length;++s)if(t.intersectsWithObject(this._objects[s])||t.isContainedWithinObject(this._objects[s])||this._objects[s].isContainedWithinObject(t)){n=s;break}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return void 0!==i.getImageData;case"setLineDash":return void 0!==i.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],n=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===n.x&&i.y===n.y&&(i.x-=.5,n.x+=.5),t.moveTo(i.x,i.y);for(var s=1,o=this._points.length;s<o;s++){var r=i.midPointFrom(n);t.quadraticCurveTo(i.x,i.y,r.x,r.y),i=this._points[s],n=this._points[s+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),n=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var s=1,o=t.length;s<o;s++){var r=i.midPointFrom(n);e.push("Q ",i.x," ",i.y," ",r.x," ",r.y," "),i=new fabric.Point(t[s].x,t[s].y),s+1<t.length&&(n=new fabric.Point(t[s+1].x,t[s+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.createPath(t);this.canvas.add(e),e.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:e})}else this.canvas.renderAll()}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,n=this.canvas.viewportTransform;i.save(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;i<n;i++){var s=this.points[i],o=new fabric.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var r=new fabric.Group(e,{originX:"center",originY:"center"});r.canvas=this.canvas,this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var s=this.sprayChunks[i],o=0,r=s.length;o<r;o++){var a=new fabric.Rect({width:s[o].width,height:s[o].width,left:s[o].x+1,top:s[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},n=0,s=t.length;n<s;n++)i[e=t[n].left+""+t[n].top]||(i[e]=t[n]);var o=[];for(e in i)o.push(i[e]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,n=this.sprayChunkPoints.length;i<n;i++){var s=this.sprayChunkPoints[i];void 0!==s.opacity&&(t.globalAlpha=s.opacity),t.fillRect(s.x,s.y,s.width,s.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,n,s=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-s,t.x+s),i=fabric.util.getRandomInt(t.y-s,t.y+s),n=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var r=new fabric.Point(e,i);r.width=n,this.randomOpacity&&(r.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,n=Math.atan2,s=Math.abs,o=fabric.StaticCanvas.supports("setLineDash");fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e=this.getActiveGroup(),i=this.getActiveObject(),n=[],s=[];if(!e&&!i||this.preserveObjectStacking)n=this._objects;else{for(var o=0,r=this._objects.length;o<r;o++)t=this._objects[o],e&&e.contains(t)||t===i?s.push(t):n.push(t);e&&(e._set("_objects",s),n.push(e)),i&&n.push(i)}return n},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(t),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var n,s=i||this.getPointer(t,!0);return n=e.group&&e.group===this.getActiveGroup()?this._normalizePointer(e.group,s):{x:s.x,y:s.y},e.containsPoint(n)||e._findTargetCorner(s)},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),n=fabric.util.invertTransform(i),s=this.restorePointerVpt(e);return fabric.util.transformPoint(s,n)},isTargetTransparent:function(t,e,i){var n=t.hasBorders,s=t.transparentCorners,o=this.contextCache,r=t.selectionBackgroundColor;t.hasBorders=t.transparentCorners=!1,t.selectionBackgroundColor="",o.save(),o.transform.apply(o,this.viewportTransform),t.render(o),o.restore(),t.active&&t._renderControls(o),t.hasBorders=n,t.transparentCorners=s,t.selectionBackgroundColor=r;var a=fabric.util.isTransparent(o,e,i,this.targetFindTolerance);return this.clearContext(o),a},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),n=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,i){if(i){var n=this.getPointer(t),s=i._findTargetCorner(this.getPointer(t,!0)),o=this._getActionFromCorner(i,s,t),r=this._getOriginFromCorner(i,s);this._currentTransform={target:i,action:o,corner:s,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:n.x-i.left,offsetY:n.y-i.top,originX:r.x,originY:r.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,originX:r.x,originY:r.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var i=this._currentTransform,n=i.target,s=t-i.offsetX,o=e-i.offsetY,r=!n.get("lockMovementX")&&n.left!==s,a=!n.get("lockMovementY")&&n.top!==o;return r&&n.set("left",s),a&&n.set("top",o),r||a},_changeSkewTransformOrigin:function(t,e,i){var n="originX",s={0:"center"},o=e.target.skewX,r="left",a="right",l="mt"===e.corner||"ml"===e.corner?1:-1,h=1;t=t>0?1:-1,"y"===i&&(o=e.target.skewY,r="top",a="bottom",n="originY"),s[-1]=r,s[1]=a,e.target.flipX&&(h*=-1),e.target.flipY&&(h*=-1),0===o?(e.skewSign=-l*t*h,e[n]=s[-t]):(o=o>0?1:-1,e.skewSign=o,e[n]=s[o*l*h])},_skewObject:function(t,e,i){var n=this._currentTransform,s=n.target,o=!1,r=s.get("lockSkewingX"),a=s.get("lockSkewingY");if(r&&"x"===i||a&&"y"===i)return!1;var l,h,c=s.getCenterPoint(),u=s.toLocalPoint(new fabric.Point(t,e),"center","center")[i],d=s.toLocalPoint(new fabric.Point(n.lastX,n.lastY),"center","center")[i],f=s._getTransformedDimensions();return this._changeSkewTransformOrigin(u-d,n,i),l=s.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY)[i],h=s.translateToOriginPoint(c,n.originX,n.originY),o=this._setObjectSkew(l,n,i,f),n.lastX=t,n.lastY=e,s.setPositionByOrigin(h,n.originX,n.originY),o},_setObjectSkew:function(t,e,i,n){var s,o,r,a,l,h,c,u,d,f=e.target,p=!1,g=e.skewSign;return"x"===i?(a="y",l="Y",h="X",u=0,d=f.skewY):(a="x",l="X",h="Y",u=f.skewX,d=0),r=f._getTransformedDimensions(u,d),c=2*Math.abs(t)-r[i],c<=2?s=0:(s=g*Math.atan(c/f["scale"+h]/(r[a]/f["scale"+l])),s=fabric.util.radiansToDegrees(s)),p=f["skew"+h]!==s,f.set("skew"+h,s),0!==f["skew"+l]&&(o=f._getTransformedDimensions(),s=n[a]/o[a]*f["scale"+l],f.set("scale"+l,s)),p},_scaleObject:function(t,e,i){var n=this._currentTransform,s=n.target,o=s.get("lockScalingX"),r=s.get("lockScalingY"),a=s.get("lockScalingFlip");if(o&&r)return!1;var l=s.translateToOriginPoint(s.getCenterPoint(),n.originX,n.originY),h=s.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY),c=s._getTransformedDimensions(),u=!1;return this._setLocalMouse(h,n),u=this._setObjectScale(h,n,o,r,i,a,c),s.setPositionByOrigin(l,n.originX,n.originY),u},_setObjectScale:function(t,e,i,n,s,o,r){var a,l,h,c,u=e.target,d=!1,f=!1,p=!1;return h=t.x*u.scaleX/r.x,c=t.y*u.scaleY/r.y,a=u.scaleX!==h,l=u.scaleY!==c,o&&h<=0&&h<u.scaleX&&(d=!0),o&&c<=0&&c<u.scaleY&&(f=!0),"equally"!==s||i||n?s?"x"!==s||u.get("lockUniScaling")?"y"!==s||u.get("lockUniScaling")||f||n||u.set("scaleY",c)&&(p=p||l):d||i||u.set("scaleX",h)&&(p=p||a):(d||i||u.set("scaleX",h)&&(p=p||a),f||n||u.set("scaleY",c)&&(p=p||l)):d||f||(p=this._scaleObjectEqually(t,u,e,r)),e.newScaleX=h,e.newScaleY=c,d||f||this._flipObject(e,s),p},_scaleObjectEqually:function(t,e,i,n){var s,o=t.y+t.x,r=n.y*i.original.scaleY/e.scaleY+n.x*i.original.scaleX/e.scaleX;return i.newScaleX=i.original.scaleX*o/r,i.newScaleY=i.original.scaleY*o/r,s=i.newScaleX!==e.scaleX||i.newScaleY!==e.scaleY,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY),s},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target,n=this.getZoom(),o=i.padding/n;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),s(t.x)>o?t.x<0?t.x+=o:t.x-=o:t.x=0,s(t.y)>o?t.y<0?t.y+=o:t.y-=o:t.y=0},_rotateObject:function(t,e){var s=this._currentTransform;if(s.target.get("lockRotation"))return!1;var o=n(s.ey-s.top,s.ex-s.left),r=n(e-s.top,t-s.left),a=i(r-o+s.theta),l=!0;if(s.target.snapAngle>0){var h=s.target.snapAngle,c=s.target.snapThreshold||h,u=Math.ceil(a/h)*h,d=Math.floor(a/h)*h;Math.abs(a-d)<c?a=d:Math.abs(a-u)<c&&(a=u)}return a<0&&(a=360+a),a%=360,s.target.angle===a?l=!1:s.target.angle=a,l},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(t){var e=this._groupSelector,i=e.left,n=e.top,r=s(i),a=s(n);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(n>0?0:-n),r,a)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var l=e.ex+.5-(i>0?0:r),h=e.ey+.5-(n>0?0:a);t.beginPath(),fabric.util.drawDashedLine(t,l,h,l+r,h,this.selectionDashArray),fabric.util.drawDashedLine(t,l,h+a-1,l+r,h+a-1,this.selectionDashArray),fabric.util.drawDashedLine(t,l,h,l,h+a,this.selectionDashArray),fabric.util.drawDashedLine(t,l+r-1,h,l+r-1,h+a,this.selectionDashArray),t.closePath(),t.stroke()}else fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(i>0?0:r),e.ey+.5-(n>0?0:a),r,a)},findTarget:function(t,e){if(!this.skipTargetFind){var i,n=this.getPointer(t,!0),s=this.getActiveGroup(),o=this.getActiveObject();if(this.targets=[],s&&!e&&s===this._searchPossibleTargets([s],n))return this._fireOverOutEvents(s,t),s;if(o&&o._findTargetCorner(n))return this._fireOverOutEvents(o,t),o;if(o&&o===this._searchPossibleTargets([o],n)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(o,t),o;i=o}var r=this._searchPossibleTargets(this._objects,n);return t[this.altSelectionKey]&&r&&i&&r!==i&&(r=i),this._fireOverOutEvents(r,t),r}},_fireOverOutEvents:function(t,e){var i,n,s=this._hoveredTarget;s!==t&&(i={e:e,target:t,previousTarget:this._hoveredTarget},n={e:e,target:this._hoveredTarget,nextTarget:t},this._hoveredTarget=t),t?s!==t&&(s&&(this.fire("mouse:out",n),s.fire("mouseout",n)),this.fire("mouse:over",i),t.fire("mouseover",i)):s&&(this.fire("mouse:out",n),s.fire("mouseout",n))},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}},_searchPossibleTargets:function(t,e){for(var i,n,s,o=t.length;o--;)if(this._checkTarget(e,t[o])){"group"===(i=t[o]).type&&i.subTargetCheck&&(n=this._normalizePointer(i,e),(s=this._searchPossibleTargets(i._objects,n))&&this.targets.push(s));break}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(e,i,n){n||(n=this.upperCanvasEl);var s,o=t(e),r=n.getBoundingClientRect(),a=r.width||0,l=r.height||0;return a&&l||("top"in r&&"bottom"in r&&(l=Math.abs(r.top-r.bottom)),"right"in r&&"left"in r&&(a=Math.abs(r.right-r.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,i||(o=this.restorePointerVpt(o)),s=0===a||0===l?{width:1,height:1}:{width:n.width/a,height:n.height/l},{x:o.x*s.width,y:o.y*s.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":"none"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){var e=this._activeObject;e&&(e.set("active",!1),t!==e&&e.onDeselect&&"function"==typeof e.onDeselect&&e.onDeselect()),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){var i=this.getActiveObject();return i&&i!==t&&i.fire("deselected",{e:e}),this._setActiveObject(t),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this.renderAll(),this},getActiveObject:function(){return this._activeObject},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_discardActiveObject:function(){var t=this._activeObject;t&&(t.set("active",!1),t.onDeselect&&"function"==typeof t.onDeselect&&t.onDeselect()),this._activeObject=null},discardActiveObject:function(t){var e=this._activeObject;return e&&(this.fire("before:selection:cleared",{target:e,e:t}),this._discardActiveObject(),this.fire("selection:cleared",{e:t}),e.fire("deselected",{e:t})),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){var e=this.getActiveGroup();return e&&(this.fire("before:selection:cleared",{e:t,target:e}),this._discardActiveGroup(),this.fire("selection:cleared",{e:t})),this},deactivateAll:function(){for(var t,e=this.getObjects(),i=0,n=e.length;i<n;i++)(t=e[i])&&t.set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){for(var e,i=this.getObjects(),n=0,s=i.length;n<s;n++)(e=i[n])&&e.set("active",!1);return this.discardActiveGroup(t),this.discardActiveObject(t),this},dispose:function(){this.callSuper("dispose");var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},clear:function(){return this.discardActiveGroup(),this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this.getActiveGroup();e?e._renderControls(t):this._drawObjectsControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;e<i;++e)this._objects[e]&&this._objects[e].active&&this._objects[e]._renderControls(t)},_toObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(t),s=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,n),s},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var n;n=this._realizeGroupTransformOnObject(e),this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,n)}});for(var r in fabric.StaticCanvas)"prototype"!==r&&(fabric.Canvas[r]=fabric.StaticCanvas[r]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){function t(t,e){return"which"in t?t.which===e:t.button===e-1}var e={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},i=fabric.util.addListener,n=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this.removeListeners(),this._bindEvents(),i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"mouseenter",this._onMouseEnter),i(this.upperCanvasEl,"wheel",this._onMouseWheel),i(this.upperCanvasEl,"contextmenu",this._onContextMenu),i(this.upperCanvasEl,"touchstart",this._onMouseDown,{passive:!1}),i(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this.eventsBinded||(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this.eventsBinded=!0)},removeListeners:function(){n(fabric.window,"resize",this._onResize),n(this.upperCanvasEl,"mousedown",this._onMouseDown),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"mouseout",this._onMouseOut),n(this.upperCanvasEl,"mouseenter",this._onMouseEnter),n(this.upperCanvasEl,"wheel",this._onMouseWheel),n(this.upperCanvasEl,"contextmenu",this._onContextMenu),n(this.upperCanvasEl,"touchstart",this._onMouseDown),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onMouseDown:function(t){this.__onMouseDown(t),i(fabric.document,"touchend",this._onMouseUp,{passive:!1}),i(fabric.document,"touchmove",this._onMouseMove,{passive:!1}),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?n(this.upperCanvasEl,"mousedown",this._onMouseDown):(i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),n(fabric.document,"mouseup",this._onMouseUp),n(fabric.document,"touchend",this._onMouseUp),n(fabric.document,"mousemove",this._onMouseMove),n(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"touchend"===t.type){var e=this;setTimeout(function(){i(e.upperCanvasEl,"mousedown",e._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return(!i||!i.isEditing||t!==i)&&!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(e){var i;if(t(e,3))this.fireRightClick&&this._handleEvent(e,"up",i,3);else if(t(e,2))this.fireMiddleClick&&this._handleEvent(e,"up",i,2);else if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(e);else{var n=!0,s=this._currentTransform,o=this._groupSelector,r=!o||0===o.left&&0===o.top;s&&(this._finalizeCurrentTransform(),n=!s.actionPerformed),i=n?this.findTarget(e,!0):s.target;var a=this._shouldRender(i,this.getPointer(e));i||!r?this._maybeGroupObjects(e):(this._groupSelector=null,this._currentTransform=null),i&&(i.isMoving=!1),this._setCursorFromEvent(e,i),this._handleEvent(e,"up",i||null,1,r),i&&(i.__corner=0),a&&this.renderAll()}},_handleEvent:function(t,e,i,n,s){var o=void 0===i?this.findTarget(t):i,r=this.targets||[],a={e:t,target:o,subTargets:r,button:n||1,isClick:s||!1};this.fire("mouse:"+e,a),o&&o.fire("mouse"+e,a);for(var l=0;l<r.length;l++)r[l].fire("mouse"+e,a)},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this._restoreOriginXY(e),(t.actionPerformed||this.stateful&&e.hasStateChanged())&&(this.fire("object:modified",{target:e}),e.fire("modified"))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(e){var i=this.findTarget(e);if(t(e,3))this.fireRightClick&&this._handleEvent(e,"down",i||null,3);else if(t(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",i||null,2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(!this._currentTransform){var n=this.getPointer(e,!0);this._previousPointer=n;var s=this._shouldRender(i,n),o=this._shouldGroup(e,i);if(this._shouldClearSelection(e,i)?this.deactivateAllWithDispatch(e):o&&(this._handleGrouping(e,i),i=this.getActiveGroup()),!this.selection||i&&(i.selectable||i.isEditing)||(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0}),i){!i.selectable||!i.__corner&&o||(this._beforeTransform(e,i),this._setupCurrentTransform(e,i));var r=this.getActiveObject();i!==this.getActiveGroup()&&i!==r&&(this.deactivateAll(),i.selectable&&(r&&r.fire("deselected",{e:e}),this.setActiveObject(i,e)))}this._handleEvent(e,"down",i||null),s&&this.renderAll()}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(!(void 0!==t.touches&&t.touches.length>1)){var n=this._groupSelector;n?(i=this.getPointer(t,!0),n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e||null)}},__onMouseWheel:function(t){this._handleEvent(t,"wheel")},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),i.actionPerformed&&this.renderAll()},_performTransformAction:function(t,e,i){var n=i.x,s=i.y,o=e.target,r=e.action,a=!1;"rotate"===r?(a=this._rotateObject(n,s))&&this._fire("rotating",o,t):"scale"===r?(a=this._onScale(t,e,n,s))&&this._fire("scaling",o,t):"scaleX"===r?(a=this._scaleObject(n,s,"x"))&&this._fire("scaling",o,t):"scaleY"===r?(a=this._scaleObject(n,s,"y"))&&this._fire("scaling",o,t):"skewX"===r?(a=this._skewObject(n,s,"x"))&&this._fire("skewing",o,t):"skewY"===r?(a=this._skewObject(n,s,"y"))&&this._fire("skewing",o,t):(a=this._translateObject(n,s))&&(this._fire("moving",o,t),this.setCursor(o.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,i,n){return!t[this.uniScaleKey]&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally")):(e.currentAction="scale",this._scaleObject(i,n))},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,n=this.getActiveGroup(),s=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return s?this._setCornerCursor(s,e,t):this.setCursor(i),!0},_setCornerCursor:function(t,i,n){if(t in e)this.setCursor(this._getRotatedCornerCursor(t,i,n));else{if("mtr"!==t||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(t,i,n){var s=Math.round(i.getAngle()%360/45);return s<0&&(s+=8),s+=e[t],n[this.altActionKey]&&e[t]%2==0&&(s+=2),s%=8,this.cursorMap[s]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t[this.selectionKey]&&e&&e.selectable&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){var i=this.getActiveGroup();(e!==i||(e=this.findTarget(t,!0)))&&(i?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0),e)}else i.addWithUpdate(t);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i,e),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(i,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&((e=new fabric.Group(e.reverse(),{canvas:this})).addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e,e:t}),this.renderAll())},_collectObjects:function(){for(var i,n=[],s=this._groupSelector.ex,o=this._groupSelector.ey,r=s+this._groupSelector.left,a=o+this._groupSelector.top,l=new fabric.Point(t(s,r),t(o,a)),h=new fabric.Point(e(s,r),e(o,a)),c=s===r&&o===a,u=this._objects.length;u--&&!((i=this._objects[u])&&i.selectable&&i.visible&&(i.intersectsWithRect(l,h)||i.isContainedWithinRect(l,h)||i.containsPoint(l)||i.containsPoint(h))&&(i.set("active",!0),n.push(i),c)););return n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),function(){var t=fabric.StaticCanvas.supports("toDataURLWithQuality");fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,s={left:t.left||0,top:t.top||0,width:t.width||0,height:t.height||0};return this.__toDataURLWithMultiplier(e,i,s,n)},__toDataURLWithMultiplier:function(t,e,i,n){var s=this.getWidth(),o=this.getHeight(),r=(i.width||this.getWidth())*n,a=(i.height||this.getHeight())*n,l=this.getZoom()*n,h=this.viewportTransform,c=[l,0,0,l,(h[4]-i.left)*n,(h[5]-i.top)*n],u=this.interactive;this.viewportTransform=c,this.interactive&&(this.interactive=!1),s!==r||o!==a?this.setDimensions({width:r,height:a}):this.renderAll();var d=this.__toDataURL(t,e,i);return u&&(this.interactive=u),this.viewportTransform=h,this.setDimensions({width:s,height:o}),d},__toDataURL:function(e,i){var n=this.contextContainer.canvas;return"jpg"===e&&(e="jpeg"),t?n.toDataURL("image/"+e,i):n.toDataURL("image/"+e)},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t),s=this,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,this._enlivenObjects(n.objects,function(t){s.clear(),s._setBgOverlay(n,function(){t.forEach(function(t,e){s.insertAt(t,e)}),s.renderOnAddRemove=o,delete n.objects,delete n.backgroundImage,delete n.overlayImage,delete n.background,delete n.overlay,s._setOptions(n),s.renderAll(),e&&e()})},i),this}},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var n=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,n),this.__setBgOverlay("overlayImage",t.overlayImage,i,n),this.__setBgOverlay("backgroundColor",t.background,i,n),this.__setBgOverlay("overlayColor",t.overlay,i,n)}else e&&e()},__setBgOverlay:function(t,e,i,n){var s=this;if(!e)return i[t]=!0,void(n&&n());"backgroundImage"===t||"overlayImage"===t?fabric.util.enlivenObjects([e],function(e){s[t]=e[0],i[t]=!0,n&&n()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,n&&n()})},_enlivenObjects:function(t,e,i){t&&0!==t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},null,i):e&&e([])},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(n){i(n.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,s=e.util.toFixed,o=e.util.string.capitalize,r=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash"),l=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,dirty:!0,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit fillRule backgroundColor".split(" "),initialize:function(t){(t=t||{})&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_getCacheCanvasDimensions:function(){var t=this.canvas&&this.canvas.getZoom()||1,i=this.getObjectScaling(),n=this._getNonTransformedDimensions(),s=this.canvas&&this.canvas._isRetinaScaling()?e.devicePixelRatio:1,o=i.scaleX*t*s,r=i.scaleY*t*s;return{width:n.x*o+2,height:n.y*r+2,zoomX:o,zoomY:r}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){var t=this.canvas._currentTransform.action;if(t.slice&&"scale"===t.slice(0,5))return!1}var e=this._getCacheCanvasDimensions(),i=e.width,n=e.height,s=e.zoomX,o=e.zoomY;return(i!==this.cacheWidth||n!==this.cacheHeight)&&(this._cacheCanvas.width=Math.ceil(i),this._cacheCanvas.height=Math.ceil(n),this._cacheContext.translate(i/2,n/2),this._cacheContext.scale(s,o),this.cacheWidth=i,this.cacheHeight=n,this.zoomX=s,this.zoomY=o,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t,e){this.group&&!this.group._transformDone&&this.group===this.canvas._activeGroup&&this.group.transform(t);var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),this.angle&&t.rotate(r(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),this.skewX&&t.transform(1,0,Math.tan(r(this.skewX)),1,0,0),this.skewY&&t.transform(1,Math.tan(r(this.skewY)),0,1,0,0)},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,originX:this.originX,originY:this.originY,left:s(this.left,i),top:s(this.top,i),width:s(this.width,i),height:s(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:s(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:s(this.strokeMiterLimit,i),scaleX:s(this.scaleX,i),scaleY:s(this.scaleY,i),angle:s(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:s(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:s(this.skewX,i),skewY:s(this.skewY,i)};return e.util.populateWithProperties(this,n,t),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype;return i.stateProperties.forEach(function(e){t[e]===i[e]&&delete t[e],"[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e])&&0===t[e].length&&0===i[e].length&&delete t[e]}),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var i=this.group.getObjectScaling();t*=i.scaleX,e*=i.scaleY}return{scaleX:t,scaleY:e}},_set:function(t,i){return("scaleX"===t||"scaleY"===t)&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",i):i=new e.Shadow(i),this[t]=i,this.cacheProperties.indexOf(t)>-1&&(this.group&&this.group.set("dirty",!0),this.dirty=!0),this.group&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0),"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},render:function(t,i){0===this.width&&0===this.height||!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),i||this.transform(t),this._setOpacity(t),this._setShadow(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&e.util.clipContext(this,t),this.shouldCache(i)?(this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty(i)&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,i),this.dirty=!1),this.drawCacheOnCanvas(t)):(this.drawObject(t,i),i&&this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},needsItsOwnCache:function(){return!1},shouldCache:function(t){return!t&&this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching())},willDrawShadow:function(){return!!this.shadow},drawObject:function(t,e){this._renderBackground(t),this._setStrokeStyles(t),this._setFillStyles(t),this._render(t,e)},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheWidth/2,-this.cacheHeight/2)},isCacheDirty:function(t){if(!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):i&&i(t))},_renderControls:function(t){if(this.active&&(!this.group||this.group===this.canvas.getActiveGroup())){var i,n=this.getViewportTransform(),s=this.calcTransformMatrix();s=e.util.multiplyTransformMatrices(n,s),i=e.util.qrDecompose(s),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.group&&this.group===this.canvas.getActiveGroup()?(t.rotate(r(i.angle)),this.drawBordersInGroup(t,i)):(t.rotate(r(this.angle)),this.drawBorders(t)),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var i=this.canvas&&this.canvas.viewportTransform[0]||1,n=this.canvas&&this.canvas.viewportTransform[3]||1,s=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(i*=e.devicePixelRatio,n*=e.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(i+n)*(s.scaleX+s.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*i*s.scaleX,t.shadowOffsetY=this.shadow.offsetY*n*s.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(e.toLive){var i=e.gradientTransform||e.patternTransform;i&&t.transform.apply(t,i);var n=-this.width/2+e.offsetX||0,s=-this.height/2+e.offsetY||0;t.translate(n,s)}},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t,i){var n=this.toDataURL(i);return e.util.loadImage(n,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),n=this.getBoundingRect();i.width=n.width,i.height=n.height,e.util.wrapElement(i,"div");var s=new e.StaticCanvas(i,{enableRetinaScaling:t.enableRetinaScaling});"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(s.backgroundColor="#fff");var o={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(s.getWidth()/2,s.getHeight()/2),"center","center");var r=this.canvas;s.add(this);var a=s.toDataURL(t);return this.set(o).setCoords(),this.canvas=r,s.dispose(),s=null,a},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var n={colorStops:[]};return n.type=i.type||(i.r1||i.r2?"radial":"linear"),n.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(n.coords.r1=i.r1,n.coords.r2=i.r2),n.gradientTransform=i.gradientTransform,e.Gradient.prototype.addColorStop.call(n,i.colorStops),this.set(t,e.Gradient.forObject(this,n))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&this.canvas.remove(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var n=new e.Point(i.x,i.y),s=this._getLeftTopCoords();return this.angle&&(n=e.util.rotatePoint(n,s,r(-this.angle))),{x:n.x-s.x,y:n.y-s.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,i,s,o,r){var a=e[t];if(i=n(i,!0),!o){var l=r?new a(i[r],i):new a(i);return s&&s(l),l}e.util.enlivenPatterns([i.fill,i.stroke],function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]);var e=r?new a(i[r],i):new a(i);s&&s(e)})},e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians,e={left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,n,s,o,r){var a,l,h,c=t.x,u=t.y;return"string"==typeof n?n=e[n]:n-=.5,"string"==typeof o?o=e[o]:o-=.5,a=o-n,"string"==typeof s?s=i[s]:s-=.5,"string"==typeof r?r=i[r]:r-=.5,l=r-s,(a||l)&&(h=this._getTransformedDimensions(),c=t.x+a*h.x,u=t.y+l*h.y),new fabric.Point(c,u)},translateToCenterPoint:function(e,i,n){var s=this.translateToGivenOrigin(e,i,n,"center","center");return this.angle?fabric.util.rotatePoint(s,e,t(this.angle)):s},translateToOriginPoint:function(e,i,n){var s=this.translateToGivenOrigin(e,"center","center",i,n);return this.angle?fabric.util.rotatePoint(s,e,t(this.angle)):s},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,n){var s,o,r=this.getCenterPoint();return s=void 0!==i&&void 0!==n?this.translateToGivenOrigin(r,"center","center",i,n):new fabric.Point(this.left,this.top),o=new fabric.Point(e.x,e.y),this.angle&&(o=fabric.util.rotatePoint(o,r,-t(this.angle))),o.subtractEquals(s)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),s=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(i){var n,s,o=t(this.angle),r=this.getWidth(),a=Math.cos(o)*r,l=Math.sin(o)*r;n="string"==typeof this.originX?e[this.originX]:this.originX-.5,s="string"==typeof i?e[i]:i-.5,this.left+=a*(s-n),this.top+=l*(s-n),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")},onDeselect:function(){}})}(),function(){function t(t){return[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]}var e=fabric.util.degreesToRadians,i=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,getCoords:function(e,i){this.oCoords||this.setCoords();var n=e?this.aCoords:this.oCoords;return t(i?this.calcCoords(e):n)},intersectsWithRect:function(t,e,i,n){var s=this.getCoords(i,n);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(s,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var n=this.getCoords(e,i),s=0,o=t._getImageLines(i?t.calcCoords(e):e?t.aCoords:t.oCoords);s<4;s++)if(!t.containsPoint(n[s],o))return!1;return!0},isContainedWithinRect:function(t,e,i,n){var s=this.getBoundingRect(i,n);return s.left>=t.x&&s.left+s.width<=e.x&&s.top>=t.y&&s.top+s.height<=e.y},containsPoint:function(t,e,i,n){var e=e||this._getImageLines(n?this.calcCoords(i):i?this.aCoords:this.oCoords),s=this._findCrossPoints(t,e);return 0!==s&&s%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,i=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,s=this.getCoords(!0,t),o=0;o<4;o++)if((e=s[o]).x<=n.x&&e.x>=i.x&&e.y<=n.y&&e.y>=i.y)return!0;if(this.intersectsWithRect(i,n,!0))return!0;var r={x:(i.x+n.x)/2,y:(i.y+n.y)/2};return!!this.containsPoint(r,null,!0)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,s,o,r=0;for(var a in e)if(!((o=e[a]).o.y<t.y&&o.d.y<t.y||o.o.y>=t.y&&o.d.y>=t.y||(o.o.x===o.d.x&&o.o.x>=t.x?s=o.o.x:(i=0,n=(o.d.y-o.o.y)/(o.d.x-o.o.x),s=-(t.y-i*t.x-(o.o.y-n*o.o.x))/(i-n)),s>=t.x&&(r+=1),2!==r)))break;return r},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return fabric.util.makeBoundingBoxFromPoints(i)},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return(t=this._constrainScale(t))<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords()},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getHeight();return this.scale(t/this.height/e)},calcCoords:function(t){var i=e(this.angle),n=this.getViewportTransform(),s=t?this._getTransformedDimensions():this._calculateCurrentDimensions(),o=s.x,r=s.y,a=Math.sin(i),l=Math.cos(i),h=o>0?Math.atan(r/o):0,c=o/Math.cos(h)/2,u=Math.cos(h+i)*c,d=Math.sin(h+i)*c,f=this.getCenterPoint(),p=t?f:fabric.util.transformPoint(f,n),g=new fabric.Point(p.x-u,p.y-d),m=new fabric.Point(g.x+o*l,g.y+o*a),v=new fabric.Point(g.x-r*a,g.y+r*l),b=new fabric.Point(p.x+u,p.y+d);if(!t)var _=new fabric.Point((g.x+v.x)/2,(g.y+v.y)/2),y=new fabric.Point((m.x+g.x)/2,(m.y+g.y)/2),C=new fabric.Point((b.x+m.x)/2,(b.y+m.y)/2),x=new fabric.Point((b.x+v.x)/2,(b.y+v.y)/2),w=new fabric.Point(y.x+a*this.rotatingPointOffset,y.y-l*this.rotatingPointOffset);p={tl:g,tr:m,br:b,bl:v};return t||(p.ml=_,p.mt=y,p.mr=C,p.mb=x,p.mtr=w),p},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=e(this.angle),i=Math.cos(t),n=Math.sin(t);return 6.123233995736766e-17!==i&&-1.8369701987210297e-16!==i||(i=0),[i,n,-n,i,0,0]}return fabric.iMatrix.concat()},calcTransformMatrix:function(t){var e=this.getCenterPoint(),n=[1,0,0,1,e.x,e.y],s=this._calcRotateMatrix(),o=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0),r=this.group&&!t?this.group.calcTransformMatrix():fabric.iMatrix.concat();return r=i(r,n),r=i(r,s),r=i(r,o)},_calcDimensionsTransformMatrix:function(t,n,s){var o=[1,0,Math.tan(e(t)),1],r=[1,Math.tan(e(n)),0,1],a=this.scaleX*(s&&this.flipX?-1:1),l=this.scaleY*(s&&this.flipY?-1:1),h=i([a,0,0,l],o,!0);return i(h,r,!0)},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,n,s=this._getNonTransformedDimensions(),o=s.x/2,r=s.y/2,a=[{x:-o,y:-r},{x:o,y:-r},{x:-o,y:r},{x:o,y:r}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(i=0;i<a.length;i++)a[i]=fabric.util.transformPoint(a[i],l);return n=fabric.util.makeBoundingBoxFromPoints(a),{x:n.width,y:n.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return fabric.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new fabric.Color(e),n=t+": "+i.toRgb()+"; ",s=i.getAlpha();return 1!==s&&(n+=t+"-opacity: "+s.toString()+"; "),n}return t+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule,n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeLineCap?this.strokeLineCap:"butt",r=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;",c=e?"":this.getSvgFilter(),u=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-linejoin: ",r,"; ","stroke-miterlimit: ",a,"; ",u,"fill-rule: ",i,"; ","opacity: ",l,";",c,h].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=this.getSkewX()%360,n=this.getSkewY()%360,s=this.getCenterPoint(),o=fabric.Object.NUM_FRACTION_DIGITS,r="path-group"===this.type?"":"translate("+t(s.x,o)+" "+t(s.y,o)+")",a=0!==e?" rotate("+t(e,o)+")":"",l=1===this.scaleX&&1===this.scaleY?"":" scale("+t(this.scaleX,o)+" "+t(this.scaleY,o)+")",h=0!==i?" skewX("+t(i,o)+")":"",c=0!==n?" skewY("+t(n,o)+")":"",u="path-group"===this.type?this.width:0,d=this.flipX?" matrix(-1 0 0 1 "+u+" 0) ":"",f="path-group"===this.type?this.height:0;return[r,a,l,d,this.flipY?" matrix(1 0 0 -1 0 "+f+")":"",h,c].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),function(){function t(t,e,n){var s={};n.forEach(function(e){s[e]=t[e]}),i(t[e],s,!0)}function e(t,i,n){if(!fabric.isLikelyNode&&t instanceof Element)return t===i;if(t instanceof Array){if(t.length!==i.length)return!1;for(var s=0,o=t.length;s<o;s++)if(t[s]!==i[s])return!1;return!0}if(t&&"object"==typeof t){if(!n&&Object.keys(t).length!==Object.keys(i).length)return!1;for(var r in t)if(!e(t[r],i[r]))return!1;return!0}return t===i}var i=fabric.util.object.extend;fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){return t=t||"stateProperties",t="_"+t,!Object.keys(this[t]).length||!e(this[t],this,!0)},saveState:function(e){var i=e&&e.propertySet||"stateProperties",n="_"+i;return this[n]?(t(this,n,this[i]),e&&e.stateProperties&&t(this,n,e.stateProperties),this):this.setupState(e)},setupState:function(t){var e=(t=t||{}).propertySet||"stateProperties";return t.propertySet=e,this["_"+e]={},this.saveState(t),this}})}(),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,n=t.x,s=t.y;this.__corner=0;for(var o in this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(i=this._getImageLines(this.oCoords[o].corner),0!==(e=this._findCrossPoints({x:n,y:s},i))&&e%2==1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,i,n=this.oCoords,s=t(45-this.angle),o=.707106*this.cornerSize,r=o*Math.cos(s),a=o*Math.sin(s);for(var l in n)e=n[l].x,i=n[l].y,n[l].corner={tl:{x:e-a,y:i-r},tr:{x:e+r,y:i-a},bl:{x:e-r,y:i+a},br:{x:e+a,y:i+r}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.group||!this.active||this.canvas&&!this.canvas.interactive)return this;e.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),s=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/s[0],1/s[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(t){if(!this.hasBorders)return this;var e=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,n=e.x+i,s=e.y+i;if(t.save(),t.strokeStyle=this.borderColor,this._setLineDash(t,this.borderDashArray,null),t.strokeRect(-n/2,-s/2,n,s),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var o=-s/2;t.beginPath(),t.moveTo(0,o),t.lineTo(0,o-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e){if(!this.hasBorders)return this;var i=this._getNonTransformedDimensions(),n=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),s=fabric.util.transformPoint(i,n),o=1/this.borderScaleFactor,r=s.x+o,a=s.y+o;return t.save(),this._setLineDash(t,this.borderDashArray,null),t.strokeStyle=this.borderColor,t.strokeRect(-r/2,-a/2,r,a),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(),i=e.x,n=e.y,s=this.cornerSize,o=-(i+s)/2,r=-(n+s)/2,a=this.transparentCorners?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,a,o,r),this._drawControl("tr",t,a,o+i,r),this._drawControl("bl",t,a,o,r+n),this._drawControl("br",t,a,o+i,r+n),this.get("lockUniScaling")||(this._drawControl("mt",t,a,o+i/2,r),this._drawControl("mb",t,a,o+i/2,r+n),this._drawControl("mr",t,a,o+i,r+n/2),this._drawControl("ml",t,a,o,r+n/2)),this.hasRotatingPoint&&this._drawControl("mtr",t,a,o+i/2,r-this.rotatingPointOffset),t.restore(),this},_drawControl:function(t,i,n,s,o){if(this.isControlVisible(t)){var r=this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":i.beginPath(),i.arc(s+r/2,o+r/2,r/2,0,2*Math.PI,!1),i[n](),a&&i.stroke();break;default:e()||this.transparentCorners||i.clearRect(s,o,r,r),i[n+"Rect"](s,o,r,r),a&&i.strokeRect(s,o,r,r)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var i=function(){},n=(e=e||{}).onComplete||i,s=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.renderAll(),s()},onComplete:function(){t.setCoords(),n()}}),this},fxCenterObjectV:function(t,e){var i=function(){},n=(e=e||{}).onComplete||i,s=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.renderAll(),s()},onComplete:function(){t.setCoords(),n()}}),this},fxRemove:function(t,e){var i=function(){},n=(e=e||{}).onComplete||i,s=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),o.renderAll(),s()},onComplete:function(){o.remove(t),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,s=i.length;n<s;n++)t=i[n],e=n!==s-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,n){var s,o=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(s=t.split("."));var r=s?this.get(s[0])[s[1]]:this.get(t);"from"in i||(i.from=r),e=~e.indexOf("=")?r+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(o)},onChange:function(e){s?o[s[0]][s[1]]=e:o.set(t,e),n||i.onChange&&i.onChange()},onComplete:function(){n||(o.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";function e(t,e){var i=t.origin,n=t.axis1,s=t.axis2,o=t.dimension,r=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(i)){case r:return Math.min(this.get(n),this.get(s));case a:return Math.min(this.get(n),this.get(s))+.5*this.get(o);case l:return Math.max(this.get(n),this.get(s))}}}var i=t.fabric||(t.fabric={}),n=i.util.object.extend,s=i.util.object.clone,o={x1:1,x2:1,y1:1,y2:1},r=i.StaticCanvas.supports("setLineDash");if(i.Line)i.warn("fabric.Line is already defined");else{var a=i.Object.prototype.cacheProperties.concat();a.push("x1","x2","y1","y2"),i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a,initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==o[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint(),n=this.strokeWidth/2;t.translate(i.x-("butt"===this.strokeLineCap&&0===this.height?0:n),i.y-("butt"===this.strokeLineCap&&0===this.width?0:n))}if(!this.strokeDashArray||this.strokeDashArray&&r){var s=this.calcLinePoints();t.moveTo(s.x1,s.y1),t.lineTo(s.x2,s.y2)}t.lineWidth=this.strokeWidth;var o=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=o},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:n,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",this.getSvgId(),'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){e=e||{};var s=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),o=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];return e.originX="left",e.originY="top",new i.Line(o,n(s,e))},i.Line.fromObject=function(t,e,n){var o=s(t,!0);o.points=[t.x1,t.y1,t.x2,t.y2];var r=i.Object._fromObject("Line",o,function(t){delete t.points,e&&e(t)},n,"points");return r&&delete r.points,r}}}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),n=Math.PI,s=i.util.object.extend;if(i.Circle)i.warn("fabric.Circle is already defined.");else{var o=i.Object.prototype.cacheProperties.concat();o.push("radius"),i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:o,initialize:function(t){this.callSuper("initialize",t),this.set("radius",t&&t.radius||0)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,s=0,o=(this.endAngle-this.startAngle)%(2*n);if(0===o)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,s=this.top+this.radius),e.push("<circle ",this.getSvgId(),'cx="'+i+'" cy="'+s+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var r=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,l=Math.cos(this.endAngle)*this.radius,h=Math.sin(this.endAngle)*this.radius,c=o>n?"1":"0";e.push('<path d="M '+r+" "+a," A "+this.radius+" "+this.radius," 0 ",+c+" 1"," "+l+" "+h,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,n){n||(n={});var o=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=o.left||0,o.top=o.top||0;var r=new i.Circle(s(o,n));return r.left-=r.radius,r.top-=r.radius,r},i.Circle.fromObject=function(t,e,n){return i.Object._fromObject("Circle",t,e,n)}}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){this.callSuper("initialize",t),this.set("width",t&&t.width||100).set("height",t&&t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,n=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,n,0,-n,this.strokeDashArray),e.util.drawDashedLine(t,0,-n,i,n,this.strokeDashArray),e.util.drawDashedLine(t,i,n,-i,n,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,n=this.height/2,s=[-i+" "+n,"0 "+-n,i+" "+n].join(",");return e.push("<polygon ",this.getSvgId(),'points="',s,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")}}),e.Triangle.fromObject=function(t,i,n){return e.Object._fromObject("Triangle",t,i,n)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,n=e.util.object.extend;if(e.Ellipse)e.warn("fabric.Ellipse is already defined.");else{var s=e.Object.prototype.cacheProperties.concat();s.push("rx","ry"),e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s,initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,n=this.top+this.ry),e.push("<ellipse ",this.getSvgId(),'cx="',i,'" cy="',n,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var s=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0;var o=new e.Ellipse(n(s,i));return o.top-=o.ry,o.left-=o.rx,o},e.Ellipse.fromObject=function(t,i,n){return e.Object._fromObject("Ellipse",t,i,n)}}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)e.warn("fabric.Rect is already defined");else{var n=e.Object.prototype.stateProperties.concat();n.push("rx","ry");var s=e.Object.prototype.cacheProperties.concat();s.push("rx","ry"),e.Rect=e.util.createClass(e.Object,{stateProperties:n,type:"rect",rx:0,ry:0,cacheProperties:s,initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1!==this.width||1!==this.height){var i=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,o=this.height,r=e?this.left:-this.width/2,a=e?this.top:-this.height/2,l=0!==i||0!==n,h=.4477152502;t.beginPath(),t.moveTo(r+i,a),t.lineTo(r+s-i,a),l&&t.bezierCurveTo(r+s-h*i,a,r+s,a+h*n,r+s,a+n),t.lineTo(r+s,a+o-n),l&&t.bezierCurveTo(r+s,a+o-h*n,r+s-h*i,a+o,r+s-i,a+o),t.lineTo(r+i,a+o),l&&t.bezierCurveTo(r+h*i,a+o,r,a+o-h*n,r,a+o-n),t.lineTo(r,a+n),l&&t.bezierCurveTo(r,a+h*n,r+h*i,a,r+i,a),t.closePath(),this._renderFill(t),this._renderStroke(t)}else t.fillRect(-.5,-.5,1,1)},_renderDashedStroke:function(t){var i=-this.width/2,n=-this.height/2,s=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,i,n,i+s,n,this.strokeDashArray),e.util.drawDashedLine(t,i+s,n,i+s,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i+s,n+o,i,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i,n+o,i,n,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,n=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,n=-this.height/2),e.push("<rect ",this.getSvgId(),'x="',i,'" y="',n,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n){if(!t)return null;n=n||{};var s=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0;var o=new e.Rect(i(n?e.util.object.clone(n):{},s));return o.visible=o.visible&&o.width>0&&o.height>0,o},e.Rect.fromObject=function(t,i,n){return e.Object._fromObject("Rect",t,i,n)}}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,s=e.util.array.max,o=e.util.toFixed,r=e.Object.NUM_FRACTION_DIGITS;if(e.Polyline)e.warn("fabric.Polyline is already defined");else{var a=e.Object.prototype.cacheProperties.concat();a.push("points"),e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,cacheProperties:a,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=n(t,"x"),i=n(t,"y"),o=s(t,"x"),r=s(t,"y");this.width=o-e||0,this.height=r-i||0,this.minX=e||0,this.minY=i||0},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){var e=[],i=0,n=0,s=this._createBaseSVGMarkup();this.group&&"path-group"===this.group.type||(i=this.pathOffset.x,n=this.pathOffset.y);for(var a=0,l=this.points.length;a<l;a++)e.push(o(this.points[a].x-i,r),",",o(this.points[a].y-n,r)," ");return s.push("<",this.type," ",this.getSvgId(),'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(s.join("")):s.join("")},commonRender:function(t,e){var i,n=this.points.length,s=e?0:this.pathOffset.x,o=e?0:this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-s,this.points[0].y-o);for(var r=0;r<n;r++)i=this.points[r],t.lineTo(i.x-s,i.y-o);return!0},_render:function(t,e){this.commonRender(t,e)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var s=0,o=this.points.length;s<o;s++)i=this.points[s],n=this.points[s+1]||i,e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var n=e.parsePointsAttribute(t.getAttribute("points")),s=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(n,e.util.object.extend(s,i))},e.Polyline.fromObject=function(t,i,n){return e.Object._fromObject("Polyline",t,i,n,"points")}}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t,e){this.commonRender(t,e)&&(t.closePath(),this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,n){if(!t)return null;n||(n={});var s=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(s,i(o,n))},e.Polygon.fromObject=function(t,i,n){return e.Object._fromObject("Polygon",t,i,n,"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,s=e.util.object.extend,o=Object.prototype.toString,r=e.util.drawArc,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};if(e.Path)e.warn("fabric.Path is already defined");else{var h=e.Object.prototype.cacheProperties.concat();h.push("path"),e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,cacheProperties:h,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),t||(t=[]);var i="[object Array]"===o.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,void 0===t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),void 0===t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_renderPathCommands:function(t){var e,i,n,s=null,o=0,a=0,l=0,h=0,c=0,u=0,d=-this.pathOffset.x,f=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(d=0,f=0),t.beginPath();for(var p=0,g=this.path.length;p<g;++p){switch((e=this.path[p])[0]){case"l":l+=e[1],h+=e[2],t.lineTo(l+d,h+f);break;case"L":l=e[1],h=e[2],t.lineTo(l+d,h+f);break;case"h":l+=e[1],t.lineTo(l+d,h+f);break;case"H":l=e[1],t.lineTo(l+d,h+f);break;case"v":h+=e[1],t.lineTo(l+d,h+f);break;case"V":h=e[1],t.lineTo(l+d,h+f);break;case"m":o=l+=e[1],a=h+=e[2],t.moveTo(l+d,h+f);break;case"M":o=l=e[1],a=h=e[2],t.moveTo(l+d,h+f);break;case"c":i=l+e[5],n=h+e[6],c=l+e[3],u=h+e[4],t.bezierCurveTo(l+e[1]+d,h+e[2]+f,c+d,u+f,i+d,n+f),l=i,h=n;break;case"C":l=e[5],h=e[6],c=e[3],u=e[4],t.bezierCurveTo(e[1]+d,e[2]+f,c+d,u+f,l+d,h+f);break;case"s":i=l+e[3],n=h+e[4],null===s[0].match(/[CcSs]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.bezierCurveTo(c+d,u+f,l+e[1]+d,h+e[2]+f,i+d,n+f),c=l+e[1],u=h+e[2],l=i,h=n;break;case"S":i=e[3],n=e[4],null===s[0].match(/[CcSs]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.bezierCurveTo(c+d,u+f,e[1]+d,e[2]+f,i+d,n+f),l=i,h=n,c=e[1],u=e[2];break;case"q":i=l+e[3],n=h+e[4],c=l+e[1],u=h+e[2],t.quadraticCurveTo(c+d,u+f,i+d,n+f),l=i,h=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+d,e[2]+f,i+d,n+f),l=i,h=n,c=e[1],u=e[2];break;case"t":i=l+e[1],n=h+e[2],null===s[0].match(/[QqTt]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.quadraticCurveTo(c+d,u+f,i+d,n+f),l=i,h=n;break;case"T":i=e[1],n=e[2],null===s[0].match(/[QqTt]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.quadraticCurveTo(c+d,u+f,i+d,n+f),l=i,h=n;break;case"a":r(t,l+d,h+f,[e[1],e[2],e[3],e[4],e[5],e[6]+l+d,e[7]+h+f]),l+=e[6],h+=e[7];break;case"A":r(t,l+d,h+f,[e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+f]),l=e[6],h=e[7];break;case"z":case"Z":l=o,h=a,t.closePath()}s=e}},_render:function(t){this._renderPathCommands(t),this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return s(this.callSuper("toObject",["sourcePath","pathOffset"].concat(t)),{path:this.path.map(function(t){return t.slice()}),top:this.top,left:this.left})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),n="",s=0,o=this.path.length;s<o;s++)e.push(this.path[s].join(" "));var r=e.join(" ");return this.group&&"path-group"===this.group.type||(n=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",this.getSvgId(),'d="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),n,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,n,s,o=[],r=[],h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,c=0,u=this.path.length;c<u;c++){for(n=(t=this.path[c]).slice(1).trim(),r.length=0;i=h.exec(n);)r.push(i[0]);s=[t.charAt(0)];for(var d=0,f=r.length;d<f;d++)e=parseFloat(r[d]),isNaN(e)||s.push(e);var p=s[0],g=a[p.toLowerCase()],m=l[p]||p;if(s.length-1>g)for(var v=1,b=s.length;v<b;v+=g)o.push([p].concat(s.slice(v,v+g))),p=m;else o.push(s)}return o},_parseDimensions:function(){for(var t,s,o,r,a=[],l=[],h=null,c=0,u=0,d=0,f=0,p=0,g=0,m=0,v=this.path.length;m<v;++m){switch((t=this.path[m])[0]){case"l":d+=t[1],f+=t[2],r=[];break;case"L":d=t[1],f=t[2],r=[];break;case"h":d+=t[1],r=[];break;case"H":d=t[1],r=[];break;case"v":f+=t[1],r=[];break;case"V":f=t[1],r=[];break;case"m":c=d+=t[1],u=f+=t[2],r=[];break;case"M":c=d=t[1],u=f=t[2],r=[];break;case"c":s=d+t[5],o=f+t[6],p=d+t[3],g=f+t[4],r=e.util.getBoundsOfCurve(d,f,d+t[1],f+t[2],p,g,s,o),d=s,f=o;break;case"C":p=t[3],g=t[4],r=e.util.getBoundsOfCurve(d,f,t[1],t[2],p,g,t[5],t[6]),d=t[5],f=t[6];break;case"s":s=d+t[3],o=f+t[4],null===h[0].match(/[CcSs]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),r=e.util.getBoundsOfCurve(d,f,p,g,d+t[1],f+t[2],s,o),p=d+t[1],g=f+t[2],d=s,f=o;break;case"S":s=t[3],o=t[4],null===h[0].match(/[CcSs]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),r=e.util.getBoundsOfCurve(d,f,p,g,t[1],t[2],s,o),d=s,f=o,p=t[1],g=t[2];break;case"q":s=d+t[3],o=f+t[4],p=d+t[1],g=f+t[2],r=e.util.getBoundsOfCurve(d,f,p,g,p,g,s,o),d=s,f=o;break;case"Q":p=t[1],g=t[2],r=e.util.getBoundsOfCurve(d,f,p,g,p,g,t[3],t[4]),d=t[3],f=t[4];break;case"t":s=d+t[1],o=f+t[2],null===h[0].match(/[QqTt]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),r=e.util.getBoundsOfCurve(d,f,p,g,p,g,s,o),d=s,f=o;break;case"T":s=t[1],o=t[2],null===h[0].match(/[QqTt]/)?(p=d,g=f):(p=2*d-p,g=2*f-g),r=e.util.getBoundsOfCurve(d,f,p,g,p,g,s,o),d=s,f=o;break;case"a":r=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6]+d,t[7]+f),d+=t[6],f+=t[7];break;case"A":r=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),d=t[6],f=t[7];break;case"z":case"Z":d=c,f=u}h=t,r.forEach(function(t){a.push(t.x),l.push(t.y)}),a.push(d),l.push(f)}var b=i(a)||0,_=i(l)||0;return{left:b,top:_,width:(n(a)||0)-b,height:(n(l)||0)-_}}}),e.Path.fromObject=function(t,i,n){var s;if("string"!=typeof t.path)return e.Object._fromObject("Path",t,i,n,"path");e.loadSVGFromURL(t.path,function(e){var n=t.path;s=e[0],delete t.path,s.setOptions(t),s.setSourcePath(n),i&&i(s)})},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(o.d,s(o,n)))},e.Path.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.PathGroup?e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Object,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords()},parseDimensionsFromPaths:function(t){for(var i,n,s,o,r,a,l=[],h=[],c=this.paths.length;c--;){o=(s=this.paths[c]).height+s.strokeWidth,r=s.width+s.strokeWidth,i=[{x:s.left,y:s.top},{x:s.left+r,y:s.top},{x:s.left,y:s.top+o},{x:s.left+r,y:s.top+o}],a=this.paths[c].transformMatrix;for(var u=0;u<i.length;u++)n=i[u],a&&(n=e.util.transformPoint(n,a,!1)),l.push(n.x),h.push(n.y)}t.width=Math.max.apply(null,l),t.height=Math.max.apply(null,h)},drawObject:function(t){t.save(),t.translate(-this.width/2,-this.height/2);for(var e=0,i=this.paths.length;e<i;++e)this.paths[e].render(t,!0);t.restore()},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching());if(this.caching=t,t)for(var e=0,i=this.paths.length;e<i;e++)if(this.paths[e].willDrawShadow())return this.caching=!1,!1;return t},willDrawShadow:function(){if(this.shadow)return!0;for(var t=0,e=this.paths.length;t<e;t++)if(this.paths[t].willDrawShadow())return!0;return!1},isCaching:function(){return this.caching||this.group&&this.group.isCaching()},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this.paths.length;t<e;t++)if(this.paths[t].isCacheDirty(!0)){var i=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-i.x/2,-i.y/2,i.x,i.y),!0}return!1},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=this.paths.map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var n=e.toObject(t);return e.includeDefaultValues=i,n});return i(this.callSuper("toObject",["sourcePath"].concat(t)),{paths:e})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){var e=this.getObjects(),i=this.getPointByOrigin("left","top"),n="translate("+i.x+" "+i.y+")",s=this._createBaseSVGMarkup();s.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),n,this.getSvgTransform(),'" ',">\n");for(var o=0,r=e.length;o<r;o++)s.push("\t",e[o].toSVG(t));return s.push("</g>\n"),t?t(s.join("")):s.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=this.getObjects()[0].get("fill")||"";return"string"==typeof t&&(t=t.toLowerCase(),this.getObjects().every(function(e){var i=e.get("fill")||"";return"string"==typeof i&&i.toLowerCase()===t}))},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){var n=t.paths;delete t.paths,"string"==typeof n?e.loadSVGFromURL(n,function(s){var o=n,r=e.util.groupSVGElements(s,t,o);t.paths=n,i(r)}):e.util.enlivenObjects(n,function(s){var o=new e.PathGroup(s,t);t.paths=n,i(o)})},e.PathGroup.async=!0)}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,s=e.util.array.max;if(!e.Group){var o={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),i?this._updateObjectsCoords(!0):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e)),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(t){for(var e=this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],e,t)},_updateObjectCoords:function(t,e,i){if(t.__origHasControls=t.hasControls,t.hasControls=!1,!i){var n=t.getLeft(),s=t.getTop();t.set({left:n-e.x,top:s-e.y}),t.setCoords(!0,!0)}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){var i=this._objects.length;if(this.delegatedProperties[t]||"canvas"===t)for(;i--;)this._objects[i].set(t,e);else for(;i--;)this._objects[i].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(t){var e=this.getObjects().map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var n=e.toObject(t);return e.includeDefaultValues=i,n});return i(this.callSuper("toObject",t),{objects:e})},toDatalessObject:function(t){var e=this.getObjects().map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var n=e.toDatalessObject(t);return e.includeDefaultValues=i,n});return i(this.callSuper("toDatalessObject",t),{objects:e})},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isCaching());if(this.caching=t,t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.caching=!1,!1;return t},willDrawShadow:function(){if(this.shadow)return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isCaching:function(){return this.caching||this.group&&this.group.isCaching()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._renderObject(this._objects[e],t)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].isCacheDirty(!0)){var i=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-i.x/2,-i.y/2,i.x,i.y),!0}return!1},_renderControls:function(t,e){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e);for(var i=0,n=this._objects.length;i<n;i++)this._objects[i]._renderControls(t);t.restore()},_renderObject:function(t,e){if(t.visible){var i=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var i=t.calcTransformMatrix(),n=e.util.qrDecompose(i),s=new e.Point(n.translateX,n.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(s,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),delete t.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e,i,n,s=[],o=[],r=["tr","br","bl","tl"],a=0,l=this._objects.length,h=r.length;a<l;++a)for((e=this._objects[a]).setCoords(!0),n=0;n<h;n++)i=r[n],s.push(e.oCoords[i].x),o.push(e.oCoords[i].y);this.set(this._getBounds(s,o,t))},_getBounds:function(t,i,o){var r=new e.Point(n(t),n(i)),a=new e.Point(s(t),s(i)),l={width:a.x-r.x||0,height:a.y-r.y||0};return o||(l.left=r.x||0,l.top=r.y||0,"center"===this.originX&&(l.left+=l.width/2),"right"===this.originX&&(l.left+=l.width),"center"===this.originY&&(l.top+=l.height/2),"bottom"===this.originY&&(l.top+=l.height)),l},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var i=0,n=this._objects.length;i<n;i++)e.push("\t",this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in o){if(this[t])return this[t];for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(n){delete t.objects,i&&i(new e.Group(n,t,!0))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;if(t.fabric||(t.fabric={}),t.fabric.Image)fabric.warn("fabric.Image is already defined.");else{var i=fabric.Object.prototype.stateProperties.concat();i.push("alignX","alignY","meetOrSlice"),fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,minimumScaleTrigger:.5,stateProperties:i,objectCaching:!1,initialize:function(t,e,i){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e,i)},getElement:function(){return this._element},setElement:function(t,e,i){var n,s;return this._element=t,this._originalElement=t,this._initConfig(i),0===this.resizeFilters.length?n=e:(s=this,n=function(){s.applyFilters(e,s.resizeFilters,s._filteredEl||s._originalElement,!0)}),0!==this.filters.length?this.applyFilters(n):n&&n(this),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,s=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+s,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i+s,e,i+s,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+s,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var i=[],n=[],s=1,o=1;this.filters.forEach(function(t){t&&("Resize"===t.type&&(s*=t.scaleX,o*=t.scaleY),i.push(t.toObject()))}),this.resizeFilters.forEach(function(t){t&&n.push(t.toObject())});var r=e(this.callSuper("toObject",["crossOrigin","alignX","alignY","meetOrSlice"].concat(t)),{src:this.getSrc(),filters:i,resizeFilters:n});return r.width/=s,r.height/=o,r},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,n=-this.height/2,s="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,n=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(s="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(!0),'" x="',i,'" y="',n,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',s,'"',"></image>\n"),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=o}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(t){var e=t?this._element:this._originalElement;return e?fabric.isLikelyNode?e._src:e.src:this.src||""},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyFilters:function(t,e,i,n){if(e=e||this.filters,i=i||this._originalElement){var s,o,r=fabric.util.createImage(),a=this.canvas?this.canvas.getRetinaScaling():fabric.devicePixelRatio,l=this.minimumScaleTrigger/a,h=this;if(0===e.length)return this._element=i,t&&t(this),i;var c=fabric.util.createCanvasElement();return c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0,i.width,i.height),e.forEach(function(t){t&&(n?(s=h.scaleX<l?h.scaleX:1,o=h.scaleY<l?h.scaleY:1,s*a<1&&(s*=a),o*a<1&&(o*=a)):(s=t.scaleX,o=t.scaleY),t.applyTo(c,s,o),n||"Resize"!==t.type||(h.width*=t.scaleX,h.height*=t.scaleY))}),r.width=c.width,r.height=c.height,fabric.isLikelyNode?(r.src=c.toBuffer(void 0,fabric.Image.pngCompression),h._element=r,!n&&(h._filteredEl=r),t&&t(h)):(r.onload=function(){h._element=r,!n&&(h._filteredEl=r),t&&t(h),r.onload=c=null},r.src=c.toDataURL("image/png")),c}},_render:function(t,e){var i,n,s,o=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,s=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):s=this._element,s&&t.drawImage(s,i+o.marginX,n+o.marginY,o.width,o.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,n=this.height,s=0,o=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,n=this._element.height*e,"Mid"===this.alignX&&(s=(this.width-i)/2),"Max"===this.alignX&&(s=this.width-i),"Mid"===this.alignY&&(o=(this.height-n)/2),"Max"===this.alignY&&(o=this.height-n)),{width:i,height:n,marginX:s,marginY:o}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e,i){this.setElement(fabric.util.getById(t),i,e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i,n){n?e&&e(null,n):fabric.Image.prototype._initFilters.call(t,t.filters,function(n){t.filters=n||[],fabric.Image.prototype._initFilters.call(t,t.resizeFilters,function(n){return t.resizeFilters=n||[],new fabric.Image(i,t,e)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(t,i,n){var s,o=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);o.preserveAspectRatio&&(s=fabric.util.parsePreserveAspectRatioAttribute(o.preserveAspectRatio),e(o,s)),fabric.Image.fromURL(o["xlink:href"],i,e(n?fabric.util.object.clone(n):{},o))},fabric.Image.async=!0,fabric.Image.pngCompression=1}}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},i=(t=t||{}).onComplete||e,n=t.onChange||e,s=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){s.setAngle(t),n()},onComplete:function(){s.setCoords(),i()},onStart:function(){s.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){var i=new fabric.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Brightness=s(n.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,s=this.brightness,o=0,r=n.length;o<r;o+=4)n[o]+=s,n[o+1]+=s,n[o+2]+=s;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Convolute=s(n.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(t){for(var e,i,n,s,o,r,a,l,h,c=this.matrix,u=t.getContext("2d"),d=u.getImageData(0,0,t.width,t.height),f=Math.round(Math.sqrt(c.length)),p=Math.floor(f/2),g=d.data,m=d.width,v=d.height,b=u.createImageData(m,v),_=b.data,y=this.opaque?1:0,C=0;C<v;C++)for(var x=0;x<m;x++){o=4*(C*m+x),e=0,i=0,n=0,s=0;for(var w=0;w<f;w++)for(var T=0;T<f;T++)r=x+T-p,(a=C+w-p)<0||a>v||r<0||r>m||(l=4*(a*m+r),h=c[w*f+T],e+=g[l]*h,i+=g[l+1]*h,n+=g[l+2]*h,s+=g[l+3]*h);_[o]=e,_[o+1]=i,_[o+2]=n,_[o+3]=s+y*(255-s)}u.putImageData(b,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.GradientTransparency=s(n.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,s=this.threshold,o=n.length,r=0,a=n.length;r<a;r+=4)n[r+3]=s+255*(o-r)/o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=n.width*n.height*4,r=0;r<o;)e=(s[r]+s[r+1]+s[r+2])/3,s[r]=e,s[r+1]=e,s[r+2]=e,r+=4;i.putImageData(n,0,0)}}),e.Image.filters.Grayscale.fromObject=function(t,i){return t=t||{},t.type="Grayscale",e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=s.length;for(e=0;e<o;e+=4)s[e]=255-s[e],s[e+1]=255-s[e+1],s[e+2]=255-s[e+2];i.putImageData(n,0,0)}}),e.Image.filters.Invert.fromObject=function(t,i){return t=t||{},t.type="Invert",e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Mask=s(n.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,n=t.getContext("2d"),s=n.getImageData(0,0,t.width,t.height),o=s.data,r=this.mask.getElement(),a=e.util.createCanvasElement(),l=this.channel,h=s.width*s.height*4;a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(r,0,0,t.width,t.height);var c=a.getContext("2d").getImageData(0,0,t.width,t.height).data;for(i=0;i<h;i+=4)o[i+3]=c[i+l];n.putImageData(s,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(n){return t.mask=new e.Image(n,t.mask),e.Image.filters.BaseFilter.fromObject(t,i)})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Noise=s(n.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=this.noise,r=0,a=s.length;r<a;r+=4)e=(.5-Math.random())*o,s[r]+=e,s[r+1]+=e,s[r+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Pixelate=s(n.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,s,o,r,a,l=t.getContext("2d"),h=l.getImageData(0,0,t.width,t.height),c=h.data,u=h.height,d=h.width;for(i=0;i<u;i+=this.blocksize)for(n=0;n<d;n+=this.blocksize){s=c[e=4*i*d+4*n],o=c[e+1],r=c[e+2],a=c[e+3];for(var f=i,p=i+this.blocksize;f<p;f++)for(var g=n,m=n+this.blocksize;g<m;g++)c[e=4*f*d+4*g]=s,c[e+1]=o,c[e+2]=r,c[e+3]=a}l.putImageData(h,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.RemoveWhite=s(n.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,s=t.getContext("2d"),o=s.getImageData(0,0,t.width,t.height),r=o.data,a=this.threshold,l=this.distance,h=255-a,c=Math.abs,u=0,d=r.length;u<d;u+=4)e=r[u],i=r[u+1],n=r[u+2],e>h&&i>h&&n>h&&c(e-i)<l&&c(e-n)<l&&c(i-n)<l&&(r[u+3]=0);s.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Sepia=n(i.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),s=n.getImageData(0,0,t.width,t.height),o=s.data,r=o.length;for(e=0;e<r;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=i+100,o[e+1]=i+50,o[e+2]=i+255;n.putImageData(s,0,0)}}),e.Image.filters.Sepia.fromObject=function(t,i){return t=t||{},t.type="Sepia",new e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Sepia2=n(i.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,s,o=t.getContext("2d"),r=o.getImageData(0,0,t.width,t.height),a=r.data,l=a.length;for(e=0;e<l;e+=4)i=a[e],n=a[e+1],s=a[e+2],a[e]=(.393*i+.769*n+.189*s)/1.351,a[e+1]=(.349*i+.686*n+.168*s)/1.203,a[e+2]=(.272*i+.534*n+.131*s)/2.14;o.putImageData(r,0,0)}}),e.Image.filters.Sepia2.fromObject=function(t,i){return t=t||{},t.type="Sepia2",new e.Image.filters.BaseFilter.fromObject(t,i)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Tint=s(n.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity=void 0!==t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,n,s,o,r,a,l,h,c,u=t.getContext("2d"),d=u.getImageData(0,0,t.width,t.height),f=d.data,p=f.length;for(n=(c=new e.Color(this.color).getSource())[0]*this.opacity,s=c[1]*this.opacity,o=c[2]*this.opacity,h=1-this.opacity,i=0;i<p;i+=4)r=f[i],a=f[i+1],l=f[i+2],f[i]=n+r*h,f[i+1]=s+a*h,f[i+2]=o+l*h;u.putImageData(d,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Multiply=s(n.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,n,s=t.getContext("2d"),o=s.getImageData(0,0,t.width,t.height),r=o.data,a=r.length;for(n=new e.Color(this.color).getSource(),i=0;i<a;i+=4)r[i]*=n[0]/255,r[i+1]*=n[1]/255,r[i+2]*=n[2]/255;s.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.Blend=n(i.BaseFilter,{type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,n,s,o,r,a,l,h,c,u,d=t.getContext("2d"),f=d.getImageData(0,0,t.width,t.height),p=f.data,g=!1;if(this.image){g=!0;var m=e.util.createCanvasElement();m.width=this.image.width,m.height=this.image.height;var v=new e.StaticCanvas(m);v.add(this.image),u=v.getContext("2d").getImageData(0,0,v.width,v.height).data}else i=(u=new e.Color(this.color).getSource())[0]*this.alpha,n=u[1]*this.alpha,s=u[2]*this.alpha;for(var b=0,_=p.length;b<_;b+=4)switch(o=p[b],r=p[b+1],a=p[b+2],g&&(i=u[b]*this.alpha,n=u[b+1]*this.alpha,s=u[b+2]*this.alpha),this.mode){case"multiply":p[b]=o*i/255,p[b+1]=r*n/255,p[b+2]=a*s/255;break;case"screen":p[b]=1-(1-o)*(1-i),p[b+1]=1-(1-r)*(1-n),p[b+2]=1-(1-a)*(1-s);break;case"add":p[b]=Math.min(255,o+i),p[b+1]=Math.min(255,r+n),p[b+2]=Math.min(255,a+s);break;case"diff":case"difference":p[b]=Math.abs(o-i),p[b+1]=Math.abs(r-n),p[b+2]=Math.abs(a-s);break;case"subtract":l=o-i,h=r-n,c=a-s,p[b]=l<0?0:l,p[b+1]=h<0?0:h,p[b+2]=c<0?0:c;break;case"darken":p[b]=Math.min(o,i),p[b+1]=Math.min(r,n),p[b+2]=Math.min(a,s);break;case"lighten":p[b]=Math.max(o,i),p[b+1]=Math.max(r,n),p[b+2]=Math.max(a,s)}d.putImageData(f,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,s=Math.sqrt,o=Math.abs,r=Math.max,a=Math.round,l=Math.sin,h=Math.ceil,c=e.Image.filters,u=e.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){if(1!==e||1!==i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var n,s=t.width,o=t.height,r=a(s*e),l=a(o*i);"sliceHack"===this.resizeType&&(n=this.sliceByTwo(t,s,o,r,l)),"hermite"===this.resizeType&&(n=this.hermiteFastResize(t,s,o,r,l)),"bilinear"===this.resizeType&&(n=this.bilinearFiltering(t,s,o,r,l)),"lanczos"===this.resizeType&&(n=this.lanczosResize(t,s,o,r,l)),t.width=r,t.height=l,t.getContext("2d").putImageData(n,0,0)}},sliceByTwo:function(t,i,s,o,a){var l,h=t.getContext("2d"),c=.5,u=.5,d=1,f=1,p=!1,g=!1,m=i,v=s,b=e.util.createCanvasElement(),_=b.getContext("2d");for(o=n(o),a=n(a),b.width=r(o,i),b.height=r(a,s),o>i&&(c=2,d=-1),a>s&&(u=2,f=-1),l=h.getImageData(0,0,i,s),t.width=r(o,i),t.height=r(a,s),h.putImageData(l,0,0);!p||!g;)i=m,s=v,o*d<n(m*c*d)?m=n(m*c):(m=o,p=!0),a*f<n(v*u*f)?v=n(v*u):(v=a,g=!0),l=h.getImageData(0,0,i,s),_.putImageData(l,0,0),h.clearRect(0,0,m,v),h.drawImage(b,0,0,i,s,0,0,m,v);return h.getImageData(0,0,o,a)},lanczosResize:function(t,e,r,a,c){function u(t){var l,h,d,f,E,k,D,A,I,P,j;for(S.x=(t+.5)*b,O.x=n(S.x),l=0;l<c;l++){for(S.y=(l+.5)*_,O.y=n(S.y),E=0,k=0,D=0,A=0,I=0,h=O.x-x;h<=O.x+x;h++)if(!(h<0||h>=e)){P=n(1e3*o(h-S.x)),T[P]||(T[P]={});for(var L=O.y-w;L<=O.y+w;L++)L<0||L>=r||(j=n(1e3*o(L-S.y)),T[P][j]||(T[P][j]=v(s(i(P*y,2)+i(j*C,2))/1e3)),(d=T[P][j])>0&&(E+=d,k+=d*g[f=4*(L*e+h)],D+=d*g[f+1],A+=d*g[f+2],I+=d*g[f+3]))}m[f=4*(l*a+t)]=k/E,m[f+1]=D/E,m[f+2]=A/E,m[f+3]=I/E}return++t<a?u(t):p}var d=t.getContext("2d"),f=d.getImageData(0,0,e,r),p=d.getImageData(0,0,a,c),g=f.data,m=p.data,v=function(t){return function(e){if(e>t)return 0;if(e*=Math.PI,o(e)<1e-16)return 1;var i=e/t;return l(e)*l(i)/e/i}}(this.lanczosLobes),b=this.rcpScaleX,_=this.rcpScaleY,y=2/this.rcpScaleX,C=2/this.rcpScaleY,x=h(b*this.lanczosLobes/2),w=h(_*this.lanczosLobes/2),T={},S={},O={};return u(0)},bilinearFiltering:function(t,e,i,s,o){var r,a,l,h,c,u,d,f,p,g=0,m=this.rcpScaleX,v=this.rcpScaleY,b=t.getContext("2d"),_=4*(e-1),y=b.getImageData(0,0,e,i).data,C=b.getImageData(0,0,s,o),x=C.data;for(l=0;l<o;l++)for(h=0;h<s;h++)for(c=m*h-(r=n(m*h)),u=v*l-(a=n(v*l)),p=4*(a*e+r),d=0;d<4;d++)f=y[p+d]*(1-c)*(1-u)+y[p+4+d]*c*(1-u)+y[p+_+d]*u*(1-c)+y[p+_+4+d]*c*u,x[g++]=f;return C},hermiteFastResize:function(t,e,i,r,a){for(var l=this.rcpScaleX,c=this.rcpScaleY,u=h(l/2),d=h(c/2),f=t.getContext("2d"),p=f.getImageData(0,0,e,i).data,g=f.getImageData(0,0,r,a),m=g.data,v=0;v<a;v++)for(var b=0;b<r;b++){for(var _=4*(b+v*r),y=0,C=0,x=0,w=0,T=0,S=0,O=0,E=(v+.5)*c,k=n(v*c);k<(v+1)*c;k++)for(var D=o(E-(k+.5))/d,A=(b+.5)*l,I=D*D,P=n(b*l);P<(b+1)*l;P++){var j=o(A-(P+.5))/u,L=s(I+j*j);L>1&&L<-1||(y=2*L*L*L-3*L*L+1)>0&&(O+=y*p[(j=4*(P+k*e))+3],x+=y,p[j+3]<255&&(y=y*p[j+3]/250),w+=y*p[j],T+=y*p[j+1],S+=y*p[j+2],C+=y)}m[_]=w/C,m[_+1]=T/C,m[_+2]=S/C,m[_+3]=O/x}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.ColorMatrix=s(n.BaseFilter,{type:"ColorMatrix",initialize:function(t){t||(t={}),this.matrix=t.matrix||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},applyTo:function(t){var e,i,n,s,o,r=t.getContext("2d"),a=r.getImageData(0,0,t.width,t.height),l=a.data,h=l.length,c=this.matrix;for(e=0;e<h;e+=4)i=l[e],n=l[e+1],s=l[e+2],o=l[e+3],l[e]=i*c[0]+n*c[1]+s*c[2]+o*c[3]+c[4],l[e+1]=i*c[5]+n*c[6]+s*c[7]+o*c[8]+c[9],l[e+2]=i*c[10]+n*c[11]+s*c[12]+o*c[13]+c[14],l[e+3]=i*c[15]+n*c[16]+s*c[17]+o*c[18]+c[19];r.putImageData(a,0,0)},toObject:function(){return i(this.callSuper("toObject"),{type:this.type,matrix:this.matrix})}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Contrast=s(n.BaseFilter,{type:"Contrast",initialize:function(t){t=t||{},this.contrast=t.contrast||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,s=259*(this.contrast+255)/(255*(259-this.contrast)),o=0,r=n.length;o<r;o+=4)n[o]=s*(n[o]-128)+128,n[o+1]=s*(n[o+1]-128)+128,n[o+2]=s*(n[o+2]-128)+128;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{contrast:this.contrast})}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,s=e.util.createClass;n.Saturate=s(n.BaseFilter,{type:"Saturate",initialize:function(t){t=t||{},this.saturate=t.saturate||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),s=n.data,o=.01*-this.saturate,r=0,a=s.length;r<a;r+=4)e=Math.max(s[r],s[r+1],s[r+2]),s[r]+=e!==s[r]?(e-s[r])*o:0,s[r+1]+=e!==s[r+1]?(e-s[r+1])*o:0,s[r+2]+=e!==s[r+2]?(e-s[r+2])*o:0;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{saturate:this.saturate})}}),e.Image.filters.Saturate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed,n=e.Object.NUM_FRACTION_DIGITS;if(e.Text)e.warn("fabric.Text is already defined");else{var s=e.Object.prototype.stateProperties.concat();s.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing");var o=e.Object.prototype.cacheProperties.concat();o.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:s,cacheProperties:o,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,charSpacing:0,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this._initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(t)||this.cursorWidth||2,this.height=this._getTextHeight(t))},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._renderTextLinesBackground(t),this._renderText(t),this._renderTextDecoration(t)},_renderText:function(t){this._renderTextFill(t),this._renderTextStroke(t)},_setTextStyles:function(t){t.textBaseline="alphabetic",t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,n=this._textLines.length;i<n;i++){var s=this._getLineWidth(t,i);s>e&&(e=s)}return e},_renderChars:function(t,e,i,n,s){var o,r,a=t.slice(0,-4);if(this[a].toLive){var l=-this.width/2+this[a].offsetX||0,h=-this.height/2+this[a].offsetY||0;e.save(),e.translate(l,h),n-=l,s-=h}if(0!==this.charSpacing)for(var c=this._getWidthOfCharSpacing(),u=0,d=(i=i.split("")).length;u<d;u++)o=i[u],r=e.measureText(o).width+c,e[t](o,n,s),n+=r>0?r:0;else e[t](i,n,s);this[a].toLive&&e.restore()},_renderTextLine:function(t,e,i,n,s,o){s-=this.fontSize*this._fontSizeFraction;var r=this._getLineWidth(e,o);if("justify"!==this.textAlign||this.width<r)this._renderChars(t,e,i,n,s,o);else for(var a,l=i.split(/\s+/),h=0,c=this._getWidthOfWords(e,l.join(" "),o,0),u=this.width-c,d=l.length-1,f=d>0?u/d:0,p=0,g=0,m=l.length;g<m;g++){for(;" "===i[h]&&h<i.length;)h++;a=l[g],this._renderChars(t,e,a,n+p,s,o,h),p+=this._getWidthOfWords(e,a,o,h)+f,h+=a.length}},_getWidthOfWords:function(t,e){var i=t.measureText(e).width;return 0!==this.charSpacing&&(i+=e.split("").length*this._getWidthOfCharSpacing()),i>0?i:0},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextCommon:function(t,e){for(var i=0,n=this._getLeftOffset(),s=this._getTopOffset(),o=0,r=this._textLines.length;o<r;o++){var a=this._getHeightOfLine(t,o),l=a/this.lineHeight,h=this._getLineWidth(t,o),c=this._getLineLeftOffset(h);this._renderTextLine(e,t,this._textLines[o],n+c,s+i+l,o),i+=a}},_renderTextFill:function(t){!this.fill&&this.isEmptyStyles()||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextLinesBackground:function(t){if(this.textBackgroundColor){var e,i,n,s=0,o=t.fillStyle;t.fillStyle=this.textBackgroundColor;for(var r=0,a=this._textLines.length;r<a;r++)e=this._getHeightOfLine(t,r),(i=this._getLineWidth(t,r))>0&&(n=this._getLineLeftOffset(i),t.fillRect(this._getLeftOffset()+n,this._getTopOffset()+s,i,e/this.lineHeight)),s+=e;t.fillStyle=o,this._removeShadow(t)}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.saveState({propertySet:"_dimensionAffectingProps"}),this.dirty=!0),t},_getLineWidth:function(t,e){if(this.__lineWidths[e])return-1===this.__lineWidths[e]?this.width:this.__lineWidths[e];var i,n=this._textLines[e];return i=""===n?0:this._measureLine(t,e),this.__lineWidths[e]=i,i&&"justify"===this.textAlign&&n.split(/\s+/).length>1&&(this.__lineWidths[e]=-1),i},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},_measureLine:function(t,e){var i,n=this._textLines[e],s=t.measureText(n).width,o=0;return 0!==this.charSpacing&&(o=(n.split("").length-1)*this._getWidthOfCharSpacing()),i=s+o,i>0?i:0},_renderTextDecoration:function(t){if(this.textDecoration){var e=this.height/2,i=this,n=[];this.textDecoration.indexOf("underline")>-1&&n.push(.85),this.textDecoration.indexOf("line-through")>-1&&n.push(.43),this.textDecoration.indexOf("overline")>-1&&n.push(-.12),n.length>0&&function(n){var s,o,r,a,l,h,c,u=0;for(s=0,o=i._textLines.length;s<o;s++){for(l=i._getLineWidth(t,s),h=i._getLineLeftOffset(l),c=i._getHeightOfLine(t,s),r=0,a=n.length;r<a;r++)t.fillRect(i._getLeftOffset()+h,u+(i._fontSizeMult-1+n[r])*i.fontSize-e,l,i.fontSize/15);u+=c}}(n)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&(this._setTextStyles(t),this._initDimensions(t)),this.callSuper("render",t,e)))},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","textDecoration","textAlign","textBackgroundColor","charSpacing"].concat(t);return this.callSuper("toObject",e)},toSVG:function(t){this.ctx||(this.ctx=e.util.createCanvasElement().getContext("2d"));var i=this._createBaseSVGMarkup(),n=this._getSVGLeftTopOffsets(this.ctx),s=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(i,s),t?t(i.join("")):i.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0);return{textLeft:-this.width/2+(this.group&&"path-group"===this.group.type?this.left:0),textTop:0+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){var i=this.getSvgFilter(),n=""===i?"":' style="'+i+'"';t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',n,">\n",e.textBgRects.join(""),"\t\t<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(!0),'" >\n',e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],n=[],s=0;this._setSVGBg(n);for(var o=0,r=this._textLines.length;o<r;o++)this.textBackgroundColor&&this._setSVGTextLineBg(n,o,e,t,s),this._setSVGTextLineText(o,i,s,e,t,n),s+=this._getHeightOfLine(this.ctx,o);return{textSpans:i,textBgRects:n}},_setSVGTextLineText:function(t,s,o,r,a){var l=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-a+o-this.height/2;"justify"!==this.textAlign?s.push('\t\t\t<tspan x="',i(r+this._getLineLeftOffset(this._getLineWidth(this.ctx,t)),n),'" ','y="',i(l,n),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>\n"):this._setSVGTextLineJustifed(t,s,l,r)},_setSVGTextLineJustifed:function(t,s,o,r){var a=e.util.createCanvasElement().getContext("2d");this._setTextStyles(a);var l,h,c=this._textLines[t].split(/\s+/),u=this._getWidthOfWords(a,c.join("")),d=this.width-u,f=c.length-1,p=f>0?d/f:0,g=this._getFillAttributes(this.fill);for(r+=this._getLineLeftOffset(this._getLineWidth(a,t)),t=0,h=c.length;t<h;t++)l=c[t],s.push('\t\t\t<tspan x="',i(r,n),'" ','y="',i(o,n),'" ',g,">",e.util.string.escapeXml(l),"</tspan>\n"),r+=this._getWidthOfWords(a,l)+p},_setSVGTextLineBg:function(t,e,s,o,r){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',i(s+this._getLineLeftOffset(this._getLineWidth(this.ctx,e)),n),'" y="',i(r-this.height/2,n),'" width="',i(this._getLineWidth(this.ctx,e),n),'" height="',i(this._getHeightOfLine(this.ctx,e)/this.lineHeight,n),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,n),'" y="',i(-this.height/2,n),'" width="',i(this.width,n),'" height="',i(this.height,n),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),this._dimensionAffectingProps.indexOf(t)>-1&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var n=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);(i=e.util.object.extend(i?e.util.object.clone(i):{},n)).top=i.top||0,i.left=i.left||0,"dx"in n&&(i.left+=n.dx),"dy"in n&&(i.top+=n.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var s="";"textContent"in t?s=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(s=t.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var o=new e.Text(s,i),r=o.getHeight()/o.height,a=((o.height+o.strokeWidth)*o.lineHeight-o.height)*r,l=o.getHeight()+a,h=0;return"left"===o.originX&&(h=o.getWidth()/2),"right"===o.originX&&(h=-o.getWidth()/2),o.set({left:o.getLeft()+h,top:o.getTop()-l/2+o.fontSize*(.18+o._fontSizeFraction)/o.lineHeight}),o},e.Text.fromObject=function(t,i,n){return e.Object._fromObject("Text",t,i,n,"text")},e.util.createAccessors(e.Text)}}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var n in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],n=t;n<e;n++)i.push(this.getSelectionStyles(n));return i}var s=this.get2DCursorLocation(t);return this._getStyleDeclaration(s.lineIndex,s.charIndex)||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},_initDimensions:function(t){t||this.clearContextTop(),this.callSuper("_initDimensions",t)},render:function(t,e){this.clearContextTop(),this.callSuper("render",t,e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t),this.ctx=t},clearContextTop:function(){if(this.active&&this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop;t.save(),t.transform.apply(t,this.canvas.viewportTransform),this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._clearTextArea(t),t.restore()}},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t,e,i=this.text.split("");this.canvas&&this.canvas.contextTop?((e=this.canvas.contextTop).save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e)):(e=this.ctx).save(),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0;i<e;i++){if(t<=this._textLines[i].length)return{lineIndex:i,charIndex:t};t-=this._textLines[i].length+1}return{lineIndex:i-1,charIndex:this._textLines[i-1].length<t?this._textLines[i-1].length:t}},getCurrentCharStyle:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fontSize?i.fontSize:this.fontSize},getCurrentCharColor:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fill?i.fill:this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),n=this._getTopOffset(),s=this._getCursorBoundariesOffsets(t,e);return{left:i,top:n,leftOffset:s.left+s.lineLeft,topOffset:s.top}},_getCursorBoundariesOffsets:function(t,e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var i,n=0,s=0,o=0,r=0,a=0,l=0;l<this.selectionStart;l++)"\n"===t[l]?(a=0,r+=this._getHeightOfLine(this.ctx,s),s++,o=0):(a+=this._getWidthOfChar(this.ctx,t[l],s,o),o++),n=this._getLineLeftOffset(this._getLineWidth(this.ctx,s));return"cursor"===e&&(r+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,s)/this.lineHeight-this.getCurrentCharFontSize(s,o)*(1-this._fontSizeFraction)),0!==this.charSpacing&&o===this._textLines[s].length&&(a-=this._getWidthOfCharSpacing()),i={top:r,left:a>0?a:0,lineLeft:n},this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,s=i.charIndex,o=this.getCurrentCharFontSize(n,s),r=t.leftOffset,a=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/a;e.fillStyle=this.getCurrentCharColor(n,s),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+r-l/2,t.top+t.topOffset,l,o)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var n=this.get2DCursorLocation(this.selectionStart),s=this.get2DCursorLocation(this.selectionEnd),o=n.lineIndex,r=s.lineIndex,a=o;a<=r;a++){var l=this._getLineLeftOffset(this._getLineWidth(i,a))||0,h=this._getHeightOfLine(this.ctx,a),c=0,u=0,d=this._textLines[a];if(a===o){for(var f=0,p=d.length;f<p;f++)f>=n.charIndex&&(a!==r||f<s.charIndex)&&(u+=this._getWidthOfChar(i,d[f],a,f)),f<n.charIndex&&(l+=this._getWidthOfChar(i,d[f],a,f));f===d.length&&(u-=this._getWidthOfCharSpacing())}else if(a>o&&a<r)u+=this._getLineWidth(i,a)||5;else if(a===r){for(var g=0,m=s.charIndex;g<m;g++)u+=this._getWidthOfChar(i,d[g],a,g);s.charIndex===d.length&&(u-=this._getWidthOfCharSpacing())}c=h,(this.lineHeight<1||a===r&&this.lineHeight>1)&&(h/=this.lineHeight),i.fillRect(e.left+l,e.top+e.topOffset,u>0?u:0,h),e.topOffset+=c}},_renderChars:function(t,e,i,n,s,o,r){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,n,s);r=r||0;var a,l,h=this._getHeightOfLine(e,o),c="";e.save(),s-=h/this.lineHeight*this._fontSizeFraction;for(var u=r,d=i.length+r;u<=d;u++)a=a||this.getCurrentCharStyle(o,u),l=this.getCurrentCharStyle(o,u+1),(this._hasStyleChanged(a,l)||u===d)&&(this._renderChar(t,e,o,u-1,c,n,s,h),c="",a=l),c+=i[u-r];e.restore()},_renderCharsFast:function(t,e,i,n,s){"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,n,s),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,n,s)},_renderChar:function(t,e,i,n,s,o,r,a){var l,h,c,u,d,f,p,g,m,v=this._getStyleDeclaration(i,n);if(v?(h=this._getHeightOfChar(e,s,i,n),u=v.stroke,c=v.fill,f=v.textDecoration):h=this.fontSize,u=(u||this.stroke)&&"strokeText"===t,c=(c||this.fill)&&"fillText"===t,v&&e.save(),l=this._applyCharStylesGetWidth(e,s,i,n,v||null),f=f||this.textDecoration,v&&v.textBackgroundColor&&this._removeShadow(e),0!==this.charSpacing){g=this._getWidthOfCharSpacing(),l=0;for(var b,_=0,y=(p=s.split("")).length;_<y;_++)b=p[_],c&&e.fillText(b,o+l,r),u&&e.strokeText(b,o+l,r),l+=(m=e.measureText(b).width+g)>0?m:0}else c&&e.fillText(s,o,r),u&&e.strokeText(s,o,r);(f||""!==f)&&(d=this._fontSizeFraction*a/this.lineHeight,this._renderCharDecoration(e,f,o,r,d,l,h)),v&&e.restore(),e.translate(l,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,n,s,o,r){if(e){var a,l,h=r/15,c={underline:n+r/10,"line-through":n-r*(this._fontSizeFraction+this._fontSizeMult-1)+h,overline:n-(this._fontSizeMult-this._fontSizeFraction)*r},u=["underline","line-through","overline"];for(a=0;a<u.length;a++)l=u[a],e.indexOf(l)>-1&&t.fillRect(i,c[l],o,h)}},_renderTextLine:function(t,e,i,n,s,o){this.isEmptyStyles()||(s+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,n,s,o)},_renderTextDecoration:function(t){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",t)},_renderTextLinesBackground:function(t){this.callSuper("_renderTextLinesBackground",t);var e,i,n,s,o,r,a,l,h,c,u=0,d=this._getLeftOffset(),f=this._getTopOffset(),p="";t.save();for(var g=0,m=this._textLines.length;g<m;g++)if(e=this._getHeightOfLine(t,g),""!==(s=this._textLines[g])&&this.styles&&this._getLineStyle(g)){i=this._getLineWidth(t,g),n=this._getLineLeftOffset(i),a=l=h=c=0;for(var v=0,b=s.length;v<b;v++)p!==(r=this._getStyleDeclaration(g,v)||{}).textBackgroundColor&&(c&&h&&(t.fillStyle=p,t.fillRect(a,l,h,c)),a=l=h=c=0,p=r.textBackgroundColor||""),r.textBackgroundColor?(o=s[v],p===r.textBackgroundColor&&(p=r.textBackgroundColor,a||(a=d+n+this._getWidthOfCharsAt(t,g,v)),l=f+u,h+=this._getWidthOfChar(t,o,g,v),c=e/this.lineHeight)):p="";c&&h&&(t.fillStyle=p,t.fillRect(a,l,h,c),a=l=h=c=0),u+=e}else u+=e;t.restore()},_getCacheProp:function(t,e){return t+e.fontSize+e.fontWeight+e.fontStyle},_getFontCache:function(t){return fabric.charWidthsCache[t]||(fabric.charWidthsCache[t]={}),fabric.charWidthsCache[t]},_applyCharStylesGetWidth:function(e,i,n,s,o){var r,a,l,h=o||this._getStyleDeclaration(n,s),c=t(h);if(this._applyFontStyles(c),l=this._getFontCache(c.fontFamily),a=this._getCacheProp(i,c),!h&&l[a]&&this.caching)return l[a];"string"==typeof c.shadow&&(c.shadow=new fabric.Shadow(c.shadow));var u=c.fill||this.fill;return e.fillStyle=u.toLive?u.toLive(e,this):u,c.stroke&&(e.strokeStyle=c.stroke&&c.stroke.toLive?c.stroke.toLive(e,this):c.stroke),e.lineWidth=c.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(c),c.shadow&&(c.scaleX=this.scaleX,c.scaleY=this.scaleY,c.canvas=this.canvas,c.getObjectScaling=this.getObjectScaling,this._setShadow.call(c,e)),this.caching&&l[a]?l[a]:(r=e.measureText(i).width,this.caching&&(l[a]=r),r)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,i,n){return n?this.styles[e]&&this.styles[e][i]?t(this.styles[e][i]):{}:this.styles[e]&&this.styles[e][i]?this.styles[e][i]:null},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_getWidthOfChar:function(t,e,i,n){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(e))return this._getWidthOfSpace(t,i);t.save();var s=this._applyCharStylesGetWidth(t,e,i,n);return 0!==this.charSpacing&&(s+=this._getWidthOfCharSpacing()),t.restore(),s>0?s:0},_getHeightOfChar:function(t,e,i){var n=this._getStyleDeclaration(e,i);return n&&n.fontSize?n.fontSize:this.fontSize},_getWidthOfCharsAt:function(t,e,i){var n,s,o=0;for(n=0;n<i;n++)s=this._textLines[e][n],o+=this._getWidthOfChar(t,s,e,n);return o},_measureLine:function(t,e){this._isMeasuring=!0;var i=this._getWidthOfCharsAt(t,e,this._textLines[e].length);return 0!==this.charSpacing&&(i-=this._getWidthOfCharSpacing()),this._isMeasuring=!1,i>0?i:0},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],n=this._getWidthOfWords(t,i,e,0),s=this.width-n,o=i.length-i.replace(this._reSpacesAndTabs,"").length,r=Math.max(s/o,t.measureText(" ").width);return this.__widthOfSpace[e]=r,r},_getWidthOfWords:function(t,e,i,n){for(var s=0,o=0;o<e.length;o++){var r=e[o];r.match(/\s/)||(s+=this._getWidthOfChar(t,r,i,o+n))}return s},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],n=this._getHeightOfChar(t,e,0),s=1,o=i.length;s<o;s++){var r=this._getHeightOfChar(t,e,s);r>n&&(n=r)}return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e,i=0,n=0,s=this._textLines.length;n<s;n++)e=this._getHeightOfLine(t,n),i+=n===s-1?e/this.lineHeight:e;return i},toObject:function(e){return fabric.util.object.extend(this.callSuper("toObject",e),{styles:t(this.styles,!0)})}}),fabric.IText.fromObject=function(t,e,i){return fabric.Object._fromObject("IText",t,e,i,"text")}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1,this.callSuper("onDeselect")},initAddedHandler:function(){var t=this;this.on("added",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],fabric.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})}.bind(this),t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){s.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this.text.length,this._fireSelectionChanged(),this._updateTextarea()},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,n=t.length;i<n;i++)"\n"===t[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,n=this.text.charAt(i),s=/[ \n\.,;!\?\-]/;!s.test(n)&&i>0&&i<this.text.length;)i+=e,n=this.text.charAt(i);return s.test(n)&&"\n"!==n&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.selected=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.renderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,n=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==n||i!==e&&n!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.cursorOffsetCache={},this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top,this.hiddenTextarea.style.fontSize=t.fontSize}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.text.split(""),e=this._getCursorBoundaries(t,"cursor"),i=this.get2DCursorLocation(),n=i.lineIndex,s=i.charIndex,o=this.getCurrentCharFontSize(n,s),r=e.leftOffset,a=this.calcTransformMatrix(),l={x:e.left+r,y:e.top+e.topOffset+o},h=this.canvas.upperCanvasEl,c=h.width-o,u=h.height-o;return l=fabric.util.transformPoint(l,a),(l=fabric.util.transformPoint(l,this.canvas.viewportTransform)).x<0&&(l.x=0),l.x>c&&(l.x=c),l.y<0&&(l.y=0),l.y>u&&(l.y=u),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.selectionStart=t,this.selectionEnd=t},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],i=e?t:t-1;this.removeStyleObject(e,i),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this._splitTextIntoLines()},insertChars:function(t,e){var i;if(this.selectionEnd-this.selectionStart>1&&this._removeCharsFromTo(this.selectionStart,this.selectionEnd),e||!this.isEmptyStyles())for(var n=0,s=t.length;n<s;n++)e&&(i=fabric.util.object.clone(fabric.copiedTextStyle[n],!0)),this.insertChar(t[n],n<s-1,i);else this.insertChar(t,!1)},insertChar:function(t,e,i){var n="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,n,i),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart,e||(this._updateTextarea(),this.setCoords(),this._fireSelectionChanged(),this.fire("changed"),this.restartCursorIfNeeded(),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.renderAll()))},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,i,n){this.shiftLineStyles(e,1);var s={},o={};if(this.styles[e]&&this.styles[e][i-1]&&(s=this.styles[e][i-1]),n&&s)o[0]=t(s),this.styles[e+1]=o;else{var r=!1;for(var a in this.styles[e]){var l=parseInt(a,10);l>=i&&(r=!0,o[l-i]=this.styles[e][a],delete this.styles[e][a])}r&&(this.styles[e+1]=o)}this._forceClearCache=!0},insertCharStyleObject:function(e,i,n){var s=this.styles[e],o=t(s);0!==i||n||(i=1);for(var r in o){var a=parseInt(r,10);a>=i&&(s[a+1]=o[a],o[a-1]||delete s[a])}var l=n||t(s[i-1]);l&&(this.styles[e][i]=l),this._forceClearCache=!0},insertStyleObjects:function(t,e,i){var n=this.get2DCursorLocation(),s=n.lineIndex,o=n.charIndex;this._getLineStyle(s)||this._setLineStyle(s,{}),"\n"===t?this.insertNewlineStyleObject(s,o,e):this.insertCharStyleObject(s,o,i)},shiftLineStyles:function(e,i){var n=t(this.styles);for(var s in n)(o=parseInt(s,10))<=e&&delete n[o];for(var s in this.styles){var o=parseInt(s,10);o>e&&(this.styles[o+i]=n[o],n[o-i]||delete this.styles[o])}},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=i.lineIndex,s=i.charIndex;this._removeStyleObject(t,i,n,s)},_getTextOnPreviousLine:function(t){return this._textLines[t-1]},_removeStyleObject:function(e,i,n,s){if(e){var o=this._getTextOnPreviousLine(i.lineIndex),r=o?o.length:0;this.styles[n-1]||(this.styles[n-1]={});for(s in this.styles[n])this.styles[n-1][parseInt(s,10)+r]=this.styles[n][s];this.shiftLineStyles(i.lineIndex,-1)}else{var a=this.styles[n];a&&delete a[s];var l=t(a);for(var h in l){var c=parseInt(h,10);c>=s&&0!==c&&(a[c-1]=l[c],delete a[c])}}},insertNewline:function(){this.insertChars("\n")},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e,t.e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable&&(!t.e.button||1===t.e.button)){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,!this.editable||this._isObjectMoved(t.e)||t.e.button&&1!==t.e.button||(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i=this.getLocalPointer(t),n=0,s=0,o=0,r=0,a=0,l=this._textLines.length;a<l;a++){e=this._textLines[a],o+=this._getHeightOfLine(this.ctx,a)*this.scaleY;var h=this._getLineWidth(this.ctx,a);s=this._getLineLeftOffset(h)*this.scaleX;for(var c=0,u=e.length;c<u;c++){if(n=s,s+=this._getWidthOfChar(this.ctx,e[c],a,this.flipX?u-c:c)*this.scaleX,!(o<=i.y||s<=i.x))return this._getNewSelectionStartFromOffset(i,n,s,r+a,u);r++}if(i.y<o)return this._getNewSelectionStartFromOffset(i,n,s,r+a-1,u)}return this.text.length},_getNewSelectionStartFromOffset:function(t,e,i,n,s){var o=t.x-e,r=n+(i-t.x>o?0:1);return this.flipX&&(r=s-r),r>this.text.length&&(r=this.text.length),r}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="white-space: nowrap; position: absolute; top: "+t.top+"; left: "+t.left+"; opacity: 0; width: 1px; height: 1px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMapUp:{67:"copy",88:"cut"},_ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.renderAll()}},onKeyUp:function(t){this.isEditing&&!this._copyDone?t.keyCode in this._ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this._ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()):this._copyDone=!1},onInput:function(t){if(this.isEditing&&!this.inCompositionMode){var e,i,n,s=this.selectionStart||0,o=this.selectionEnd||0,r=this.text.length,a=this.hiddenTextarea.value.length;a>r?(n="left"===this._selectionDirection?o:s,e=a-r,i=this.hiddenTextarea.value.slice(n,n+e)):(e=a-r+o-s,i=this.hiddenTextarea.value.slice(s,s+e)),this.insertChars(i),t.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){var e=t.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(e,!1),this.prevCompositionLength=e.length},forwardDelete:function(t){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(t)}this.removeChars(t)},copy:function(t){if(this.selectionStart!==this.selectionEnd){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),fabric.copiedText=e,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),t.stopImmediatePropagation(),t.preventDefault(),this._copyDone=!0}},paste:function(t){var e=null,i=this._getClipboardData(t),n=!0;i?(e=i.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===e||(n=!1)):e=fabric.copiedText,e&&this.insertChars(e,n),t.stopImmediatePropagation(),t.preventDefault()},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(t),this.removeChars(t))},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){for(var i,n=this._textLines[t].slice(0,e),s=this._getLineWidth(this.ctx,t),o=this._getLineLeftOffset(s),r=0,a=n.length;r<a;r++)i=n[r],o+=this._getWidthOfChar(this.ctx,i,t,r);return o},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),s=n.lineIndex;if(s===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-i;var o=n.charIndex,r=this._getWidthBeforeCursor(s,o),a=this._getIndexOnLine(s+1,r);return this._textLines[s].slice(o).length+a+2},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),s=n.lineIndex;if(0===s||t.metaKey||33===t.keyCode)return-i;var o=n.charIndex,r=this._getWidthBeforeCursor(s,o),a=this._getIndexOnLine(s-1,r),l=this._textLines[s].slice(0,o);return-this._textLines[s-1].length+a-l.length},_getIndexOnLine:function(t,e){for(var i,n=this._getLineWidth(this.ctx,t),s=this._textLines[t],o=this._getLineLeftOffset(n),r=0,a=0,l=s.length;a<l;a++){var h=s[a],c=this._getWidthOfChar(this.ctx,h,t,a);if((o+=c)>e){i=!0;var u=o-c,d=o,f=Math.abs(u-e);r=Math.abs(d-e)<f?a:a-1;break}}return i||(r=s.length-1),r},moveCursorDown:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var n;if(t.altKey)n=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[e])}if(void 0!==typeof n&&this[e]!==n)return this[e]=n,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?i+="Shift":i+="outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this.text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.set("dirty",!0),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,n,s,o){this._getLineStyle(t)?this._setSVGTextLineChars(t,e,i,n,o):fabric.Text.prototype._setSVGTextLineText.call(this,t,e,i,n,s)},_setSVGTextLineChars:function(t,e,i,n,s){for(var o=this._textLines[t],r=0,a=this._getLineLeftOffset(this._getLineWidth(this.ctx,t))-this.width/2,l=this._getSVGLineTopOffset(t),h=this._getHeightOfLine(this.ctx,t),c=0,u=o.length;c<u;c++){var d=this._getStyleDeclaration(t,c)||{};e.push(this._createTextCharSpan(o[c],d,a,l.lineTop+l.offset,r));var f=this._getWidthOfChar(this.ctx,o[c],t,c);d.textBackgroundColor&&s.push(this._createTextCharBg(d,a,l.lineTop,h,f,r)),r+=f}},_getSVGLineTopOffset:function(t){for(var e=0,i=0,n=0;n<t;n++)e+=this._getHeightOfLine(this.ctx,n);return i=this._getHeightOfLine(this.ctx,n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(i,n,s,o,r,a){return['\t\t<rect fill="',i.textBackgroundColor,'" x="',t(n+a,e),'" y="',t(s-this.height/2,e),'" width="',t(r,e),'" height="',t(o/this.lineHeight,e),'"></rect>\n'].join("")},_createTextCharSpan:function(i,n,s,o,r){var a=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},n));return['\t\t\t<tspan x="',t(s+r,e),'" y="',t(o-this.height/2,e),'" ',n.fontFamily?'font-family="'+n.fontFamily.replace(/"/g,"'")+'" ':"",n.fontSize?'font-size="'+n.fontSize+'" ':"",n.fontStyle?'font-style="'+n.fontStyle+'" ':"",n.fontWeight?'font-weight="'+n.fontWeight+'" ':"",n.textDecoration?'text-decoration="'+n.textDecoration+'" ':"",'style="',a,'">',fabric.util.string.escapeXml(i),"</tspan>\n"].join("")}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,noScaleCache:!1,initialize:function(t,i){this.callSuper("initialize",t,i),this.setControlsVisibility(e.Textbox.getTextboxControlVisibility()),this.ctx=this.objectCaching?this._cacheContext:e.util.createCanvasElement().getContext("2d"),this._dimensionAffectingProps.push("width")},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t),this.clearContextTop()),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(t),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(t))},_generateStyleMap:function(){for(var t=0,e=0,i=0,n={},s=0;s<this._textLines.length;s++)"\n"===this.text[i]&&s>0?(e=0,i++,t++):" "===this.text[i]&&s>0&&(e++,i++),n[s]={line:t,offset:e},i+=this._textLines[s].length,e+=this._textLines[s].length;return n},_getStyleDeclaration:function(t,e,i){if(this._styleMap){var n=this._styleMap[t];if(!n)return i?{}:null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e,i)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var i=this._styleMap[t];this.styles[i.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var i,n=e.split(this._reNewline),s=[];for(i=0;i<n.length;i++)s=s.concat(this._wrapLine(t,n[i],i));return s},_measureText:function(t,e,i,n){var s=0;n=n||0;for(var o=0,r=e.length;o<r;o++)s+=this._getWidthOfChar(t,e[o],i,o+n);return s},_wrapLine:function(t,e,i){for(var n=0,s=[],o="",r=e.split(" "),a="",l=0,h=0,c=0,u=0,d=!0,f=this._getWidthOfCharSpacing(),p=0;p<r.length;p++)a=r[p],h=this._measureText(t,a,i,l),l+=a.length,(n+=c+h-f)>=this.width&&!d?(s.push(o),o="",n=h,d=!0):n+=f,d||(o+=" "),o+=a,c=this._measureText(t," ",i,l),l++,d=!1,h>u&&(u=h);return p&&s.push(o),u>this.dynamicMinWidth&&(this.dynamicMinWidth=u-f),s},_splitTextIntoLines:function(t){t=t||this.ctx;var e=this.textAlign;this._styleMap=null,t.save(),this._setTextStyles(t),this.textAlign="left";var i=this._wrapText(t,this.text);return this.textAlign=e,t.restore(),this._textLines=i,this._styleMap=this._generateStyleMap(),i},setOnGroup:function(t,e){"scaleX"===t&&(this.set("scaleX",Math.abs(1/e)),this.set("width",this.get("width")*e/(void 0===this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=e)},get2DCursorLocation:function(t){void 0===t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0,n=0;n<e;n++){var s=this._textLines[n].length;if(t<=i+s)return{lineIndex:n,charIndex:t-i};i+=s,"\n"!==this.text[i]&&" "!==this.text[i]||i++}return{lineIndex:e-1,charIndex:this._textLines[e-1].length}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,n=0,s=this.get2DCursorLocation(),o=this._textLines[s.lineIndex].split(""),r=this._getLineLeftOffset(this._getLineWidth(this.ctx,s.lineIndex)),a=0;a<s.charIndex;a++)n+=this._getWidthOfChar(this.ctx,o[a],s.lineIndex,a);for(a=0;a<s.lineIndex;a++)i+=this._getHeightOfLine(this.ctx,a);return"cursor"===e&&(i+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,s.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(s.lineIndex,s.charIndex)*(1-this._fontSizeFraction)),{top:i,left:n,lineLeft:r}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return this.callSuper("toObject",["minWidth"].concat(t))}}),e.Textbox.fromObject=function(t,i,n){return e.Object._fromObject("Textbox",t,i,n,"text")},e.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}("undefined"!=typeof exports?exports:this),function(){var t=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(e,i,n,s,o,r,a){var l=i.target;if(!(l instanceof fabric.Textbox))return t.call(fabric.Canvas.prototype,e,i,n,s,o,r,a);var h=l.width*(e.x/i.scaleX/(l.width+l.strokeWidth));return h>=l.getMinWidth()?(l.set("width",h),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if(void 0!==fabric.Textbox)for(var t=this._objects.length;t--;)if(this._objects[t]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())},fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]},insertCharStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertCharStyleObject.apply(this,[t,e,i])},insertNewlineStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[t,e,i])},shiftLineStyles:function(t,e){t=this._styleMap[t].line,fabric.IText.prototype.shiftLineStyles.call(this,t,e)},_getTextOnPreviousLine:function(t){for(var e=this._textLines[t-1];this._styleMap[t-2]&&this._styleMap[t-2].line===this._styleMap[t-1].line;)e=this._textLines[t-2]+e,t--;return e},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=this._styleMap[i.lineIndex],s=n.line,o=n.offset+i.charIndex;this._removeStyleObject(t,i,s,o)}})}(),function(){var t=fabric.IText.prototype._getNewSelectionStartFromOffset;fabric.IText.prototype._getNewSelectionStartFromOffset=function(e,i,n,s,o){s=t.call(this,e,i,n,s,o);for(var r=0,a=0,l=0;l<this._textLines.length&&!((r+=this._textLines[l].length)+a>=s);l++)"\n"!==this.text[r+a]&&" "!==this.text[r+a]||a++;return s-l+a}}(),function(){function request(t,e,i){var n=URL.parse(t);n.port||(n.port=0===n.protocol.indexOf("https:")?443:80);var s=(0===n.protocol.indexOf("https:")?HTTPS:HTTP).request({hostname:n.hostname,port:n.port,path:n.path,method:"GET"},function(t){var n="";e&&t.setEncoding(e),t.on("end",function(){i(n)}),t.on("data",function(e){200===t.statusCode&&(n+=e)})});s.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+n.hostname+":"+n.port):fabric.log(t.message),i(null)}),s.end()}function requestFs(t,e){require("fs").readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){function n(n){n?(s.src=new Buffer(n,"binary"),s._src=t,e&&e.call(i,s)):(s=null,e&&e.call(i,null,!0))}var s=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(s.src=s._src=t,e&&e.call(i,s)):t&&0!==t.indexOf("http")?requestFs(t,n):t?request(t,"binary",n):e&&e.call(i,t)},fabric.loadSVGFromURL=function(t,e,i){0!==(t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim()).indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.createCanvasForNode=function(t,e,i,n){n=n||i;var s=fabric.document.createElement("canvas"),o=new Canvas(t||600,e||600,n),r=new Canvas(t||600,e||600,n);s.style={},s.width=o.width,s.height=o.height,(i=i||{}).nodeCanvas=o,i.nodeCacheCanvas=r;var a=new(fabric.Canvas||fabric.StaticCanvas)(s,i);return a.nodeCanvas=o,a.nodeCacheCanvas=r,a.contextContainer=o.getContext("2d"),a.contextCache=r.getContext("2d"),a.Font=Canvas.Font,a};var originaInitStatic=fabric.StaticCanvas.prototype._initStatic;fabric.StaticCanvas.prototype._initStatic=function(t,e){t=t||fabric.document.createElement("canvas"),this.nodeCanvas=new Canvas(t.width,t.height),this.nodeCacheCanvas=new Canvas(t.width,t.height),originaInitStatic.call(this,t,e),this.contextContainer=this.nodeCanvas.getContext("2d"),this.contextCache=this.nodeCacheCanvas.getContext("2d"),this.Font=Canvas.Font},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)},fabric.StaticCanvas.prototype._initRetinaScaling=function(){if(this._isRetinaScaling())return this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.nodeCanvas.width=this.width*fabric.devicePixelRatio,this.nodeCanvas.height=this.height*fabric.devicePixelRatio,this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio),this},fabric.Canvas&&(fabric.Canvas.prototype._initRetinaScaling=fabric.StaticCanvas.prototype._initRetinaScaling);var origSetBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension;fabric.StaticCanvas.prototype._setBackstoreDimension=function(t,e){return origSetBackstoreDimension.call(this,t,e),this.nodeCanvas[t]=e,this},fabric.Canvas&&(fabric.Canvas.prototype._setBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension)}}(),"undefined"==typeof jQuery)throw new Error("iziModal requires jQuery");(function(t){"use strict";var e=t(window),i=t(document),n="iziModal",s={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened",DESTROYED:"destroyed"},o=function(){var t,e=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in i)if(void 0!==e.style[t])return i[t]}(),r=!!/Mobi/.test(navigator.userAgent),a=0,l=function(t,e){this.init(t,e)};l.prototype={constructor:l,init:function(e,i){var o=this;this.$element=t(e),this.id=this.$element.attr("id"),this.content=this.$element.html(),this.state=s.CLOSED,this.options=i,this.width=0,this.timer=null,this.timerTimeout=null,this.progressBar=null,this.isPaused=!1,this.isFullscreen=!1,this.headerHeight=0,this.modalHeight=0,this.$overlay=t('<div class="'+n+'-overlay" style="background-color:'+i.overlayColor+'"></div>'),this.$navigate=t('<div class="'+n+'-navigate"><div class="'+n+'-navigate-caption">Use</div><button class="'+n+'-navigate-prev"></button><button class="'+n+'-navigate-next"></button></div>'),this.group={name:this.$element.attr("data-"+n+"-group"),index:null,ids:[]},this.$element.attr("aria-hidden","true"),this.$element.attr("aria-labelledby",this.id),this.$element.attr("role","dialog"),this.$element.hasClass("iziModal")||this.$element.addClass("iziModal"),void 0===this.group.name&&""!==i.group&&(this.group.name=i.group,this.$element.attr("data-"+n+"-group",i.group)),!0===this.options.loop&&this.$element.attr("data-"+n+"-loop",!0),t.each(this.options,function(t,e){var s=o.$element.attr("data-"+n+"-"+t);try{void 0!==s&&!1!==s&&(i[t]=""===s||("function"==typeof e?new Function(s):s))}catch(t){}}),this.$header=t('<div class="'+n+'-header"><h2 class="'+n+'-header-title">'+i.title+'</h2><p class="'+n+'-header-subtitle">'+i.subtitle+'</p><a href="javascript:void(0)" class="'+n+"-button "+n+'-button-close" data-'+n+"-close></a></div>"),!0===i.fullscreen&&(this.$header.append('<a href="javascript:void(0)" class="'+n+"-button "+n+'-button-fullscreen" data-'+n+"-fullscreen></a>"),!0===i.rtl?this.$header.css("padding-left","76px"):this.$header.css("padding-right","76px")),!0!==i.timeoutProgressbar||isNaN(parseInt(i.timeout))||!1===i.timeout||0===i.timeout||this.$header.prepend('<div class="'+n+'-progressbar"><div style="background-color:'+i.timeoutProgressbarColor+'"></div></div>'),!0===i.iframe?(this.$element.html('<div class="'+n+'-wrap"><div class="'+n+'-content"><iframe class="'+n+'-iframe"></iframe>'+this.content+"</div></div>"),null!==i.iframeHeight&&this.$element.find("."+n+"-iframe").css("height",i.iframeHeight)):this.$element.html('<div class="'+n+'-wrap"><div class="'+n+'-content">'+this.content+"</div></div>"),""===i.subtitle&&this.$header.addClass(n+"-noSubtitle"),""===i.title&&""===i.subtitle||(null!==i.headerColor&&(this.$element.css("border-bottom","3px solid "+i.headerColor),this.$header.css("background",this.options.headerColor)),null===i.icon&&null===i.iconText||(this.$header.prepend('<i class="'+n+'-header-icon"></i>'),null!==i.icon&&this.$header.find("."+n+"-header-icon").addClass(i.icon).css("color",i.iconColor),null!==i.iconText&&this.$header.find("."+n+"-header-icon").html(i.iconText)),this.$element.css("overflow","hidden").prepend(this.$header)),null===i.zindex||isNaN(parseInt(i.zindex))||(this.$element.css("z-index",i.zindex),this.$navigate.css("z-index",i.zindex-1),this.$overlay.css("z-index",i.zindex-2)),""!==i.radius&&this.$element.css("border-radius",i.radius),""!==i.padding&&this.$element.find("."+n+"-content").css("padding",i.padding),""!==i.theme&&("light"===i.theme?this.$element.addClass(n+"-light"):this.$element.addClass(i.theme)),!0===i.openFullscreen&&(this.isFullscreen=!0,this.$element.addClass("isFullscreen")),!0===i.rtl&&this.$element.addClass(n+"-rtl"),"top"!==i.attached&&"top"!=this.$element.attr("data-"+n+"-attached")||this.$element.addClass("isAttachedTop"),"bottom"!==i.attached&&"bottom"!=this.$element.attr("data-"+n+"-attached")||this.$element.addClass("isAttachedBottom"),function(){t(document.body).find("style[rel="+o.id+"]").remove();var e=/%|px|em|cm/,s=String(i.width).split(e),r=String(i.width),a="px";s=String(s).split(",")[0],isNaN(i.width)&&(a=-1!=String(i.width).indexOf("%")?"%":r.slice("-2")),o.$element.css({"margin-left":-s/2+a,"max-width":parseInt(s)+a}),o.width=o.$element.outerWidth(),parseInt(s)>o.width&&(o.width=parseInt(s)),o.mediaQueries='<style rel="'+o.id+'">@media handheld, only screen and (max-width: '+o.width+"px) { #"+o.id+"{ width:100% !important; max-width:100% !important; margin-left:0 !important; left:0 !important; right:0 !important; border-radius:0!important} #"+o.id+" ."+n+"-header{border-radius:0!important} }</style>",t(document.body).append(o.mediaQueries),o.$element.css("margin-top",parseInt(-o.$element.innerHeight()/2)+"px")}()},setGroup:function(e){var i=this,s=this.group.name||e;if(this.group.ids=[],void 0!==e&&e!==this.group.name&&(s=e,this.group.name=s,this.$element.attr("data-"+n+"-group",s)),void 0!==s&&""!==s){var o=0;t.each(t("."+n+"[data-"+n+"-group="+s+"]"),function(e,n){i.group.ids.push(t(this).attr("id")),i.id==t(this).attr("id")&&(i.group.index=o),o++})}},toggle:function(){this.state==s.OPENED&&this.close(),this.state==s.CLOSED&&this.open()},open:function(e){function a(){l.state=s.OPENED,l.$element.trigger(s.OPENED),l.options.onOpened&&"function"==typeof l.options.onOpened&&l.options.onOpened(l)}var l=this;if(this.state==s.CLOSED){if(l.$element.off("click","[data-"+n+"-close]").on("click","[data-"+n+"-close]",function(e){e.preventDefault();var i=t(e.currentTarget).attr("data-"+n+"-transitionOut");void 0!==i?l.close({transition:i}):l.close()}),l.$element.off("click","[data-"+n+"-fullscreen]").on("click","[data-"+n+"-fullscreen]",function(t){t.preventDefault(),!0===l.isFullscreen?(l.isFullscreen=!1,l.$element.removeClass("isFullscreen")):(l.isFullscreen=!0,l.$element.addClass("isFullscreen")),l.options.onFullscreen&&"function"==typeof l.options.onFullscreen&&l.options.onFullscreen(l),l.$element.trigger("fullscreen",l)}),l.$navigate.off("click","."+n+"-navigate-next").on("click","."+n+"-navigate-next",function(t){l.next(t)}),l.$element.off("click","[data-"+n+"-next]").on("click","[data-"+n+"-next]",function(t){l.next(t)}),l.$navigate.off("click","."+n+"-navigate-prev").on("click","."+n+"-navigate-prev",function(t){l.prev(t)}),l.$element.off("click","[data-"+n+"-prev]").on("click","[data-"+n+"-prev]",function(t){l.prev(t)}),this.setGroup(),this.state=s.OPENING,this.$element.trigger(s.OPENING),this.$element.attr("aria-hidden","false"),!0===this.options.iframe){this.$element.find("."+n+"-content").addClass(n+"-content-loader"),this.$element.find("."+n+"-iframe").on("load",function(){t(this).parent().removeClass(n+"-content-loader")});var h=null;try{h=""!==t(e.currentTarget).attr("href")?t(e.currentTarget).attr("href"):null}catch(t){}if(null===this.options.iframeURL||null!==h&&void 0!==h||(h=this.options.iframeURL),null===h||void 0===h)throw new Error("Failed to find iframe URL");this.$element.find("."+n+"-iframe").attr("src",h)}(this.options.bodyOverflow||r)&&(t("html").addClass(n+"-isOverflow"),r&&t("body").css("overflow","hidden")),this.options.onOpening&&"function"==typeof this.options.onOpening&&this.options.onOpening(this),function(){if(l.group.ids.length>1){l.$navigate.appendTo("body"),l.$navigate.addClass(l.options.transitionInOverlay),!0===l.options.navigateCaption&&l.$navigate.find("."+n+"-navigate-caption").show(),!0===l.options.navigateArrows||"closeToModal"===l.options.navigateArrows?(l.$navigate.find("."+n+"-navigate-prev").css("margin-left",-(l.width/2+84)),l.$navigate.find("."+n+"-navigate-next").css("margin-right",-(l.width/2+84))):(l.$navigate.find("."+n+"-navigate-prev").css("left",0),l.$navigate.find("."+n+"-navigate-next").css("right",0));0===l.group.index&&0===t("."+n+"[data-"+n+'-group="'+l.group.name+'"][data-'+n+"-loop]").length&&!1===l.options.loop&&l.$navigate.find("."+n+"-navigate-prev").hide(),l.group.index+1===l.group.ids.length&&0===t("."+n+"[data-"+n+'-group="'+l.group.name+'"][data-'+n+"-loop]").length&&!1===l.options.loop&&l.$navigate.find("."+n+"-navigate-next").hide()}!0===l.options.overlay&&l.$overlay.appendTo("body"),l.options.transitionInOverlay&&l.$overlay.addClass(l.options.transitionInOverlay);var i=l.options.transitionIn;"object"==typeof e&&(void 0===e.transition&&void 0===e.transitionIn||(i=e.transition||e.transitionIn)),""!==i?(l.$element.addClass("transitionIn "+i).show(),l.$element.find("."+n+"-wrap").one(o,function(){l.$element.removeClass(i+" transitionIn"),l.$overlay.removeClass(l.options.transitionInOverlay),l.$navigate.removeClass(l.options.transitionInOverlay),a()})):(l.$element.show(),a()),!0!==l.options.pauseOnHover||!0!==l.options.pauseOnHover||!1===l.options.timeout||isNaN(parseInt(l.options.timeout))||!1===l.options.timeout||0===l.options.timeout||(l.$element.off("mouseenter").on("mouseenter",function(t){t.preventDefault(),l.isPaused=!0}),l.$element.off("mouseleave").on("mouseleave",function(t){t.preventDefault(),l.isPaused=!1}))}(),!1===this.options.timeout||isNaN(parseInt(this.options.timeout))||!1===this.options.timeout||0===this.options.timeout||(!0===this.options.timeoutProgressbar?(this.progressBar={hideEta:null,maxHideTime:null,currentTime:(new Date).getTime(),el:this.$element.find("."+n+"-progressbar > div"),updateProgress:function(){if(!l.isPaused){l.progressBar.currentTime=l.progressBar.currentTime+10;var t=(l.progressBar.hideEta-l.progressBar.currentTime)/l.progressBar.maxHideTime*100;l.progressBar.el.width(t+"%"),t<0&&l.close()}}},this.options.timeout>0&&(this.progressBar.maxHideTime=parseFloat(this.options.timeout),this.progressBar.hideEta=(new Date).getTime()+this.progressBar.maxHideTime,this.timerTimeout=setInterval(this.progressBar.updateProgress,10))):this.timerTimeout=setTimeout(function(){l.close()},l.options.timeout)),this.options.overlayClose&&!this.$element.hasClass(this.options.transitionOut)&&this.$overlay.click(function(){l.close()}),this.options.focusInput&&this.$element.find(":input:not(button):enabled:visible:first").focus(),function t(){l.recalculateLayout(),l.timer=setTimeout(t,300)}(),function(){if(l.options.history){var t=document.title;document.title=t+" - "+l.options.title,document.location.hash=l.id,document.title=t}}(),i.keydown(function(t){l.options.closeOnEscape&&27===t.keyCode&&l.close()})}},close:function(e){function a(){l.state=s.CLOSED,l.$element.trigger(s.CLOSED),!0===l.options.iframe&&l.$element.find("."+n+"-iframe").attr("src",""),(l.options.bodyOverflow||r)&&(t("html").removeClass(n+"-isOverflow"),r&&t("body").css("overflow","auto")),l.options.onClosed&&"function"==typeof l.options.onClosed&&l.options.onClosed(l),!0===l.options.restoreDefaultContent&&l.$element.find("."+n+"-content").html(l.content),void 0===t("."+n+":visible").attr("id")&&t("html").removeClass(n+"-isAttached")}var l=this;if(this.state==s.OPENED||this.state==s.OPENING){i.off("keydown"),this.state=s.CLOSING,this.$element.trigger(s.CLOSING),this.$element.attr("aria-hidden","true"),clearTimeout(this.timer),clearTimeout(this.timerTimeout),l.options.onClosing&&"function"==typeof l.options.onClosing&&l.options.onClosing(this);var h=this.options.transitionOut;if("object"==typeof e&&(void 0===e.transition&&void 0===e.transitionOut||(h=e.transition||e.transitionOut)),""!==h){var c="light"==this.options.theme?n+"-light":this.options.theme;this.$element.attr("class",n+" transitionOut "+h+" "+c+" "+String(!0===this.isFullscreen?"isFullscreen":"")+" "+String(this.$element.hasClass("isAttached")?"isAttached":"")+" "+String("top"===this.options.attached?"isAttachedTop":"")+" "+String("bottom"===this.options.attached?"isAttachedBottom":"")+(this.options.rtl?n+"-rtl":"")),this.$overlay.attr("class",n+"-overlay "+this.options.transitionOutOverlay),this.$navigate.attr("class",n+"-navigate "+this.options.transitionOutOverlay),this.$element.one(o,function(){l.$element.hasClass(h)&&l.$element.removeClass(h+" transitionOut").hide(),l.$overlay.removeClass(l.options.transitionOutOverlay).remove(),l.$navigate.removeClass(l.options.transitionOutOverlay).remove(),a()})}else this.$element.hide(),this.$overlay.remove(),this.$navigate.remove(),a()}},next:function(e){var i=this,s="fadeInRight",o="fadeOutLeft",r=t("."+n+":visible"),a={};a.out=this,void 0!==e&&"object"!=typeof e?(e.preventDefault(),r=t(e.currentTarget),s=r.attr("data-"+n+"-transitionIn"),o=r.attr("data-"+n+"-transitionOut")):void 0!==e&&(void 0!==e.transitionIn&&(s=e.transitionIn),void 0!==e.transitionOut&&(o=e.transitionOut)),this.close({transition:o}),setTimeout(function(){for(var e=t("."+n+"[data-"+n+'-group="'+i.group.name+'"][data-'+n+"-loop]").length,o=i.group.index+1;o<=i.group.ids.length;o++){try{a.in=t("#"+i.group.ids[o]).data().iziModal}catch(t){console.info("No next modal")}if(void 0!==a.in){t("#"+i.group.ids[o]).iziModal("open",{transition:s});break}if(o==i.group.ids.length&&e>0||!0===i.options.loop)for(var r=0;r<=i.group.ids.length;r++)if(a.in=t("#"+i.group.ids[r]).data().iziModal,void 0!==a.in){t("#"+i.group.ids[r]).iziModal("open",{transition:s});break}}},200),t(document).trigger(n+"-group-change",a)},prev:function(e){var i=this,s="fadeInLeft",o="fadeOutRight",r=t("."+n+":visible"),a={};a.out=this,void 0!==e&&"object"!=typeof e?(e.preventDefault(),r=t(e.currentTarget),s=r.attr("data-"+n+"-transitionIn"),o=r.attr("data-"+n+"-transitionOut")):void 0!==e&&(void 0!==e.transitionIn&&(s=e.transitionIn),void 0!==e.transitionOut&&(o=e.transitionOut)),this.close({transition:o}),setTimeout(function(){for(var e=t("."+n+"[data-"+n+'-group="'+i.group.name+'"][data-'+n+"-loop]").length,o=i.group.index;o>=0;o--){try{a.in=t("#"+i.group.ids[o-1]).data().iziModal}catch(t){console.info("No previous modal")}if(void 0!==a.in){t("#"+i.group.ids[o-1]).iziModal("open",{transition:s});break}if(0===o&&e>0||!0===i.options.loop)for(var r=i.group.ids.length-1;r>=0;r--)if(a.in=t("#"+i.group.ids[r]).data().iziModal,void 0!==a.in){t("#"+i.group.ids[r]).iziModal("open",{transition:s});break}}},200),t(document).trigger(n+"-group-change",a)},destroy:function(){var e=t.Event("destroy");this.$element.trigger(e),i.off("keydown"),clearTimeout(this.timer),clearTimeout(this.timerTimeout),!0===this.options.iframe&&this.$element.find("."+n+"-iframe").remove(),this.$element.html(this.$element.find("."+n+"-content").html()),i.find("style[rel="+this.id+"]").remove(),this.$element.off("click","[data-"+n+"-close]"),this.$element.off("click","[data-"+n+"-fullscreen]"),this.$element.off("."+n).removeData(n).attr("style",""),this.$overlay.remove(),this.$navigate.remove(),this.$element.trigger(s.DESTROYED),this.$element=null},getState:function(){return this.state},getGroup:function(){return this.group},setTitle:function(t){null!==this.options.title&&(this.$header.find("."+n+"-header-title").html(t),this.options.title=t)},setSubtitle:function(t){null!==this.options.subtitle&&(this.$header.find("."+n+"-header-subtitle").html(t),this.options.subtitle=t)},setIcon:function(t){0===this.$header.find("."+n+"-header-icon").length&&this.$header.prepend('<i class="'+n+'-header-icon"></i>'),this.$header.find("."+n+"-header-icon").attr("class",n+"-header-icon "+t),this.options.icon=t},setIconText:function(t){this.$header.find("."+n+"-header-icon").html(t),this.options.iconText=t},setHeaderColor:function(t){this.$element.css("border-bottom","3px solid "+t),this.$header.css("background",t),this.options.headerColor=t},setZindex:function(t){isNaN(parseInt(this.options.zindex))||(this.options.zindex=t,this.$element.css("z-index",t),this.$navigate.css("z-index",t-1),this.$overlay.css("z-index",t-2))},setTransitionIn:function(t){this.options.transitionIn=param.transition},setTransitionOut:function(t){this.options.transitionOut=param.transition},startLoading:function(){this.$element.find("."+n+"-loader").length||this.$element.append('<div class="'+n+"-loader "+this.options.transitionInOverlay+'"></div>')},stopLoading:function(){var t=this;this.$element.find("."+n+"-loader").removeClass(this.options.transitionInOverlay).addClass(this.options.transitionOutOverlay),this.$element.find("."+n+"-loader").one(o,function(){t.$element.find("."+n+"-loader").removeClass(t.options.transitionOutOverlay).remove()})},recalculateLayout:function(){this.$element.find("."+n+"-header").length&&(this.headerHeight=parseInt(this.$element.find("."+n+"-header").innerHeight())+2,this.$element.css("overflow","hidden"));var i=e.height(),o=this.$element.outerHeight(),r=this.$element.find("."+n+"-content")[0].scrollHeight,a=parseInt(-(this.$element.innerHeight()+1)/2)+"px";if(o!==this.modalHeight&&(this.modalHeight=o,this.options.onResize&&"function"==typeof this.options.onResize&&this.options.onResize(this)),this.state==s.OPENED||this.state==s.OPENING)if(!0===this.options.iframe)i<this.options.iframeHeight+this.headerHeight||!0===this.isFullscreen?(t("html").addClass(n+"-isAttached"),this.$element.addClass("isAttached"),this.$element.find("."+n+"-iframe").css({height:parseInt(i-this.headerHeight)+"px"})):(t("html").removeClass(n+"-isAttached"),this.$element.removeClass("isAttached"),this.$element.find("."+n+"-iframe").css({height:parseInt(this.options.iframeHeight)+"px"}));else{i>r+this.headerHeight&&!0!==this.isFullscreen&&(t("html").removeClass(n+"-isAttached"),this.$element.removeClass("isAttached"),this.$element.find("."+n+"-wrap").css({height:"auto"})),(r+this.headerHeight>i||Math.ceil(this.$element.innerHeight())<r||!0===this.isFullscreen)&&(t("html").hasClass(n+"-isAttached")||(t("html").addClass(n+"-isAttached"),this.$element.addClass("isAttached")),this.$element.find("."+n+"-wrap").css({height:parseInt(i-this.headerHeight)+"px"}));var l=this.$element.find("."+n+"-wrap").scrollTop(),h=this.$element.find("."+n+"-content").innerHeight();this.$element.find("."+n+"-wrap").innerHeight()+l<h-50?this.$element.addClass("hasScroll"):this.$element.removeClass("hasScroll")}this.$element.css("margin-top")==a||"0px"==this.$element.css("margin-top")||t("html").hasClass(n+"-isAttached")||this.$element.css("margin-top",a)}},e.off("hashchange load").on("hashchange load",function(e){var i=document.location.hash;if(0===a)if(""!==i){t.each(t("."+n),function(e,n){var s=t(n).iziModal("getState");"opened"!=s&&"opening"!=s||"#"+t(n).attr("id")!==i&&t(n).iziModal("close")});try{var s=t(i).data();void 0!==s&&("load"===e.type?!1!==s.iziModal.options.autoOpen&&t(i).iziModal("open"):setTimeout(function(){t(i).iziModal("open")},200))}catch(t){console.info(t)}}else t.each(t("."+n),function(e,i){var n=t(i).iziModal("getState");"opened"!=n&&"opening"!=n||t(i).iziModal("close")});else a=0}),i.off("click","[data-"+n+"-open]").on("click","[data-"+n+"-open]",function(e){e.preventDefault();var i=t("."+n+":visible").attr("id"),s=t(e.currentTarget).attr("data-"+n+"-open"),o=t(e.currentTarget).attr("data-"+n+"-transitionIn"),r=t(e.currentTarget).attr("data-"+n+"-transitionOut");void 0!==r?t("#"+i).iziModal("close",{transition:r}):t("#"+i).iziModal("close"),setTimeout(function(){void 0!==o?t("#"+s).iziModal("open",{transition:o}):t("#"+s).iziModal("open")},200)}),i.off("keyup").on("keyup",function(e){var i=t("."+n+":visible").attr("id"),s=t("#"+i).iziModal("getGroup"),o=e||window.event,r=o.target||o.srcElement;void 0===i||void 0===s||o.ctrlKey||o.metaKey||o.altKey||"INPUT"===r.tagName.toUpperCase()||"TEXTAREA"==r.tagName.toUpperCase()||(37===o.keyCode?t("#"+i).iziModal("prev",o):39===o.keyCode&&t("#"+i).iziModal("next",o))}),t.fn[n]=function(e,i){for(var s=this,o=0;o<s.length;o++){var r=t(s[o]),h=r.data(n),c=t.extend({},t.fn[n].defaults,r.data(),"object"==typeof e&&e);if(h||e&&"object"!=typeof e){if("string"==typeof e&&void 0!==h)return h[e].apply(h,[].concat(i))}else r.data(n,h=new l(r,c));c.autoOpen&&(isNaN(parseInt(c.autoOpen))?!0===c.autoOpen&&setTimeout(function(){h.open()},0):setTimeout(function(){h.open()},c.autoOpen),a++)}return this},t.fn[n].defaults={title:"",subtitle:"",headerColor:"#88A0B9",theme:"",attached:"",icon:null,iconText:null,iconColor:"",rtl:!1,width:600,padding:0,radius:3,zindex:999,iframe:!1,iframeHeight:400,iframeURL:null,focusInput:!0,group:"",loop:!1,navigateCaption:!0,navigateArrows:!0,history:!0,restoreDefaultContent:!1,autoOpen:0,bodyOverflow:!1,fullscreen:!1,openFullscreen:!1,closeOnEscape:!0,overlay:!0,overlayClose:!0,overlayColor:"rgba(0, 0, 0, 0.4)",timeout:!1,timeoutProgressbar:!1,pauseOnHover:!1,timeoutProgressbarColor:"rgba(255,255,255,0.5)",transitionIn:"comingIn",transitionOut:"comingOut",transitionInOverlay:"fadeIn",transitionOutOverlay:"fadeOut",onFullscreen:function(){},onResize:function(){},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}},t.fn[n].Constructor=l}).call(this,window.jQuery),function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},n=function(t,e,i){this.data=t,this.size=t.length,this.type=e,this.encoding=i},s=i.prototype,o=n.prototype,r=t.FileReaderSync,a=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=l.length,c=t.URL||t.webkitURL||t,u=c.createObjectURL,d=c.revokeObjectURL,f=c,p=t.btoa,g=t.atob,m=t.ArrayBuffer,v=t.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=o.fake=!0;h--;)a.prototype[l[h]]=h+1;return c.createObjectURL||(f=t.URL=function(t){var e,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=t,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(e=t.match(b),i.origin=e&&e[1])),i}),f.createObjectURL=function(t){var e,i=t.type;return null===i&&(i="application/octet-stream"),t instanceof n?(e="data:"+i,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):u?u.call(c,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&d&&d.call(c,t)},s.append=function(t){var i=this.data;if(v&&(t instanceof m||t instanceof v)){for(var s="",o=new v(t),l=0,h=o.length;l<h;l++)s+=String.fromCharCode(o[l]);i.push(s)}else if("Blob"===e(t)||"File"===e(t)){if(!r)throw new a("NOT_READABLE_ERR");var c=new r;i.push(c.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&g?i.push(g(t.data)):"URI"===t.encoding?i.push(decodeURIComponent(t.data)):"raw"===t.encoding&&i.push(t.data):("string"!=typeof t&&(t+=""),i.push(unescape(encodeURIComponent(t))))},s.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},s.toString=function(){return"[object BlobBuilder]"},o.slice=function(t,e,i){var s=arguments.length;return s<3&&(i=null),new n(this.data.slice(t,s>1?e:this.data.length),i,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},i}(t);t.Blob=function(t,i){var n=i?i.type||"":"",s=new e;if(t)for(var o=0,r=t.length;o<r;o++)Uint8Array&&t[o]instanceof Uint8Array?s.append(t[o].buffer):s.append(t[o]);var a=s.getBlob(n);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var i=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=i(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(t){"use strict";var e,i=t.Uint8Array,n=t.HTMLCanvasElement,s=n&&n.prototype,o=/\s*;\s*base64\s*(?:;|$)/i,r="toDataURL",a=function(t){for(var n,s,o=t.length,r=new i(o/4*3|0),a=0,l=0,h=[0,0],c=0,u=0;o--;)s=t.charCodeAt(a++),255!==(n=e[s-43])&&void 0!==n&&(h[1]=h[0],h[0]=s,u=u<<6|n,4===++c&&(r[l++]=u>>>16,61!==h[1]&&(r[l++]=u>>>8),61!==h[0]&&(r[l++]=u),c=0));return r};i&&(e=new i([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),!n||s.toBlob&&s.toBlobHD||(s.toBlob||(s.toBlob=function(t,e){if(e||(e="image/png"),this.mozGetAsFile)t(this.mozGetAsFile("canvas",e));else if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(e))t(this.msToBlob());else{var n,s=Array.prototype.slice.call(arguments,1),l=this[r].apply(this,s),h=l.indexOf(","),c=l.substring(h+1),u=o.test(l.substring(0,h));Blob.fake?((n=new Blob).encoding=u?"base64":"URI",n.data=c,n.size=c.length):i&&(n=u?new Blob([a(c)],{type:e}):new Blob([decodeURIComponent(c)],{type:e})),t(n)}}),!s.toBlobHD&&s.toDataURLHD?s.toBlobHD=function(){r="toDataURLHD";var t=this.toBlob();return r="toDataURL",t}:s.toBlobHD=s.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},i=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in i,s=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},o=/constructor/i.test(t.HTMLElement)||t.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},h=function(t,e,i){for(var n=(e=[].concat(e)).length;n--;){var s=t["on"+e[n]];if("function"==typeof s)try{s.call(t,i||t)}catch(t){a(t)}}},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},u=function(a,u,d){d||(a=c(a));var f,p=this,g="application/octet-stream"===a.type,m=function(){h(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,n)return f=e().createObjectURL(a),void setTimeout(function(){i.href=f,i.download=u,s(i),m(),l(f),p.readyState=p.DONE});!function(){if((r||g&&o)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=r?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,m()},i.readAsDataURL(a),void(p.readyState=p.INIT)}f||(f=e().createObjectURL(a)),g?t.location.href=f:t.open(f,"_blank")||(t.location.href=f),p.readyState=p.DONE,m(),l(f)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return e=e||t.name||"download",i||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e,i){return new u(t,e||t.name||"download",i)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),function(){var t=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function e(i){function n(){!t&&this._init&&this._init.apply(this,arguments)}var s=this.prototype;t=!0;var o=new this;t=!1;for(var r in i)o[r]="function"==typeof i[r]&&"function"==typeof s[r]?function(t,e){return function(){var i=this._super;this._super=function(e){return s[t].apply(this,e||[])};var n=e.apply(this,arguments);return this._super=i,n}}(r,i[r]):i[r];return n.prototype=o,n.prototype.constructor=n,n.extend=e,n}}(),function($){function camelCase(t){return t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var t=camelCase(this.name);$[t]=this,$.fn[t]=function(e){var i=Array.prototype.slice.call(arguments,1);return $[t]._isNotChained(e,i)?$[t][e].apply($[t],[this[0]].concat(i)):this.each(function(){if("string"==typeof e){if("_"===e[0]||!$[t][e])throw"Unknown method: "+e;$[t][e].apply($[t],[this].concat(i))}else $[t]._attach(this,e)})}},setDefaults:function(t){$.extend(this.defaultOptions,t||{})},_isNotChained:function(t,e){return"option"===t&&(0===e.length||1===e.length&&"string"==typeof e[0])||$.inArray(t,this._getters)>-1},_attach:function(t,e){if(!(t=$(t)).hasClass(this._getMarker())){t.addClass(this._getMarker()),e=$.extend({},this.defaultOptions,this._getMetadata(t),e||{});var i=$.extend({name:this.name,elem:t,options:e},this._instSettings(t,e));t.data(this.name,i),this._postAttach(t,i),this.option(t,e)}},_instSettings:function(t,e){return{}},_postAttach:function(t,e){},_getMetadata:function(elem){try{var data=elem.data(this.name.toLowerCase())||"";data=data.replace(/'/g,'"'),data=data.replace(/([a-zA-Z0-9]+):/g,function(t,e,i){var n=data.substring(0,i).match(/"/g);return n&&n.length%2!=0?e+":":'"'+e+'":'}),data=$.parseJSON("{"+data+"}");for(var name in data){var value=data[name];"string"==typeof value&&value.match(/^new Date\((.*)\)$/)&&(data[name]=eval(value))}return data}catch(t){return{}}},_getInst:function(t){return $(t).data(this.name)||{}},option:function(t,e,i){var n=(t=$(t)).data(this.name);if(!e||"string"==typeof e&&null==i)return(s=(n||{}).options)&&e?s[e]:s;if(t.hasClass(this._getMarker())){var s=e||{};"string"==typeof e&&((s={})[e]=i),this._optionsChanged(t,n,s),$.extend(n.options,s)}},_optionsChanged:function(t,e,i){},destroy:function(t){(t=$(t)).hasClass(this._getMarker())&&(this._preDestroy(t,this._getInst(t)),t.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(t,e){}}),$.JQPlugin={createPlugin:function(t,e){"object"==typeof t&&(e=t,t="JQPlugin"),t=camelCase(t);var i=camelCase(e.name);JQClass.classes[i]=JQClass.classes[t].extend(e),new JQClass.classes[i]}}}(jQuery),function(t){t.JQPlugin.createPlugin({name:"maxlength",defaultOptions:{max:200,truncate:!0,showFeedback:!0,feedbackTarget:null,onFull:null},regionalOptions:{"":{feedbackText:"{r} characters remaining ({m} maximum)",overflowText:"{o} characters too many ({m} maximum)"}},_getters:["curLength"],_feedbackClass:"maxlength-feedback",_fullClass:"maxlength-full",_overflowClass:"maxlength-overflow",_disabledClass:"maxlength-disabled",_instSettings:function(e,i){return{feedbackTarget:t([])}},_postAttach:function(e,i){e.on("keypress."+i.name,function(e){if(!i.options.truncate)return!0;var n=String.fromCharCode(void 0==e.charCode?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||"\0"==n||t(this).val().length<i.options.max}).on("keyup."+i.name+" paste."+i.name+" cut."+i.name,function(i){"keyup"===i.type?t.maxlength._checkLength(e):setTimeout(function(){t.maxlength._checkLength(e)},1)})},_optionsChanged:function(e,i,n){t.extend(i.options,n),i.feedbackTarget.length>0&&(i.hadFeedbackTarget?i.feedbackTarget.empty().val("").removeClass(this._feedbackClass+" "+this._fullClass+" "+this._overflowClass):i.feedbackTarget.remove(),i.feedbackTarget=t([])),i.options.showFeedback&&(i.hadFeedbackTarget=!!i.options.feedbackTarget,t.isFunction(i.options.feedbackTarget)?i.feedbackTarget=i.options.feedbackTarget.apply(e[0],[]):i.options.feedbackTarget?i.feedbackTarget=t(i.options.feedbackTarget):i.feedbackTarget=t("<span></span>").insertAfter(e),i.feedbackTarget.addClass(this._feedbackClass)),e.off("mouseover."+i.name+" focus."+i.name+"mouseout."+i.name+" blur."+i.name),"active"==i.options.showFeedback&&(e.on("mouseover."+i.name,function(){i.feedbackTarget.css("visibility","visible")}).on("mouseout."+i.name,function(){i.focussed||i.feedbackTarget.css("visibility","hidden")}).on("focus."+i.name,function(){i.focussed=!0,i.feedbackTarget.css("visibility","visible")}).on("blur."+i.name,function(){i.focussed=!1,i.feedbackTarget.css("visibility","hidden")}),i.feedbackTarget.css("visibility","hidden")),this._checkLength(e)},curLength:function(t){var e=this._getInst(t),i=t.val().replace(/\r\n/g,"~~").replace(/\n/g,"~~").length;return{used:i,remaining:e.options.max-i}},_checkLength:function(e){var i=this._getInst(e),n=e.val(),s=n.replace(/\r\n/g,"~~").replace(/\n/g,"~~").length;if(e.toggleClass(this._fullClass,s>=i.options.max).toggleClass(this._overflowClass,s>i.options.max),s>i.options.max&&i.options.truncate){var o=e.val().split(/\r\n|\n/);n="";for(var r=0;n.length<i.options.max&&r<o.length;)n+=o[r].substring(0,i.options.max-n.length)+"\r\n",r++;e.val(n.substring(0,i.options.max)),e[0].scrollTop=e[0].scrollHeight,s=i.options.max}i.feedbackTarget.toggleClass(this._fullClass,s>=i.options.max).toggleClass(this._overflowClass,s>i.options.max);var a=(s>i.options.max?i.options.overflowText:i.options.feedbackText).replace(/\{c\}/,s).replace(/\{m\}/,i.options.max).replace(/\{r\}/,i.options.max-s).replace(/\{o\}/,s-i.options.max);try{i.feedbackTarget.text(a)}catch(t){}try{i.feedbackTarget.val(a)}catch(t){}s>=i.options.max&&t.isFunction(i.options.onFull)&&i.options.onFull.apply(e,[s>i.options.max])},enable:function(e){if((e=t(e)).hasClass(this._getMarker())){var i=this._getInst(e);e.prop("disabled",!1).removeClass(i.name+"-disabled"),i.feedbackTarget.removeClass(i.name+"-disabled")}},disable:function(e){if((e=t(e)).hasClass(this._getMarker())){var i=this._getInst(e);e.prop("disabled",!0).addClass(i.name+"-disabled"),i.feedbackTarget.addClass(i.name+"-disabled")}},_preDestroy:function(t,e){e.feedbackTarget.length>0&&(e.hadFeedbackTarget?e.feedbackTarget.empty().val("").css("visibility","visible").removeClass(this._feedbackClass+" "+this._fullClass+" "+this._overflowClass):e.feedbackTarget.remove()),t.removeClass(this._fullClass+" "+this._overflowClass).off("."+e.name)}})}(jQuery);var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(t){var e=t.length/4*3,i=new ArrayBuffer(e);return this.decode(t,i),i},decode:function(t,e){var i=this._keyStr.indexOf(t.charAt(t.length-1)),n=this._keyStr.indexOf(t.charAt(t.length-2)),s=t.length/4*3;64==i&&s--,64==n&&s--;var o,r,a,l,h,c,u,d=0,f=0;for(o=e?new Uint8Array(e):new Uint8Array(s),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),d=0;d<s;d+=3)r=this._keyStr.indexOf(t.charAt(f++))<<2|(h=this._keyStr.indexOf(t.charAt(f++)))>>4,a=(15&h)<<4|(c=this._keyStr.indexOf(t.charAt(f++)))>>2,l=(3&c)<<6|(u=this._keyStr.indexOf(t.charAt(f++))),o[d]=r,64!=c&&(o[d+1]=a),64!=u&&(o[d+2]=l);return o}},share2social=function(t,e){t("#facebook-share"),t("#twitter-share"),t("#instagram-share");var i=function(t,e,i,n){var s="----ThisIsTheBoundary1234567890",o="--"+s+"\r\n";o+='Content-Disposition: form-data; name="source"; filename="'+e+'"\r\n',o+="Content-Type: "+i+"\r\n\r\n";for(var r=0;r<n.length;++r)o+=String.fromCharCode(255&n[r]);o+="\r\n",o+="--"+s+"--\r\n";var a=new XMLHttpRequest;a.open("POST","https://graph.facebook.com/me/photos?access_token="+t,!0),a.onload=a.onerror=function(){console.log(a.responseText),alert("Sent to Facebook!")},a.setRequestHeader("Content-Type","multipart/form-data; boundary="+s),a.sendAsBinary(o)};void 0===XMLHttpRequest.prototype.sendAsBinary&&(XMLHttpRequest.prototype.sendAsBinary=function(t){var e=Array.prototype.map.call(t,function(t){return 255&t.charCodeAt(0)});this.send(new Uint8Array(e).buffer)}),t(document).on("click","#facebook-share",function(t){var n=e.toDataURL("image/png"),s=n.substring(n.indexOf(",")+1,n.length),o=Base64Binary.decode(s);FB.getLoginStatus(function(t){"connected"===t.status?i(t.authResponse.accessToken,"The Energy To Do You","image/png",o):(t.status,FB.login(function(t){i(t.authResponse.accessToken,"The Energy To Do You","image/png",o)},{scope:"publish_actions"}))})}),t(document).on("click","#twitter-share",function(t){}),t(document).on("click","#instagram-share",function(t){})};!function(t,e){"use strict";var i=e("#addPhotoOnly"),n=e("#moreOptions"),s=(e("#saveLink"),e("#saveLinkBtn")),o=e("#startOver"),r=e("#choose-photo"),a=(e("#add-photo"),e("#add-my-photo"),e("#shareBtn")),l=e("#file-input"),h=e("#share-modal"),c=e("#choose-photo-modal"),u=e("#slider"),d=e("#tools span"),f=e("#zoom-tool"),p=e("#brightness-tool"),g=e("#contrast-tool"),m=e("#loading span"),v=new t.Canvas("image-canvas",{width:846,height:846}),b=new Promise(function(e,i){t.loadSVGFromURL("./img/the-energy-to.svg",function(i,n){var s=t.util.groupSVGElements(i,n);s.selectable=!1,s.evented=!1,s.hasControls=!1,s.hasRotatingPoint=!1,s.hasBorders=!1,s.setOriginX("center"),s.setOriginY("center"),e(s)},function(){})}),_=function(t){return.6667*(t-1)+1},y=function(t){void 0!==saveAs&&t.toBlobHD(function(t){saveAs(t,"image.png")},"image/png")},C=function(t,e,i){i>0&&(e.scaleRatio=i),e.scaleToHeight(t.height/i)},x=function(t){v.setActiveObject(t),t.enterEditing(),t.hiddenTextarea.canvas=v,t.hiddenTextarea.maxLength=10,e(t.hiddenTextarea).maxlength({max:10,showFeedback:!1}),t.hiddenTextarea.focus(),t.hiddenTextarea.onkeyup=function(t){var e=t.target.canvas,s=T(e,"textbox"),o=t.target.value,a=o.length,l=t.key||t.keyIdentifier,h=o.charCodeAt(a-1);"none"===n.css("display")?(i.show(),""===t.target.value?i.find("button").attr("disabled","true"):i.find("button").removeAttr("disabled")):""===t.target.value?n.find("button").attr("disabled","true"):n.find("button").removeAttr("disabled"),"Enter"===l&&(t.target.value=o.slice(0,o.length-1),s.text=t.target.value,r.click()),h>=97&&h<=122&&(t.target.value=o.toUpperCase(),s.text=t.target.value),a>6?C(e,s,_(a)):C(e,s,4),e.renderAll()}},w=function(t,e,i,n){e.scaleToHeight(t.height),e.scaleToWidth(t.width),C(t,i,n),t.add(e),t.add(i)},T=function(t,e){for(var i=0;i<t.size();i++){var n=t.item(i);if(n.type===e)return n}return null},S=function(e,i){var n=T(e,"path-group"),s=T(e,"textbox"),o=s.getText(),r=s.scaleRatio,a=new t.Text(o,{left:9,top:312,fontFamily:"AvenyT-Black",textAlign:"center",fill:"#d80b2c",originX:"center",originY:"center",evented:!1,hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,skewY:-10}),l=new t.Image(i,{hasRotatingPoint:!1,hasControls:!1,hasBorders:!1,originX:"center",originY:"center",left:e.width/2,top:e.height/2}),h=new t.Group([],{hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,selectable:!1,evented:!1,width:846,height:846,originX:"center",originY:"center",left:e.width/2,top:e.height/2});return e.clear(),e.defaultCursor="default",e.add(l),l.width<=l.height?l.scaleToWidth(l.canvas.width):l.width>l.height&&l.scaleToHeight(l.canvas.height),l.newScaleX=l.scaleX,l.newScaleY=l.scaleY,l.filters.push(new t.Image.filters.Contrast({contrast:0})),l.filters.push(new t.Image.filters.Brightness({brightness:0})),l.applyFilters(e.renderAll.bind(e)),e.add(h),w(h,n,a,r),n.setLeft(0),n.setTop(0),e.sendToBack(l),new Promise(function(t){t(!0)})},O=function(t,e){return t.animate("scaleX",t.scaleX*e,{duration:1e3,onChange:v.renderAll.bind(v),ease:"easeOutSine"}).animate("scaleY",t.scaleY*e,{duration:1e3,onChange:v.renderAll.bind(v),ease:"easeOutSine"}),!0},E=function(e){e.clear(),b.then(function(i){var n=new t.Textbox("",{fontFamily:"AvenyT-Black",textAlign:"center",fill:"#d80b2c",originX:"center",originY:"center",cursorColor:"#d80b2c",cursorWidth:5,evented:!0,hasControls:!1,hasRotatingPoint:!1,hasBorders:!1,skewY:-10,top:735,left:432,scaleRatio:4});i.setTop(423),i.setLeft(423),w(e,i,n,4),x(n)})},k=function(t,e,i,n){if(void 0===n)return t.filters[e][i];t.filters[e]&&(t.filters[e][i]=n,t.applyFilters(v.renderAll.bind(v)))},D=function(){var t=v.item(0),e=u.slider("value");t.setScaleX(t.newScaleX*e),t.setScaleY(t.newScaleY*e),t.setCoords(),P(v,t),v.renderAll()},A=function(){k(v.item(0),0,"contrast",u.slider("value"))},I=function(){k(v.item(0),1,"brightness",u.slider("value"))},P=function(t,e){var i=e.aCoords.tl.x,n=e.aCoords.tl.y,s=e.aCoords.br.x,o=e.aCoords.br.y,r=t.width,a=t.height,l=e.width*e.scaleX,h=e.height*e.scaleY;i>=0&&e.setLeft(l/2),n>=0&&e.setTop(h/2),s<=r&&e.setLeft(r-l/2),o<=a&&e.setTop(a-h/2),e.setCoords()};E(v),v.on("mouse:down",function(t){for(var e=0;e<v.size();e++){var i=v.item(e);if("image"!==i.type){v.setActiveObject(i);break}}v.renderAll()}),v.on("mouse:up",function(t){var e=t.target;e&&"image"===e.type?P(v,e):x(T(v,"textbox")),v.renderAll()}),e(document).ready(function(){e("a").on("click",function(t){if(""!==this.hash){t.preventDefault();var i=this.hash;e("html, body").animate({scrollTop:e(i).offset().top},700,function(){window.location.hash=i})}})}),l.click(function(){this.value=""}),l.change(function(){if(this.files[0]){var t=URL.createObjectURL(this.files[0]),e=new Image;e.src=t,e.onload=function(){S(v,e).then(function(t){m.css("z-index","0"),m.hide(),i.hide(),n.show(),g.css("color","#E5003B").click(),O(v.item(1),.6),c.iziModal("close")})},m.css("z-index","2"),m.show()}else console.error("No image selected")}),s.click(function(t){y(v.getElement())}),o.click(function(t){E(v),n.hide()}),r.click(function(t){t.preventDefault(),e("#choose-photo-modal").iziModal("open")}),e(document).on("click","#add-my-photo",function(t){e("#file-input").click()}),e(document).on("click","#add-photo",function(t){S(v,e(".selected img")[0]).then(function(t){m.css("z-index","0"),m.hide(),i.hide(),n.show(),g.css("color","#E5003B").click(),O(v.item(1),.6),c.iziModal("close")})}),a.click(function(t){t.preventDefault(),e("#share-modal").iziModal("open")}),h.iziModal({autoOpen:!1,closeButton:!0}),c.iziModal({title:"Pick your photo",autoOpen:!1,headerColor:"#E5003B",width:800,top:50,bottom:50,padding:20,bodyOverflow:!0}),u.slider({orientation:"horizontal"}),d.click(function(t){d.css("color","#292b2c"),e(t.target).css("color","#E5003B")}),f.click(function(t){u.slider("option","min",1),u.slider("option","max",5),u.slider("option","step",.1),u.slider("option","change",D),u.slider("option","value",Math.round(v.item(0).scaleX/v.item(0).newScaleX*10)/10)}),g.click(function(t){u.slider("option","min",-100),u.slider("option","max",100),u.slider("option","step",10),u.slider("option","change",A),u.slider("option","value",k(v.item(0),0,"contrast"))}),p.click(function(t){u.slider("option","min",-100),u.slider("option","max",100),u.slider("option","step",10),u.slider("option","change",I),u.slider("option","value",k(v.item(0),1,"brightness"))}),e(document).on("click","#choose-photo-modal li",function(t){e("#choose-photo-modal li").removeClass("selected"),e(this).addClass("selected")}),share2social(e,v.getElement())}(fabric,jQuery);